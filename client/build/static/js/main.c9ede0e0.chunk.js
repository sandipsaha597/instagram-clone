(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,n,t){},118:function(e,n,t){"use strict";t.r(n);var r,i,a,c,o,s,l,u,d,b,j,x,p,f,h,g,O,m,A,v,w,y,k,C,S,I,M,D,B,_,N,z,L,E,U,R,F,P,T,W,G,V,Q,H,J,Y,Z,q,X,K,$,ee,ne,te,re,ie,ae,ce,oe,se,le,ue,de,be,je,xe,pe,fe,he,ge,Oe,me,Ae,ve,we,ye,ke,Ce,Se,Ie,Me,De,Be,_e,Ne,ze,Le,Ee,Ue=t(8),Re=t.n(Ue),Fe=t(11),Pe=t(6),Te=t(13),We=t.n(Te),Ge=t(1),Ve=t.n(Ge),Qe=t(29),He=t.n(Qe),Je=t(7),Ye=t(16),Ze=t(2),qe=t(3),Xe=(t(114),t(141)),Ke=qe.a.div(r||(r=Object(Ze.a)(["\n  max-width: 955px;\n  margin: 0 auto;\n"]))),$e=qe.a.button(i||(i=Object(Ze.a)(["\n  background-color: rgb(0, 149, 246);\n  border-radius: 4px;\n  color: #fff;\n  display: block;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 5px 9px;\n  line-height: 18px;\n  width: ",";\n"])),(function(e){return e.widthAuto?"auto":"100%"})),en=qe.a.button(a||(a=Object(Ze.a)(["\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 4px;\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  font-weight: 600;\n  padding: 5px 9px;\n"]))),nn=t(0),tn=function(){return Object(nn.jsx)("svg",{"aria-label":"Home",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object(nn.jsx)("path",{d:"M9.005 16.545a2.997 2.997 0 012.997-2.997h0A2.997 2.997 0 0115 16.545V22h7V11.543L12 2 2 11.543V22h7.005z",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})})},rn=function(){return Object(nn.jsx)("svg",{"aria-label":"Home",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object(nn.jsx)("path",{d:"M22 23h-6.001a1 1 0 01-1-1v-5.455a2.997 2.997 0 10-5.993 0V22a1 1 0 01-1 1H2a1 1 0 01-1-1V11.543a1.002 1.002 0 01.31-.724l10-9.543a1.001 1.001 0 011.38 0l10 9.543a1.002 1.002 0 01.31.724V22a1 1 0 01-1 1z"})})},an=function(){return Object(nn.jsxs)("svg",{"aria-label":"Direct",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"}),Object(nn.jsx)("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})},cn=function(){return Object(nn.jsxs)("svg",{"aria-label":"Direct",color:"#262626",fill:"#262626",height:"96",role:"img",viewBox:"0 0 96 96",width:"96",children:[Object(nn.jsx)("circle",{cx:"48",cy:"48",fill:"none",r:"47",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"69.286",x2:"41.447",y1:"33.21",y2:"48.804"}),Object(nn.jsx)("polygon",{fill:"none",points:"47.254 73.123 71.376 31.998 24.546 32.002 41.448 48.805 47.254 73.123",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})},on=function(){return Object(nn.jsx)("svg",{"aria-label":"Direct",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object(nn.jsx)("path",{d:"M22.91 2.388a.69.69 0 00-.597-.347l-20.625.002a.687.687 0 00-.482 1.178L7.26 9.16a.686.686 0 00.778.128l7.612-3.657a.723.723 0 01.937.248.688.688 0 01-.225.932l-7.144 4.52a.69.69 0 00-.3.743l2.102 8.692a.687.687 0 00.566.518.655.655 0 00.103.008.686.686 0 00.59-.337L22.903 3.08a.688.688 0 00.007-.692",fillRule:"evenodd"})})},sn=qe.a.img(c||(c=Object(Ze.a)(["\n  border-radius: 50%;\n"]))),ln=function(){return Object(nn.jsxs)("svg",{"aria-label":"New Post",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object(nn.jsx)("path",{d:"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"6.545",x2:"17.455",y1:"12.001",y2:"12.001"}),Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12.003",x2:"12.003",y1:"6.545",y2:"17.455"})]})},un=function(e){var n=e.widthAndHeight,t=e.color;return Object(nn.jsxs)("svg",{"aria-label":"Close",color:t,fill:t,role:"img",viewBox:"0 0 24 24",width:n,height:n,children:[Object(nn.jsx)("polyline",{fill:"none",points:"20.643 3.357 12 12 3.353 20.647",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"}),Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",x1:"20.649",x2:"3.354",y1:"20.649",y2:"3.354"})]})},dn=function(){return Object(nn.jsxs)("svg",{"aria-label":"Icon to represent media such as images or videos",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"77",role:"img",viewBox:"0 0 97.6 77.3",width:"96",children:[Object(nn.jsx)("path",{d:"M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z",fill:"currentColor"}),Object(nn.jsx)("path",{d:"M84.7 18.4L58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5l-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z",fill:"currentColor"}),Object(nn.jsx)("path",{d:"M78.2 41.6L61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6l-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z",fill:"currentColor"})]})},bn=function(){return Object(nn.jsx)("svg",{"aria-label":"Select Crop",className:"_8-yf5 ",color:"#ffffff",fill:"#ffffff",height:"16",role:"img",viewBox:"0 0 24 24",width:"16",children:Object(nn.jsx)("path",{d:"M10 20H4v-6a1 1 0 00-2 0v7a1 1 0 001 1h7a1 1 0 000-2zM20.999 2H14a1 1 0 000 2h5.999v6a1 1 0 002 0V3a1 1 0 00-1-1z"})})},jn=function(){return Object(nn.jsxs)("svg",{"aria-label":"New message",className:"_ab6-",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object(nn.jsx)("path",{d:"M12.202 3.203H5.25a3 3 0 00-3 3V18.75a3 3 0 003 3h12.547a3 3 0 003-3v-6.952",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(nn.jsx)("path",{d:"M10.002 17.226H6.774v-3.228L18.607 2.165a1.417 1.417 0 012.004 0l1.224 1.225a1.417 1.417 0 010 2.004z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object(nn.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"16.848",x2:"20.076",y1:"3.924",y2:"7.153"})]})},xn=function(){return Object(nn.jsx)("svg",{"aria-label":"Toggle selection",color:"#0095f6",fill:"#0095f6",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object(nn.jsx)("path",{d:"M12.001.504a11.5 11.5 0 1011.5 11.5 11.513 11.513 0 00-11.5-11.5zm5.706 9.21l-6.5 6.495a1 1 0 01-1.414-.001l-3.5-3.503a1 1 0 111.414-1.414l2.794 2.796L16.293 8.3a1 1 0 011.414 1.415z"})})},pn=function(){return Object(nn.jsx)("svg",{"aria-label":"Toggle selection",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object(nn.jsx)("circle",{cx:"12.008",cy:"12",fill:"none",r:"11.25",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.5"})})},fn=t.p+"static/media/instagram_logo.b7c204eb.png",hn=function(){return Object(nn.jsx)("img",{src:fn,className:"logo",alt:"instagram clone logo"})},gn=t(79),On="http://ec2-13-233-240-100.ap-south-1.compute.amazonaws.com:8080/api",mn=Object(gn.a)("http://ec2-13-233-240-100.ap-south-1.compute.amazonaws.com:8081",{withCredentials:!0,autoConnect:!1}),An=t(10),vn=function(e,n){return e.split("/image/upload/").join("/image/upload/".concat(n,"/"))},wn=function(e,n){return e.length?e.map((function(e){var t=e.participants.filter((function(e){return e._id!==n}));return e.participants=t,e})):[]},yn=function(){var e=Object(Fe.a)(Re.a.mark((function e(n,t,r,i,a,c,o){var s,l,u,d,b,j,x;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){var t=e.participants.map((function(e){return e._id}));if(console.log(t,n),t.length!==n.length)return!1;t.sort(),n.sort();for(var r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0},l=r.find((function(e){return s(e)})),u=null===l||void 0===l?void 0:l._id,!l){e.next=7;break}i((function(e){return Object(An.a)(e,(function(e){var n=e.findIndex((function(e){return e._id===u}));e.splice(n,1),e.unshift(l)}))})),e.next=15;break;case 7:return e.next=9,We.a.get("".concat(On,"/inbox/inboxAndChatsByUserIds"),{params:{userIds:n}});case 9:d=e.sent,b=d.data,j=b.inbox,x=b.chats,j.group.isGroup||mn.emit("subscribe-online-status",{userId:n[0]},(function(){return!1})),u=j._id,i((function(e){return Object(An.a)(e,(function(e){var n=wn([j],t._id)[0];e.unshift(n)}))})),a((function(e){return Object(An.a)(e,(function(e){e.loading=!1,e[u]=x}))}));case 15:c("/inbox/".concat(u)),o&&o();case 17:case"end":return e.stop()}}),e)})));return function(n,t,r,i,a,c,o){return e.apply(this,arguments)}}(),kn=function(e){var n=e.image,t=e.username,r=e.className;return Object(nn.jsxs)(Mn,{className:r,children:[Object(nn.jsx)("img",{src:n,alt:t}),Object(nn.jsx)(Bn,{children:t})]})},Cn=function(e){e.image1,e.image2,e.imageWidth,e.imageGroupContainerWidth;var n=e.groupName,t=e.className;return Object(nn.jsx)(Mn,{className:t,children:Object(nn.jsx)(Bn,{children:n})})},Sn=function(e){var n=e.image,t=e.username,r=e.name,i=e.className,a=e.onClick;return Object(nn.jsxs)(Mn,{className:i,onClick:a,children:[Object(nn.jsx)("img",{src:n,alt:t}),Object(nn.jsxs)(Dn,{children:[Object(nn.jsx)(Bn,{children:t}),Object(nn.jsx)(_n,{children:r})]})]})},In=function(e){var n=e.image1,t=e.image2,r=e.imageWidth,i=e.containerWidth;return Object(nn.jsxs)(Ln,{imageWidth:r,containerWidth:i,children:[Object(nn.jsx)(Nn,{src:n,alt:""}),Object(nn.jsx)(zn,{src:t,alt:""})]})},Mn=qe.a.div(o||(o=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  > * {\n    margin-right: 12px;\n  }\n  img {\n    border-radius: 50%;\n  }\n"]))),Dn=qe.a.div(s||(s=Object(Ze.a)(["\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n"]))),Bn=qe.a.div(l||(l=Object(Ze.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 16px;\n  font-weight: 600;\n  text-decoration: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),_n=qe.a.div(u||(u=Object(Ze.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Nn=qe.a.img(d||(d=Object(Ze.a)([""]))),zn=qe.a.img(b||(b=Object(Ze.a)([""]))),Ln=qe.a.div(j||(j=Object(Ze.a)(["\n  position: relative;\n  img {\n    border-radius: 50%;\n    width: ",";\n    height: ",";\n  }\n  width: ",";\n  height: ",";\n  "," {\n    border: 2px solid #fff;\n    border-radius: 50%;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n"])),(function(e){return e.imageWidth}),(function(e){return e.imageWidth}),(function(e){return e.containerWidth}),(function(e){return e.containerWidth}),zn),En=Object(Ge.forwardRef)((function(e){var n=e.userDetails,t=Object(Ge.useRef)(null),r=Object(Ge.useRef)(null),i=Object(Ge.useState)([]),a=Object(Pe.a)(i,2),c=a[0],o=a[1],s=Object(Ge.useState)("Create new post"),l=Object(Pe.a)(s,2),u=l[0],d=l[1];Object(Ge.useEffect)((function(){alert("PLEASE NOTE: this feature is incomplete")}),[]);var b=function(){var e=Object(Fe.a)(Re.a.mark((function e(){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("Sharing"),e.prev=1,e.next=4,We.a.post("".concat(On,"/createPost"),{caption:null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.value,images:c});case 4:e.sent,d("Post shared"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),alert("Failed to share post"),d("Create new post");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(nn.jsxs)(Wn,{children:[c.length?Object(nn.jsxs)(Tn,{children:[Object(nn.jsx)(Gn,{children:u}),Object(nn.jsx)("button",{onClick:b,children:"Share"})]}):Object(nn.jsx)(Gn,{children:u}),Object(nn.jsxs)(Vn,{haveFiles:c.length,children:[Object(nn.jsx)(Pn,{type:"file",ref:t,onChange:function(){return function(){var e=t.current.files,n=new Array(e.length).fill(""),r=function(e,t){var r=new FileReader;r.addEventListener("load",(function(){n[t]=r.result,n.includes("")||o(n)})),r.readAsDataURL(e)};if(e)for(var i=0;i<t.current.files.length;i++)r(e[i],i)}()}}),c.length?Object(nn.jsxs)(nn.Fragment,{children:[c.map((function(e,n){return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(Un,{src:e,alt:""},n),Object(nn.jsx)(Fn,{children:Object(nn.jsx)(bn,{})})]})})),Object(nn.jsxs)(Rn,{children:[Object(nn.jsx)(kn,{image:vn(n.profilePicture.withVersion,"w_28"),username:n.username}),Object(nn.jsx)("textarea",{ref:r,placeholder:"Write a caption..."})]})]}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(dn,{}),Object(nn.jsx)("p",{children:"Drag photos and videos here"}),Object(nn.jsx)($e,{widthAuto:!0,onClick:function(){var e;return null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.click()},children:"Select from computer"})]})]})]})})),Un=qe.a.img(x||(x=Object(Ze.a)(["\n  width: 523px;\n  height: 523px;\n  object-fit: cover;\n"]))),Rn=(qe.a.div(p||(p=Object(Ze.a)(["\n  display: flex;\n"]))),qe.a.div(f||(f=Object(Ze.a)(["\n  margin: 18px 0 14px 0;\n  padding: 0 16px;\n  width: 307px;\n  textarea {\n    border: none;\n    font-size: 16px;\n    margin-top: 14px;\n    resize: none;\n    width: 100%;\n    &:focus {\n      outline: none;\n    }\n  }\n"])))),Fn=qe.a.button(h||(h=Object(Ze.a)(["\n  background: rgba(26, 26, 26, 0.8);\n  border-radius: 50%;\n  padding: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 16px;\n  left: 16px;\n"]))),Pn=qe.a.input(g||(g=Object(Ze.a)(["\n  display: hidden;\n  position: absolute;\n  left: -10000px;\n"]))),Tn=qe.a.div(O||(O=Object(Ze.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  button {\n    position: absolute;\n    right: 16px;\n    color: rgba(0, 149, 246, 1);\n    font-size: 14px;\n    font-weight: 600;\n  }\n"]))),Wn=qe.a.div(m||(m=Object(Ze.a)(["\n  background-color: #fff;\n  border-radius: 12px;\n  text-align: center;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  overflow: hidden;\n"]))),Gn=qe.a.div(A||(A=Object(Ze.a)(["\n  border-bottom: 1px solid rgba(219, 219, 219, 1);\n  color: rgb(38, 38, 38);\n  font-size: 16px;\n  font-weight: 600;\n  padding: 10px 0;\n"]))),Vn=qe.a.div(v||(v=Object(Ze.a)(["\n  box-sizing: border-box;\n  font-size: 22px;\n  display: flex;\n  justify-content: center;\n  align-items: ",";\n  flex-direction: ",";\n  width: ",";\n  height: ",";\n  /* height: 71vh; */\n  font-weight: 300;\n  padding: ",";\n  p {\n    margin-top: 9px;\n    margin-bottom: 24px;\n  }\n"])),(function(e){return e.haveFiles?"flex-start":"center"}),(function(e){return e.haveFiles?"row":"column"}),(function(e){return e.haveFiles?"auto":"523px"}),(function(e){return e.haveFiles?"auto":"523px"}),(function(e){return e.haveFiles?"0":"0 24px"})),Qn=function(e){var n=e.userDetails,t=e.emptyAllStates,r=Object(Ge.useState)(!0),i=Object(Pe.a)(r,2),a=i[0],c=i[1],o=Object(Ge.useState)(!1),s=Object(Pe.a)(o,2),l=s[0],u=s[1];return Object(nn.jsxs)(Jn,{children:[Object(nn.jsxs)(Yn,{children:[Object(nn.jsx)(hn,{}),Object(nn.jsx)(Zn,{children:Object(nn.jsx)("ul",{children:n?Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("li",{children:Object(nn.jsx)(Ye.c,{to:"/",children:function(e){return e.isActive?Object(nn.jsx)(rn,{}):Object(nn.jsx)(tn,{})}})}),Object(nn.jsx)("li",{children:Object(nn.jsx)(Ye.c,{to:"/inbox",children:function(e){return e.isActive?Object(nn.jsx)(on,{}):Object(nn.jsx)(an,{})}})}),Object(nn.jsx)("li",{children:Object(nn.jsx)("button",{onClick:function(){return u((function(e){return!e}))},children:Object(nn.jsx)(ln,{})})}),Object(nn.jsxs)(Hn,{as:"li",className:"modal-button",active:a,children:[Object(nn.jsx)("button",{type:"button",onClick:function(){return c((function(e){return!e}))},children:Object(nn.jsx)(sn,{src:vn(n.profilePicture.withVersion,"w_24")})}),Object(nn.jsx)(qn,{hidden:a,userDetails:n,emptyAllStates:t})]})]}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("li",{children:Object(nn.jsx)(Ye.b,{to:"/accounts/login",children:Object(nn.jsx)($e,{widthAuto:!0,children:"Log In"})})}),Object(nn.jsx)("li",{children:Object(nn.jsx)(Ye.b,{to:"/accounts/signup",children:Object(nn.jsx)(en,{children:"Sign Up"})})})]})})})]}),Object(nn.jsx)(Xe.a,{open:l,onClose:function(){return u(!1)},children:Object(nn.jsx)(En,{userDetails:n})})]})},Hn=qe.a.li(w||(w=Object(Ze.a)(["\n  > button {\n    border: ",";\n  }\n"])),(function(e){return e.active?"1px solid #fff":"1px solid #000"})),Jn=qe.a.nav(y||(y=Object(Ze.a)(["\n  background: #fff;\n  border-bottom: 1px solid rgb(219, 219, 219);\n  /* grid-area: navbar; */\n"]))),Yn=Object(qe.a)(Ke)(k||(k=Object(Ze.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 20px;\n  .logo {\n    height: 29px;\n  }\n"]))),Zn=qe.a.div(C||(C=Object(Ze.a)(["\n  ul {\n    display: flex;\n    align-items: center;\n    li {\n      margin-left: 22px;\n    }\n  }\n  .modal-button {\n    position: relative;\n    > button {\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n    }\n  }\n"]))),qn=function(e){var n=e.hidden,t=e.userDetails,r=e.emptyAllStates,i=Object(Je.h)(),a=function(){var e=Object(Fe.a)(Re.a.mark((function e(n){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,We.a.get("".concat(On,"/logout"));case 4:r(),mn.disconnect(),i("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert("failed to logout");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return Object(nn.jsxs)(Xn,{hidden:n,children:[Object(nn.jsx)("div",{className:"arrow"}),Object(nn.jsxs)("ul",{children:[Object(nn.jsx)("li",{children:Object(nn.jsx)(Ye.b,{to:"/".concat(t.username),children:"Profile"})}),Object(nn.jsx)("li",{className:"logout",children:Object(nn.jsx)("button",{onClick:a,children:"Log Out"})})]})]})},Xn=qe.a.div(S||(S=Object(Ze.a)(["\n  display: ",";\n  width: 230px;\n  box-sizing: border-box;\n  position: absolute;\n  top: 34px;\n  right: -30px;\n  box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975);\n  border-radius: 6px;\n  background: #ffffff;\n  z-index: 3;\n  .arrow {\n    /* box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975); */\n    width: 14px;\n    height: 14px;\n    position: absolute;\n    background: #fff;\n    top: -6px;\n    right: 34px;\n    transform: rotate(45deg);\n    z-index: 1;\n  }\n  ul {\n    display: flex;\n    flex-flow: column;\n    li {\n      box-sizing: border-box;\n      margin-left: 0;\n      padding: 8px 16px;\n      width: 100%;\n    }\n  }\n\n  .logout {\n    border-top: 1px solid rgb(219, 219, 219);\n  }\n"])),(function(e){return e.hidden?"none":"block"})),Kn=function(e){var n=e.userDetails,t=e.setUserDetails,r=e.emptyAllStates;return Object(nn.jsxs)($n,{children:[Object(nn.jsx)(Qn,{userDetails:n,setUserDetails:t,emptyAllStates:r}),Object(nn.jsxs)(et,{children:[Object(nn.jsx)("h1",{children:n.username}),Object(nn.jsx)("p",{children:n._id})]}),Object(nn.jsx)(Je.b,{})]})},$n=qe.a.div(I||(I=Object(Ze.a)(["\n  height: 100vh;\n  overflow-y: scroll;\n  display: grid;\n  grid-template-rows: auto 1fr;\n  .main {\n    background: tomato;\n  }\n"]))),et=qe.a.div(M||(M=Object(Ze.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n"]))),nt=function(){return Object(nn.jsxs)(rt,{children:[Object(nn.jsx)(tt,{}),Object(nn.jsx)(it,{children:"OR"}),Object(nn.jsx)(tt,{})]})},tt=qe.a.div(D||(D=Object(Ze.a)(["\n  border-top: 1px solid rgb(219, 219, 219);\n  width: 100%;\n"]))),rt=qe.a.div(B||(B=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 18px;\n"]))),it=qe.a.div(_||(_=Object(Ze.a)(["\n  font-size: 13px;\n  font-weight: 600;\n  margin: 0 18px;\n  color: rgb(142, 142, 142);\n"]))),at=qe.a.div(N||(N=Object(Ze.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  box-sizing: border-box;\n  padding: 25px 40px;\n"]))),ct=function(e){var n=e.label,t=e.name,r=e.type,i=e.values,a=e.required,c=Object(Ge.useState)(""),o=Object(Pe.a)(c,2),s=o[0],l=o[1];return Object(nn.jsxs)(ot,{className:"input-box",children:[Object(nn.jsx)(st,{inputValue:s,children:n}),Object(nn.jsx)(lt,{value:s,type:r||"text",required:a,onChange:function(e){l(e.target.value),i.current[t]=e.target.value}})]})},ot=qe.a.div(z||(z=Object(Ze.a)(["\n  position: relative;\n"]))),st=qe.a.label(L||(L=Object(Ze.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 12px;\n  left: 9px;\n  pointer-events: none;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  transition: 0.1s ease-out;\n  ","\n"])),(function(e){return e.inputValue&&"\n    color: rgb(142, 142, 142);\n    top: 27%;\n    font-size: 10px;\n  "})),lt=qe.a.input(E||(E=Object(Ze.a)(["\n  background-color: #fafafa;\n  border: 1px solid rgb(219, 219, 219);\n  &:focus {\n    border: 1px solid rgb(0, 0, 0);\n  }\n  border-radius: 3px;\n  box-sizing: border-box;\n  font-size: 12px;\n  line-height: 18px;\n  outline: none;\n  padding: ",";\n  width: 100%;\n"])),(function(e){return e.value?"15px 0 3px 8px":"10px 0 8px 8px"})),ut=qe.a.div(U||(U=Object(Ze.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 17px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  text-align: center;\n"]))),dt=Object(qe.a)(Ye.b)(R||(R=Object(Ze.a)(["\n  color: #0095f6;\n  font-size: inherit;\n  font-weight: ",";\n"])),(function(e){return e.$bold?"bold":"normal"})),bt=qe.a.p(F||(F=Object(Ze.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  margin: 0;\n  text-align: center;\n"]))),jt=function(e){var n=e.username,t=e.image,r=e.password,i=e.onClick;return Object(nn.jsxs)(xt,{as:"button",onClick:function(){return i(n,r)},children:[Object(nn.jsx)("img",{src:t,alt:n}),Object(nn.jsx)(ut,{children:n})]})},xt=Object(qe.a)(at)(P||(P=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 20px;\n  width: 100%;\n  img {\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n"]))),pt=qe.a.div(T||(T=Object(Ze.a)(["\n  & > button:not(:last-child) {\n    margin-bottom: 15px;\n  }\n"]))),ft=function(e){var n=e.login;return Object(nn.jsxs)(pt,{children:[Object(nn.jsx)("h2",{children:"Demo Accounts:"}),Object(nn.jsx)(jt,{username:"ronaldo",password:"a",image:vn("https://res.cloudinary.com/dbevmtl8a/image/upload/v1660383109/users/vkv2qvtryjgchpdlwjii.jpg","w_40"),onClick:n}),Object(nn.jsx)(jt,{username:"messi",password:"a",image:vn("https://res.cloudinary.com/dbevmtl8a/image/upload/v1667878253/users/qkz76pcen437xua0bdql.jpg","w_40"),onClick:n})]})},ht=function(e){var n,t,r=e.setUserDetails,i=Object(Ge.useRef)({usernameOrEmail:"",password:"",email:"",username:""}),a=Object(Je.h)(),c=(null===(n=Object(Je.g)().state)||void 0===n||null===(t=n.from)||void 0===t||t.pathname,function(){var e=Object(Fe.a)(Re.a.mark((function e(n){var t;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===n||void 0===n||n.preventDefault(),e.prev=1,-1!==i.current.usernameOrEmail.indexOf("@")?i.current.email=i.current.usernameOrEmail:i.current.username=i.current.usernameOrEmail,e.next=5,We.a.post("".concat(On,"/login"),i.current);case 5:(t=e.sent).data._id&&(r(t.data),a("/inbox",{replace:!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),alert("invalid credentials");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}());return Object(nn.jsxs)(gt,{children:[Object(nn.jsxs)("div",{children:[Object(nn.jsxs)(Ot,{children:[Object(nn.jsx)(hn,{}),Object(nn.jsxs)(mt,{onSubmit:c,children:[Object(nn.jsx)(ct,{label:"Username or email",name:"usernameOrEmail",values:i}),Object(nn.jsx)(ct,{label:"Password",name:"password",values:i}),Object(nn.jsx)($e,{type:"submit",children:"Log in"})]}),Object(nn.jsx)(nt,{})]}),Object(nn.jsx)(Ot,{children:Object(nn.jsxs)(bt,{children:["Don't have an account?"," ",Object(nn.jsx)(dt,{to:"/accounts/signup",$bold:!0,children:"Sign up"})]})})]}),Object(nn.jsx)(ft,{login:function(e,n){console.log("usernameOrEmail, password",e,n),i.current.usernameOrEmail=e,i.current.password=n,c()}})]})},gt=qe.a.div(W||(W=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 33px;\n"]))),Ot=Object(qe.a)(at)(G||(G=Object(Ze.a)(["\n  max-width: 350px;\n  margin: 0 100px 10px 0;\n  .logo {\n    margin-top: 21px;\n    margin-bottom: 12px;\n  }\n"]))),mt=qe.a.form(V||(V=Object(Ze.a)(["\n  .input-box {\n    margin-bottom: 6px;\n  }\n  button {\n    margin: 14px 0;\n  }\n"]))),At=t(22),vt=function(){return Object(nn.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAHYAAAB2AU57JggAAAAHdElNRQfmBxsLCxW7jYxwAAAAuklEQVQY0zXNsUrDUACF4S+JKDjHzaHeCiIEqs5uQpZgXaXgM/Uh4hMo3fIATqJQEAdNcVFpRAq61g69nun85x9OAvoqhRydqYkXEpy4MtNoEZzpqd3TN3YOSiUYGgsbKjO3YNc6N4IqVWjisLSMrVGkcm3EP9sS0MpTIvBo4PSfUp29KB7ULh0j6DI9++6ievOhszDymflS2vIc1buFoSPXmW9zFw79+LXpwMhA7Wl9FVQKO5ibmnhlBdj1MDv8krZgAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDExOjExOjE3KzAwOjAwJu/+lgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QxMToxMToxNyswMDowMFeyRioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",alt:"pending"})},wt=function(){return Object(nn.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAG8AAABvAfGi3EMAAAAHdElNRQfmBxsLByhPUI9tAAAAgklEQVQY023PPw7BcAAF4E/bSAykIf5UJ4lbWNicoWp0LCS9hAM4QjeD0RkMIoZGBL83fi95ySOcqBXkiVmoyBU6UYC3hk7JD0+VBip1pOtTZjbGKjWxnbabJzKl3EENiUghdjZSyu0bJnbRt9SzMnJ8M7G7q9Tao9n+TmphLnj2D19sRxWmuewhVAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wNy0yN1QxMTowNzozNSswMDowMD/FR0UAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDctMjdUMTE6MDc6MzUrMDA6MDBOmP/5AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",alt:"sent"})},yt=function(){return Object(nn.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAB2AAAAdgFOeyYIAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAHxJREFUOI1jYBgFpAB7BgaGyVC2EAMDwwYGBgYBYjXbMDAwvGRgYHCCajrFwMDQQzXNHAwMDNFI/CCoExkYGBgcoJodoGJnGRgYutBt4ECTqGZgYMghVjMMwJzWi8fZvdi1IgDMluVINucSshmbIRsYIFEG804jsZpHKgAAsxUalSAPDrEAAAAASUVORK5CYII=",alt:"delivered"})},kt=function(){return Object(nn.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABCFBMVEUAAAAAfM0AeskAe8sAh98AhNoAm/8ASnwAht4AlvcAq/8AkO0Af9MArf8Al/kAjekAjusAc74AlPQAYJ4AlfcAfMwAXpwAnP8AjOcAesoAfM4Afc8Aaq8Afc8AftAAe8wAftAAbbQAkO0Aj+wAdsMAjeoAkO4AieIAaq8AkO4Ak/MAkO0Ai+YAk/IAkvEAh98Ak/MAk/IAkvEAieMAh+AAjekAiuQAd8YAjOcAjOcAITYAieIAkvEAhdwAkO0AjekAj+wAjekAht0AjuoAj+wAjegAk/IAk/IAk/MAjuoAjuoAk/IAjekAkfAAkO0AftAAkO4Ake8AiuMAe8sAa7EAe8sAecj///+3ca+WAAAAV3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw4BDQYCcakLNblFAnHqbjjUsRrp07IZLXkaCXI1AS/SI6KNcTUthHA10tXkhZTbNsBvEaSpGQ0DCgrAeFs8AAAAAWJLR0RXfQrZHwAAAAd0SU1FB+YHGwk7A5Ob27wAAACXSURBVBjTY2AgHjAyMjIxMzLC+SysMrJybPIKcD6LopKyiqqaOgM7GHCwaGhqaevo6ukzcHJx8/DysWpoGmjrGBoZ8zOYmJqZW1haQfkCnAzWNnq2dvYOML4gg5Cjrp6Ts4ELjM8gLOLq5u7h6eUN5TOICov4+Pr5BwQGQfhAETHx4BDW0DAJKJ+BQRLoYClGRmlBIv0IAP46FNQ6Zj0/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDA5OjU4OjQ5KzAwOjAwtfDh/AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QwOTo1ODo0OSswMDowMMStWUAAAAAASUVORK5CYII=",alt:"seen"})},Ct=function(e){var n=e.messageStatus,t=e.className;return Object(nn.jsx)(St,{className:t,children:"pending"===n?Object(nn.jsx)(vt,{}):"sent"===n?Object(nn.jsx)(wt,{}):"delivered"===n?Object(nn.jsx)(yt,{}):"seen"===n?Object(nn.jsx)(kt,{}):"unknown"})},St=qe.a.div(Q||(Q=Object(Ze.a)(["\n  width: 16px;\n"]))),It=function(e){var n=e.sendMessage,t=e.messageInputRef,r=Object(Je.i)(),i=Object(Ge.useState)(""),a=Object(Pe.a)(i,2),c=a[0],o=a[1],s=Object(Ge.useRef)();return Object(Ge.useEffect)((function(){t.current.style.height="20px",t.current.style.height=t.current.scrollHeight+"px"}),[c,t]),Object(nn.jsx)(Mt,{children:Object(nn.jsxs)(Dt,{onSubmit:function(e){n(e,r.inboxId),o("")},children:[Object(nn.jsx)(_t,{placeholder:"Message...",value:c,onChange:function(e){return o(e.target.value)},ref:t,onKeyDown:function(e){13===e.which&&(e.preventDefault(),s.current.click())}}),Object(nn.jsx)(Bt,{ref:s,disabled:!c,children:"Send"})]})})},Mt=qe.a.div(H||(H=Object(Ze.a)(["\n  grid-area: sendMessageBox;\n  padding: 20px;\n"]))),Dt=qe.a.form(J||(J=Object(Ze.a)(["\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 22px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 14px;\n  width: 100%;\n"]))),Bt=qe.a.button(Y||(Y=Object(Ze.a)(["\n  color: rgb(0, 149, 246);\n  font-size: 14px;\n  font-weight: 600;\n"]))),_t=qe.a.textarea(Z||(Z=Object(Ze.a)(["\n  border: none;\n  outline: none;\n  resize: none;\n  height: 20px;\n  max-height: 100px !important;\n  overflow-y: auto;\n  font-size: 14px;\n  width: 100%;\n  padding: 0 12px 0 0;\n"]))),Nt=function(e){var n,t,r,i=e.chats,a=e.inboxAndParticipantData,c=e.setChats,o=e.userDetails,s=e.inboxes,l=e.setInboxes,u=e.setModalOpen,d=Object(Ge.useRef)(),b=Object(Ge.useRef)(),j=Object(Je.i)(),x=Object(Je.h)(),p=Object(Ge.useCallback)((function(e){1===e.participants.length&&(s.find((function(n){return n._id===e._id}))||mn.emit("subscribe-online-status",{userId:e.participants[0]._id},(function(n){var t=n.online;l((function(n){return Object(An.a)(n,(function(r){var i=n.findIndex((function(n){return n._id===e._id}));-1!==i?r[i].participants[0].online=t:console.error("BUG:","no index found")}))}))})))}),[s,l]);Object(Ge.useEffect)((function(){j.inboxId&&mn.emit("message-seen-all",{inboxId:j.inboxId})}),[j.inboxId]),Object(Ge.useEffect)((function(){mn.off("notLoggedIn"),mn.on("notLoggedIn",(function(){alert("not logged In")})),mn.off("message"),mn.on("message",(function(e){var n=e.chat,t=e.inbox;2===t.participants.length&&n.sentBy!==o._id&&(j.inboxId===t._id?mn.emit("message-seen",{chat:n,inbox:t}):mn.emit("message-delivered",{chat:n,inbox:t})),c((function(e){return Object(An.a)(e,(function(e){var t;null===(t=e[n.sentTo])||void 0===t||t.push(n)}))})),b.current&&j.inboxId===t._id&&b.current.scrollTo(0,b.current.scrollHeight);var r=wn([t],o._id)[0];p(r),l((function(e){return Object(An.a)(e,(function(e){var i=e.findIndex((function(e){return e._id===n.sentTo}));if(-1!==i){e[i].lastActivity=t.lastActivity;var a=e.splice(i,1);e.unshift(a[0])}else e.unshift(r)}))}))})),mn.off("message-delivered"),mn.on("message-delivered",(function(e){c((function(n){return Object(An.a)(n,(function(n){var t;null===(t=n[e.chat.sentTo])||void 0===t||t.every((function(n){return e.chat._id!==n._id||(n.messageStatus="delivered",!1)}))}))})),l((function(n){return Object(An.a)(n,(function(n){n.every((function(n){return n._id!==e.chat.sentTo||(n.lastActivity.chat_id===e.chat._id&&"sent"===n.lastActivity.messageStatus&&(n.lastActivity.messageStatus="delivered"),!1)}))}))}))})),mn.off("message-seen"),mn.on("message-seen",(function(e){c((function(n){return Object(An.a)(n,(function(n){var t;null===(t=n[e.chat.sentTo])||void 0===t||t.every((function(n){return e.chat._id!==n._id||(n.messageStatus="seen",!1)}))}))})),l((function(n){return Object(An.a)(n,(function(n){n.every((function(n){return n._id!==e.chat.sentTo||(n.lastActivity.chat_id===e.chat._id&&"seen"!==n.lastActivity.messageStatus&&(n.lastActivity.messageStatus="seen"),!1)}))}))}))})),mn.off("message-seen-all"),mn.on("message-seen-all",(function(e){var n=e.inboxId;c((function(e){return Object(An.a)(e,(function(e){var t;null===(t=e[n])||void 0===t||t.forEach((function(e){"delivered"===e.messageStatus&&(e.messageStatus="seen")}))}))})),l((function(e){return Object(An.a)(e,(function(e){e.every((function(e){return e._id!==n||("delivered"===e.lastActivity.messageStatus&&(e.lastActivity.messageStatus="seen"),!1)}))}))}))})),mn.off("error"),mn.on("error",(function(e){console.error(e)}))}),[o._id,j.inboxId,c,l,p]),Object(Ge.useEffect)((function(){Object(Fe.a)(Re.a.mark((function e(){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.inboxId){e.next=2;break}return e.abrupt("return");case 2:if(!i[j.inboxId]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,We.a.get("".concat(On,"/chat/").concat(j.inboxId));case 7:if(0!==(n=e.sent).data.length){e.next=11;break}return x("/inbox"),e.abrupt("return");case 11:c((function(e){return Object(An.a)(e,(function(e){e[n.data[0].sentTo]=n.data}))})),b.current&&n.data[0].sentTo===j.inboxId&&b.current.scrollTo(0,b.current.scrollHeight),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0),x("/inbox");case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()}),[j.inboxId,i,c,x]),Object(Ge.useEffect)((function(){b.current&&b.current.scrollTo(0,b.current.scrollHeight)}),[j.inboxId]);var f=null===(n=a.participantData)||void 0===n?void 0:n[Object.keys(a.participantData)[0]],h=(null===(t=a.participantData)||void 0===t||t[Object.keys(a.participantData)[1]],null===(r=a.inboxData)||void 0===r?void 0:r.group.isGroup);return Object(nn.jsx)(nn.Fragment,{children:void 0===j.inboxId?Object(nn.jsxs)(zt,{children:[Object(nn.jsx)(cn,{}),Object(nn.jsx)("h1",{children:"Your Messages"}),Object(nn.jsx)("p",{children:"Send private messages to a friend or group."}),Object(nn.jsx)($e,{widthAuto:!0,onClick:function(){return u(!0)},children:"Send Message"})]}):void 0===i[j.inboxId]?Object(nn.jsx)("h3",{children:"Loading..."}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(Lt,{children:f?Object(nn.jsx)(nn.Fragment,{children:h?Object(nn.jsx)("button",{onClick:function(){var e=[];Object.keys(a.participantData).forEach((function(n){e.push(a.participantData[n].username)})),alert(e.join("\n"))},children:Object(nn.jsx)(Cn,{groupName:a.inboxData.group.groupName})}):Object(nn.jsx)(Ye.b,{to:"/"+(null===f||void 0===f?void 0:f.username),children:Object(nn.jsx)(kn,{image:vn(f.profilePicture,"w_24"),username:f.name})})}):Object(nn.jsx)("div",{children:"Loading..."})}),Object(nn.jsx)(Et,{ref:b,children:Object(nn.jsx)(Ut,{children:i[j.inboxId].map((function(e,n){var t,r,c,s,l,u,d,b,x=e.sentBy===o._id,p=i[j.inboxId||0];return Object(nn.jsxs)(Ft,{chatSentByUser:x,children:[!x&&Object(nn.jsx)(nn.Fragment,{children:(null===(t=p[n+1])||void 0===t?void 0:t.sentBy)!==e.sentBy?Object(nn.jsx)(Ye.b,{to:"/"+(null===(r=a.participantData[e.sentBy])||void 0===r?void 0:r.username),children:Object(nn.jsx)("img",{className:"profile-pic",src:(null===(c=a.participantData)||void 0===c||null===(s=c[e.sentBy])||void 0===s?void 0:s.profilePicture)?vn(null===(l=a.participantData)||void 0===l||null===(u=l[e.sentBy])||void 0===u?void 0:u.profilePicture,"w_24"):"",alt:null===(d=a.participantData)||void 0===d||null===(b=d[e.sentBy])||void 0===b?void 0:b.name})}):Object(nn.jsx)(Rt,{width:"24px"})}),Object(nn.jsxs)("div",{className:"chat-wrapper",children:[Object(nn.jsx)("p",{children:e.message}),x&&Object(nn.jsx)(Ct,{messageStatus:e.messageStatus})]})]},e._id)}))})}),Object(nn.jsx)(It,{sendMessage:function(e,n){e.preventDefault();var t=d.current.value;if(""!==t.trim()){var r="temp-"+Math.floor(8999999*Math.random()+1e6);Object(Qe.flushSync)((function(){c((function(e){return Object(An.a)(e,(function(e){var i={_id:r,sentBy:o._id,sentTo:n,message:t,messageStatus:"pending"};e[n].push(i)}))}))})),b.current&&b.current.scrollTo(0,b.current.scrollHeight),l((function(e){return Object(An.a)(e,(function(e){var i={chat_id:r,message:t,messageStatus:"pending",sentBy:o._id},a=e.findIndex((function(e){return e._id===n}));e[a].lastActivity=i;var c=e.splice(a,1);e.unshift(c[0])}))})),mn.emit("message",{message:t,inboxId:n,tempChatId:r},(function(e){if("ok"===e.status){var n=e.chat,t=e.inbox;c((function(t){return Object(An.a)(t,(function(t){t[n.sentTo].every((function(n){return n._id!==e.chat.tempChatId||(n._id=e.chat._id,n.messageStatus="sent",!1)}))}))})),l((function(e){return Object(An.a)(e,(function(e){var r=e.findIndex((function(e){return e._id===n.sentTo}));e[r].lastActivity.chat_id===n.tempChatId&&(e[r].lastActivity=t.lastActivity)}))}))}"error"===e.status&&console.error("failed to send message")})),d.current.value=""}},messageInputRef:d})]})})},zt=qe.a.div(q||(q=Object(Ze.a)(["\n  grid-area: noActiveInbox;\n  align-self: center;\n  justify-self: center;\n  text-align: center;\n  h1 {\n    font-size: 22px;\n    font-weight: 300;\n    margin-top: 7px;\n  }\n  p {\n    color: rgb(142, 142, 142);\n    font-size: 14px;\n    margin-top: 6px;\n    margin-bottom: 25px;\n  }\n  "," {\n    margin: auto;\n  }\n"])),$e),Lt=qe.a.div(X||(X=Object(Ze.a)(["\n  border-bottom: 1px solid rgb(219, 219, 219);\n  grid-area: chatBoxHeading;\n  padding: 20px 20px 20px 40px;\n"]))),Et=qe.a.div(K||(K=Object(Ze.a)(["\n  display: flex;\n  grid-area: chats;\n  overflow-y: auto;\n"]))),Ut=qe.a.div($||($=Object(Ze.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  margin-top: auto;\n  padding: 20px 20px 0px 20px;\n  width: 100%;\n"]))),Rt=qe.a.div(ee||(ee=Object(Ze.a)(["\n  width: ",";\n"])),(function(e){return e.width})),Ft=qe.a.div(ne||(ne=Object(Ze.a)(["\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 8px;\n  align-self: ",";\n  .profile-pic,\n  "," {\n    margin-right: 8px;\n  }\n  .profile-pic {\n    border-radius: 50%;\n  }\n  .chat-wrapper {\n    background: ",";\n    border: 1px solid rgb(239, 239, 239);\n    border-radius: 22px;\n    box-sizing: border-box;\n    display: flex;\n    align-items: flex-end;\n    font-size: 14px;\n    padding: 16px;\n    max-width: 234px;\n    p {\n      box-sizing: border-box;\n      max-width: ",";\n      padding-right: ",";\n      word-wrap: break-word;\n    }\n  }\n"])),(function(e){return e.chatSentByUser?"flex-end":"flex-start"}),Rt,(function(e){return e.chatSentByUser?"rgb(239, 239, 239)":"transparent"}),(function(e){return e.chatSentByUser?"calc(100% - 16px)":"100%"}),(function(e){return e.chatSentByUser?"7px":"0px"})),Pt=t(58),Tt=t(143),Wt=function(e){var n=e.text,t=e.onClose;return Object(nn.jsxs)(Gt,{children:[Object(nn.jsx)(Vt,{children:n}),Object(nn.jsx)(Qt,{onClick:function(){return t(n)},children:Object(nn.jsx)(un,{widthAndHeight:12,color:"#0095f6"})})]})},Gt=qe.a.div(te||(te=Object(Ze.a)(["\n  background: rgb(224, 241, 255);\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  height: 35px;\n  margin: 4px;\n  padding: 0 12px;\n"]))),Vt=qe.a.div(re||(re=Object(Ze.a)(["\n  color: rgb(0, 149, 246);\n"]))),Qt=qe.a.button(ie||(ie=Object(Ze.a)(["\n  margin-left: 8px;\n"]))),Ht=function(e){var n=e.suggestedUsers,t=e.open,r=e.setOpen,i=e.handleNextClick,a=Object(Ge.useState)([]),c=Object(Pe.a)(a,2),o=c[0],s=c[1],l=Object(Ge.useState)([]),u=Object(Pe.a)(l,2),d=u[0],b=u[1],j=Object(Ge.useState)(!1),x=Object(Pe.a)(j,2),p=x[0],f=x[1],h=Object(Ge.useRef)();Object(Ge.useEffect)((function(){f(!1)}),[t]);var g=function(){var e=Object(Fe.a)(Re.a.mark((function e(n){var t,r,i;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=n.target.value).trim()){e.next=3;break}return e.abrupt("return",s([]));case 3:return s("loading"),e.next=6,We.a.get("".concat(On,"/searchUser/").concat(t));case 6:if(0!==(r=e.sent).data.length){e.next=9;break}return e.abrupt("return",s("no results"));case 9:i=r.data.map((function(e){return Object(Pt.a)(Object(Pt.a)({},e),{},{profilePicture:e.profilePicture.withVersion})})),s(i);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){b((function(n){var t=Object(At.a)(n);return t=t.filter((function(n){return n.username!==e.username}))}))},m=Object(Ge.useMemo)((function(){return 0===o.length?{listType:"suggestedUsers",data:n}:{listType:"searchResults",data:o}}),[o,n]);return Object(nn.jsx)(Xe.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(nn.jsxs)(Jt,{children:[Object(nn.jsxs)(Xt,{children:[Object(nn.jsx)(Zt,{onClick:function(){return r(!1)},children:Object(nn.jsx)(un,{color:"#000",widthAndHeight:"18px"})}),Object(nn.jsx)(Yt,{children:"New Message"}),Object(nn.jsx)(qt,{disabled:!d.length||p,onClick:function(){f(!0),i(d)},children:"Next"})]}),Object(nn.jsxs)(Kt,{children:[Object(nn.jsx)($t,{children:"To:"}),Object(nn.jsxs)(er,{children:[Object(nn.jsx)(nr,{children:d.map((function(e){return Object(nn.jsx)(Wt,{text:e.username,onClose:function(){return O(e)}},e.username)}))}),Object(nn.jsx)(tr,{type:"text",placeholder:"Search...",onChange:g,ref:h})]})]}),"loading"===o?Object(nn.jsx)("h1",{children:"Loading..."}):"no results"===o?Object(nn.jsx)("h1",{children:"No account found"}):Object(nn.jsxs)(ir,{children:["suggestedUsers"===m.listType&&Object(nn.jsx)(rr,{children:"Suggested"}),m.data.map((function(e){return Object(nn.jsx)(ar,{info:e,selected:d,setSelected:b,onClick:function(){return n=e,void(d.find((function(e){return e.username===n.username}))?O(n):(b((function(e){return Object(An.a)(e,(function(e){e.push(n)}))})),h.current.value="",s([])));var n}},e.username)}))]})]})})},Jt=Object(qe.a)(Tt.a)(ae||(ae=Object(Ze.a)(["\n  background: #fff;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 63vh;\n  width: 400px;\n  &:focus {\n    border: none;\n    outline: none;\n  }\n"]))),Yt=qe.a.div(ce||(ce=Object(Ze.a)([""]))),Zt=qe.a.button(oe||(oe=Object(Ze.a)([""]))),qt=qe.a.button(se||(se=Object(Ze.a)([""]))),Xt=qe.a.div(le||(le=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  height: 42px;\n  "," {\n    line-height: 1;\n    margin: 0 16px;\n    position: absolute;\n    left: 0;\n  }\n  "," {\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    font-weight: 600;\n  }\n  "," {\n    color: rgb(0, 149, 246);\n    font-size: 14px;\n    font-weight: 600;\n    margin: 0 16px;\n    position: absolute;\n    right: 0;\n  }\n"])),Zt,Yt,qt),Kt=qe.a.div(ue||(ue=Object(Ze.a)(["\n  display: flex;\n  padding: 8px 0;\n  border-top: 1px solid rgb(219, 219, 219);\n  border-bottom: 1px solid rgb(219, 219, 219);\n"]))),$t=qe.a.div(de||(de=Object(Ze.a)(["\n  font-weight: 600;\n  padding: 4px 12px;\n"]))),er=qe.a.div(be||(be=Object(Ze.a)(["\n  flex-grow: 1;\n"]))),nr=qe.a.div(je||(je=Object(Ze.a)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: row wrap;\n  max-height: 17vh;\n  overflow-y: auto;\n  padding: 0 8px;\n  width: 100%;\n"]))),tr=qe.a.input(xe||(xe=Object(Ze.a)(["\n  border: none;\n  box-sizing: border-box;\n  caret-color: #000000;\n  font-size: 14px;\n  height: 30px;\n  padding: 0 20px;\n  &:focus {\n    outline: none;\n  }\n  width: 84%;\n"]))),rr=qe.a.div(pe||(pe=Object(Ze.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  font-weight: 600;\n  padding: 16px;\n"]))),ir=qe.a.div(fe||(fe=Object(Ze.a)(["\n  /* background: #000; */\n  flex-grow: 1;\n  overflow-y: auto;\n"]))),ar=function(e){var n=e.info,t=e.selected,r=e.onClick,i=Object(Ge.useMemo)((function(){return t.find((function(e){return e.username===n.username}))}),[t,n]);return Object(nn.jsxs)(cr,{onClick:function(){return r(n)},children:[Object(nn.jsx)(Sn,{image:vn(n.profilePicture,"w_44"),name:n.name,username:n.username}),i?Object(nn.jsx)(xn,{}):Object(nn.jsx)(pn,{})]},n.username)},cr=qe.a.button(he||(he=Object(Ze.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 16px;\n  width: 100%;\n"]))),or=function(e){var n=e.userDetails,t=e.chats,r=e.setChats,i=e.inboxes,a=e.setInboxes,c=Object(Je.i)(),o=Object(Ge.useState)(!1),s=Object(Pe.a)(o,2),l=s[0],u=s[1],d=Object(Ge.useState)({}),b=Object(Pe.a)(d,2),j=b[0],x=b[1],p=Object(Je.h)();Object(Ge.useEffect)((function(){var e={};i.forEach((function(n){n.participants.forEach((function(n){e[n._id]={},e[n._id].name=n.name,e[n._id].profilePicture=n.profilePicture,e[n._id].username=n.username}))})),x(e)}),[i]),Object(Ge.useEffect)((function(){mn.connect()}),[]),Object(Ge.useEffect)((function(){mn.emit("get-inboxes",{},(function(e){var t=wn(e.data,n._id);a((function(e){return function(e){var n=[];return e.forEach((function(e){n.find((function(n){return n._id===e._id}))||n.push(e)})),n}([].concat(Object(At.a)(e),Object(At.a)(t)))}))}))}),[n._id,a]),Object(Ge.useEffect)((function(){mn.off("online-status"),mn.on("online-status",(function(e){var t;if(e._id!==n._id){var c=null===(t=i.find((function(n){return 1===n.participants.length&&n.participants[0]._id===e._id})))||void 0===t?void 0:t._id;c&&(a((function(n){return Object(An.a)(n,(function(n){var t=n.findIndex((function(e){return e._id===c})),r=n[t];r.participants[0].online=e.online,e.online&&"sent"===r.lastActivity.messageStatus&&(r.lastActivity.messageStatus="delivered")}))})),e.online&&r((function(e){return Object(An.a)(e,(function(e){var n;null===e||void 0===e||null===(n=e[c])||void 0===n||n.forEach((function(e){"sent"===e.messageStatus&&(e.messageStatus="delivered")}))}))})))}else console.error("in online-status data._id should never be user's own id")}))}),[i,a,r,n._id]);var f=Object(Ge.useMemo)((function(){var e={participantData:{},inboxData:{group:{}}};try{if(!c.inboxId||0===i.length)return e;var n=i.findIndex((function(e){return e._id===c.inboxId}));return i[n].group.isGroup&&(e.inboxData.group={isGroup:!0,groupName:i[n].group.groupName}),i[n].participants.forEach((function(n){e.participantData[n._id]=j[n._id]})),e}catch(t){console.error(t),p("/inbox",{replace:!0})}return e}),[c.inboxId,j,i,p]),h=Object(Ge.useMemo)((function(){for(var e=[],n=Object.keys(j),t=0;t<Math.min(11,n.length);t++){var r=j[n[t]],i=r.name,a=r.username,c=r.profilePicture;e.push({_id:n[t],name:i,username:a,profilePicture:c})}return e}),[j]);return Object(nn.jsxs)(xr,{activeInbox:!!c.inboxId,children:[Object(nn.jsxs)(hr,{children:[Object(nn.jsx)(sr,{children:n.username}),Object(nn.jsx)(fr,{onClick:function(){return u(!0)},children:Object(nn.jsx)(jn,{})})]}),Object(nn.jsx)(pr,{children:i.map((function(e){var t=e.group.isGroup;return Object(nn.jsxs)(jr,{to:"/inbox/"+e._id,$group:t,$lastMessage:e.lastActivity.message,$online:e.participants[0].online,className:function(e){return e.isActive?"active":void 0},children:[Object(nn.jsx)(ur,{children:t?Object(nn.jsx)(In,{image1:e.participants[0].profilePicture,image2:e.participants[1].profilePicture,imageWidth:"40px",containerWidth:"56px"}):Object(nn.jsx)("img",{src:vn(e.participants[0].profilePicture,"w_56"),alt:e.participants[0].username})}),Object(nn.jsx)(lr,{children:t?e.group.groupName:e.participants[0].name}),""!==e.lastActivity.message&&Object(nn.jsxs)(nn.Fragment,{children:[e.lastActivity.sentBy===n._id&&Object(nn.jsx)(dr,{messageStatus:e.lastActivity.messageStatus}),Object(nn.jsx)(br,{children:e.lastActivity.message})]})]},e._id)}))}),Object(nn.jsx)(Nt,{chats:t,inboxAndParticipantData:f,setChats:r,userDetails:n,inboxes:i,setInboxes:a,setModalOpen:u}),Object(nn.jsx)(Ht,{open:l,setOpen:u,handleNextClick:function(e){yn(e.map((function(e){return e._id})),n,i,a,r,p,(function(){return u(!1)}))},suggestedUsers:h})]})},sr=qe.a.div(ge||(ge=Object(Ze.a)([""]))),lr=qe.a.div(Oe||(Oe=Object(Ze.a)([""]))),ur=qe.a.div(me||(me=Object(Ze.a)([""]))),dr=Object(qe.a)(Ct)(Ae||(Ae=Object(Ze.a)([""]))),br=qe.a.div(ve||(ve=Object(Ze.a)([""]))),jr=Object(qe.a)(Ye.c)(we||(we=Object(Ze.a)(["\n  display: grid;\n  grid-template-columns: auto auto 1fr;\n  grid-template-rows: auto auto;\n  grid-template-areas: ",";\n\n  padding: 8px 20px;\n  text-decoration: none;\n  &.active {\n    background: rgb(239, 239, 239);\n  }\n  "," {\n    grid-area: profilePic;\n    height: 56px;\n    position: relative;\n    margin-right: 12px;\n    img {\n      border-radius: 50%;\n    }\n    &::after {\n      background: ",";\n      border: 4px solid #fff;\n      border-radius: 50%;\n      content: '';\n      display: ",";\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      width: 13px;\n      height: 13px;\n    }\n  }\n  "," {\n    align-self: ",";\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    grid-area: username;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  "," {\n    grid-area: messageStatus;\n    margin-right: 2px;\n    margin-top: 1px;\n  }\n  "," {\n    color: rgb(142, 142, 142);\n    font-size: 14px;\n    grid-area: message;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n"])),(function(e){return e.$lastMessage?"'profilePic username username'\n    'profilePic messageStatus message'":"'profilePic username username'\n    'profilePic username username'"}),ur,(function(e){return e.$online?"#78de45":"#c4c4c4"}),(function(e){return e.$group?"none":"block"}),lr,(function(e){return e.$lastMessage?"end":"center"}),dr,br),xr=Object(qe.a)(Ke)(ye||(ye=Object(Ze.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 4px;\n  display: grid;\n  grid-template-columns: 350px;\n  grid-template-rows: 60px 1fr auto;\n  grid-template-areas: ",";\n  margin: 20px auto;\n  overflow: auto;\n  width: 100%;\n"])),(function(e){return e.activeInbox?"'usernameAndChat chatBoxHeading'\n          'inboxList chats'\n          'inboxList sendMessageBox'":"'usernameAndChat noActiveInbox'\n          'inboxList noActiveInbox'\n          'inboxList noActiveInbox'"})),pr=qe.a.div(ke||(ke=Object(Ze.a)(["\n  border-right: 1px solid rgb(219, 219, 219);\n  grid-area: inboxList;\n  padding: 10px 0;\n  overflow: auto;\n"]))),fr=qe.a.button(Ce||(Ce=Object(Ze.a)([""]))),hr=qe.a.div(Se||(Se=Object(Ze.a)(["\n  border-right: 1px solid rgb(219, 219, 219);\n  border-bottom: 1px solid rgb(219, 219, 219);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  grid-area: usernameAndChat;\n  position: relative;\n  "," {\n    text-align: center;\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    font-weight: 600;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 65%;\n  }\n  "," {\n    position: absolute;\n    right: 20px;\n  }\n"])),sr,fr),gr=function(){var e=Object(Fe.a)(Re.a.mark((function e(n){var t,r,i;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.current.files[0],r=function(){var e=Object(Fe.a)(Re.a.mark((function e(n){var t,r,i;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FileReader,r=new Promise((function(e,n){t.addEventListener("load",(function(){e(t.result)}))})),t.readAsDataURL(n),e.next=5,r;case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!t){e.next=7;break}return e.next=5,r(t);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Or=function(){var e=Object(Fe.a)(Re.a.mark((function e(n,t){var r;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.a.post("".concat(On,"/profilePicture/change"),{profilePicture:n});case 3:r=e.sent,console.log("success",r),t((function(e){return e._id!==r.data._id?e:Object(An.a)(e,(function(e){e.profilePicture=r.data.profilePicture}))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("failed");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}(),mr=function(){var e=Object(Fe.a)(Re.a.mark((function e(n){var t;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.a.post("".concat(On,"/profilePicture/remove"));case 3:t=e.sent,console.log("success",t),n((function(e){return e._id!==t.data._id?e:Object(An.a)(e,(function(e){e.profilePicture=t.data.profilePicture}))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("failed");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),Ar=function(e){var n=e.userDetails,t=e.setChats,r=e.inboxes,i=e.setInboxes,a=Object(Ge.useState)(),c=Object(Pe.a)(a,2),o=c[0],s=c[1],l=Object(Ge.useState)(!1),u=Object(Pe.a)(l,2),d=u[0],b=u[1],j=Object(Ge.useState)(!1),x=Object(Pe.a)(j,2),p=x[0],f=x[1],h=Object(Ge.useRef)();console.log("profileDetails",o);var g=Object(Je.i)(),O=Object(Je.h)();return Object(Ge.useEffect)((function(){Object(Fe.a)(Re.a.mark((function e(){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.a.get("".concat(On,"/").concat(g.username));case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[g.username]),(null===o||void 0===o?void 0:o.username)?Object(nn.jsxs)("div",{children:[Object(nn.jsxs)(wr,{as:"header",children:[Object(nn.jsx)("button",{className:"img-box",onClick:function(){o._id===n._id&&f(!0)},children:Object(nn.jsx)("img",{src:vn(o.profilePicture.withVersion,"w_320"),alt:o.username})}),Object(nn.jsxs)("section",{children:[Object(nn.jsxs)("div",{className:"flex username-and-edit-profile",children:[Object(nn.jsx)("h2",{children:o.username}),n.username!==o.username&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(en,{disabled:d,onClick:function(){b(!0),yn([o._id],n,r,i,t,O)},children:"Message"}),Object(nn.jsx)($e,{disabled:!0,widthAuto:!0,children:"Follow"})]})]}),Object(nn.jsxs)("ul",{className:"flex posts-followers-following",children:[Object(nn.jsxs)("li",{children:[Object(nn.jsx)("strong",{children:o.postCount||0})," posts"]}),Object(nn.jsxs)("li",{children:[Object(nn.jsx)("strong",{children:o.followerCount||0})," followers"]}),Object(nn.jsxs)("li",{children:[Object(nn.jsx)("strong",{children:o.followingCount||0})," following"]})]}),Object(nn.jsxs)("div",{children:[Object(nn.jsx)("h3",{children:o.name}),Object(nn.jsx)("p",{className:"bio",children:o.bio})]})]})]}),Object(nn.jsx)(yr,{as:"section",children:0===o.posts.length?Object(nn.jsx)("h2",{children:"No Posts Yet"}):o.posts.map((function(e,n){return Object(nn.jsx)("div",{children:Object(nn.jsx)("img",{src:vn(e.images[0].url,"w_293"),alt:"post ".concat(n)})},e._id)}))}),Object(nn.jsx)(Xe.a,{open:p,onClose:function(){return f(!1)},children:Object(nn.jsxs)(kr,{children:[Object(nn.jsx)("h2",{children:"Change Profile Photo"}),Object(nn.jsx)("button",{className:"upload-photo",onClick:function(){return h.current.click()},children:"Upload Photo"}),Object(nn.jsx)("button",{className:"remove-photo",onClick:function(){f(!1),mr(s)},children:"Remove Current Photo"}),Object(nn.jsx)("button",{className:"cancel",onClick:function(){return f(!1)},children:"Cancel"}),Object(nn.jsx)(vr,{type:"file",ref:h,onChange:Object(Fe.a)(Re.a.mark((function e(){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=3,gr(h);case 3:n=e.sent,Or(n,s);case 5:case"end":return e.stop()}}),e)})))})]})})]}):Object(nn.jsx)("h1",{children:"Loading..."})},vr=qe.a.input(Ie||(Ie=Object(Ze.a)(["\n  display: hidden;\n  position: absolute;\n  left: -10000px;\n"]))),wr=Object(qe.a)(Ke)(Me||(Me=Object(Ze.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: flex-start;\n  padding: 30px 20px 60px 94px;\n  .img-box {\n    border-radius: 50%;\n    margin-right: 98px;\n    width: 150px;\n    height: 150px;\n    overflow: hidden;\n    text-align: center;\n    img {\n      object-fit: cover;\n      object-position: center center;\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .flex {\n    display: flex;\n    align-items: center;\n  }\n  h2 {\n    font-weight: 300;\n    color: rgb(38, 38, 38);\n    font-size: 28px;\n    margin: 0;\n    margin-right: 20px;\n  }\n  .posts-followers-following li {\n    margin-right: 50px;\n  }\n  section .username-and-edit-profile,\n  section ul {\n    margin-bottom: 20px;\n  }\n  section .username-and-edit-profile {\n    "," {\n      margin-right: 8px;\n    }\n    "," {\n      padding-left: 24px;\n      padding-right: 24px;\n    }\n  }\n  section > div:last-child {\n    margin-bottom: 0px;\n  }\n  h3 {\n    margin: 0;\n    font-size: 16px;\n    font-weight: 600;\n  }\n  p {\n    font-size: 16px;\n    margin: 0;\n  }\n  strong {\n    font-weight: 600;\n  }\n"])),en,$e),yr=Object(qe.a)(Ke)(De||(De=Object(Ze.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  text-align: center;\n  h2 {\n    color: rgb(38, 38, 38);\n    font-weight: 300;\n    font-size: 46px;\n  }\n  div {\n    width: 293px;\n    height: 293px;\n    margin-right: 28px;\n    margin-bottom: 28px;\n  }\n  div:nth-child(3n + 0) {\n    margin-right: 0;\n  }\n  img {\n    object-fit: contain;\n    height: 100%;\n  }\n"]))),kr=Object(qe.a)(Tt.a)(Be||(Be=Object(Ze.a)(["\n  background: #ffffff;\n  border-radius: 12px;\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  width: 400px;\n  &:focus {\n    border: none;\n    outline: none;\n  }\n  h2 {\n    color: rgb(38, 38, 38);\n    font-size: 18px;\n    font-weight: 700;\n    margin: 0;\n    padding: 32px 0;\n  }\n  button {\n    border-top: 1px solid rgb(219, 219, 219);\n    font-size: 14px;\n    padding: 15px 0;\n    font-weight: 700;\n  }\n  .upload-photo {\n    color: rgb(0, 149, 246);\n  }\n  .remove-photo {\n    color: rgb(237, 73, 86);\n  }\n  .cancel {\n    font-weight: 400;\n  }\n"]))),Cr=[{label:"Email",name:"email",type:"email"},{label:"Full Name",name:"name"},{label:"Username",name:"username"},{label:"Password",name:"password",type:"password"}],Sr=function(e){var n=e.setUserDetails,t=Object(Ge.useRef)({name:"",username:"",email:"",password:""}),r=function(){var e=Object(Fe.a)(Re.a.mark((function e(r){var i,a,c;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),e.next=4,We.a.post("".concat(On,"/signup"),t.current);case 4:i=e.sent,console.log(i),n(i.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return Object(nn.jsxs)(Ir,{onSubmit:r,children:[Cr.map((function(e){return Object(nn.jsx)(ct,{label:e.label,name:e.name,type:e.type,values:t,required:!0},e.name)})),Object(nn.jsx)($e,{children:"Sign up"})]})},Ir=qe.a.form(_e||(_e=Object(Ze.a)(["\n  .input-box {\n    margin-bottom: 6px;\n  }\n  button {\n    margin: 14px 0;\n  }\n"]))),Mr=function(e){var n=e.setUserDetails;return Object(nn.jsx)(Br,{children:Object(nn.jsxs)(Dr,{children:[Object(nn.jsxs)(_r,{className:"right",children:[Object(nn.jsx)(hn,{}),Object(nn.jsx)(ut,{children:"Sign up to see photos and videos from your friends."}),Object(nn.jsx)(nt,{}),Object(nn.jsx)(Sr,{setUserDetails:n})]}),Object(nn.jsx)(_r,{className:"bottom",children:Object(nn.jsxs)(bt,{children:["Have an account? ",Object(nn.jsx)(dt,{to:"/accounts/login",children:"Log in"})]})})]})})},Dr=qe.a.div(Ne||(Ne=Object(Ze.a)(["\n  display: flex;\n  flex-flow: column;\n"]))),Br=(qe.a.div(ze||(ze=Object(Ze.a)([""]))),qe.a.div(Le||(Le=Object(Ze.a)(["\n  display: flex;\n  justify-content: center;\n  max-width: 1080px;\n  margin: 33px auto;\n"])))),_r=qe.a.div(Ee||(Ee=Object(Ze.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  padding: 25px 40px;\n  &.right {\n    box-sizing: border-box;\n    max-width: 350px;\n    margin-bottom: 10px;\n    .logo {\n      margin-top: 21px;\n      margin-bottom: 12px;\n    }\n  }\n"]))),Nr=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,144)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),i(e),a(e),c(e)}))};We.a.defaults.withCredentials=!0;var zr=function(){var e=Object(Ge.useState)("loading"),n=Object(Pe.a)(e,2),t=n[0],r=n[1],i=Object(Ge.useState)([]),a=Object(Pe.a)(i,2),c=a[0],o=a[1],s=Object(Ge.useState)({}),l=Object(Pe.a)(s,2),u=l[0],d=l[1];return Object(Ge.useEffect)((function(){Object(Fe.a)(Re.a.mark((function e(){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.a.get("".concat(On,"/"));case 3:(n=e.sent).data._id&&r(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),r(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),"loading"===t?Object(nn.jsx)("h1",{children:"Loading..."}):Object(nn.jsxs)(Je.e,{children:[!1===t&&Object(nn.jsx)(Je.c,{index:!0,element:Object(nn.jsx)(ht,{setUserDetails:function(e){return r(e)}})}),Object(nn.jsxs)(Je.c,{element:Object(nn.jsx)(Lr,{userDetails:t,children:Object(nn.jsx)(Je.b,{})}),children:[Object(nn.jsx)(Je.c,{path:"accounts/login",element:Object(nn.jsx)(ht,{setUserDetails:function(e){return r(e)}})}),Object(nn.jsx)(Je.c,{path:"accounts/signup",element:Object(nn.jsx)(Mr,{setUserDetails:r})})]}),Object(nn.jsxs)(Je.c,{element:Object(nn.jsx)(Kn,{userDetails:t,setUserDetails:r,emptyAllStates:function(){console.log("emptyAllStates"),o([]),d({}),r(!1)}}),children:[Object(nn.jsx)(Je.c,{path:":username",element:Object(nn.jsx)(Ar,{userDetails:t,setChats:d,inboxes:c,setInboxes:o})}),Object(nn.jsx)(Je.c,{path:"/somepost",element:Object(nn.jsx)(nn.Fragment,{children:"post some"})}),Object(nn.jsxs)(Je.c,{element:Object(nn.jsx)(Er,{userDetails:t,children:Object(nn.jsx)(Je.b,{})}),children:[Object(nn.jsx)(Je.c,{index:!0,element:Object(nn.jsx)("h1",{children:"News Feed"})}),Object(nn.jsx)(Je.c,{path:"/inbox",element:Object(nn.jsx)(or,{userDetails:t,chats:u,setChats:d,inboxes:c,setInboxes:o})}),Object(nn.jsx)(Je.c,{path:"/inbox/:inboxId",element:Object(nn.jsx)(or,{userDetails:t,chats:u,setChats:d,inboxes:c,setInboxes:o})}),Object(nn.jsx)(Je.c,{path:"*",element:Object(nn.jsx)("h1",{children:"Page does not exist"})})]})]})]})};He.a.render(Object(nn.jsx)(Ve.a.StrictMode,{children:Object(nn.jsx)(Ye.a,{children:Object(nn.jsx)(zr,{})})}),document.getElementById("root")),Nr();var Lr=function(e){var n=e.children,t=e.userDetails;console.log("noauth",t);var r=Object(Je.g)();return console.log("location.state",r.state),t&&!r.state?Object(nn.jsx)(Je.a,{to:"/inbox",replace:!0}):n};function Er(e){var n=e.children,t=e.userDetails,r=Object(Je.g)();return t?n:Object(nn.jsx)(Je.a,{to:"/accounts/login",state:{from:r},replace:!0})}}},[[118,1,2]]]);
//# sourceMappingURL=main.c9ede0e0.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,n,t){},118:function(e,n,t){"use strict";t.r(n);var r,i,a,o,c,s,l,u,d,b,j,x,p,f,h,g,O,A,m,v,w,y,k,C,S,I,M,D,B,_,N,z,L,E,U,R,F,P,T,W,G,V,Q,H,J,Y,Z,X,q,K,$,ee,ne,te,re,ie,ae,oe,ce,se,le,ue,de,be,je,xe,pe,fe,he,ge,Oe,Ae,me,ve,we,ye,ke,Ce,Se,Ie,Me,De,Be,_e,Ne,ze,Le=t(8),Ee=t.n(Le),Ue=t(11),Re=t(6),Fe=t(13),Pe=t.n(Fe),Te=t(1),We=t.n(Te),Ge=t(29),Ve=t.n(Ge),Qe=t(7),He=t(16),Je=t(2),Ye=t(3),Ze=(t(114),t(141)),Xe=Ye.a.div(r||(r=Object(Je.a)(["\n  max-width: 955px;\n  margin: 0 auto;\n"]))),qe=Ye.a.button(i||(i=Object(Je.a)(["\n  background-color: rgb(0, 149, 246);\n  border-radius: 4px;\n  color: #fff;\n  display: block;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 5px 9px;\n  line-height: 18px;\n  width: ",";\n"])),(function(e){return e.widthAuto?"auto":"100%"})),Ke=Ye.a.button(a||(a=Object(Je.a)(["\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 4px;\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  font-weight: 600;\n  padding: 5px 9px;\n"]))),$e=t(0),en=function(){return Object($e.jsx)("svg",{"aria-label":"Home",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object($e.jsx)("path",{d:"M9.005 16.545a2.997 2.997 0 012.997-2.997h0A2.997 2.997 0 0115 16.545V22h7V11.543L12 2 2 11.543V22h7.005z",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})})},nn=function(){return Object($e.jsx)("svg",{"aria-label":"Home",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object($e.jsx)("path",{d:"M22 23h-6.001a1 1 0 01-1-1v-5.455a2.997 2.997 0 10-5.993 0V22a1 1 0 01-1 1H2a1 1 0 01-1-1V11.543a1.002 1.002 0 01.31-.724l10-9.543a1.001 1.001 0 011.38 0l10 9.543a1.002 1.002 0 01.31.724V22a1 1 0 01-1 1z"})})},tn=function(){return Object($e.jsxs)("svg",{"aria-label":"Direct",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"}),Object($e.jsx)("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})},rn=function(){return Object($e.jsxs)("svg",{"aria-label":"Direct",color:"#262626",fill:"#262626",height:"96",role:"img",viewBox:"0 0 96 96",width:"96",children:[Object($e.jsx)("circle",{cx:"48",cy:"48",fill:"none",r:"47",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"69.286",x2:"41.447",y1:"33.21",y2:"48.804"}),Object($e.jsx)("polygon",{fill:"none",points:"47.254 73.123 71.376 31.998 24.546 32.002 41.448 48.805 47.254 73.123",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})},an=function(){return Object($e.jsx)("svg",{"aria-label":"Direct",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object($e.jsx)("path",{d:"M22.91 2.388a.69.69 0 00-.597-.347l-20.625.002a.687.687 0 00-.482 1.178L7.26 9.16a.686.686 0 00.778.128l7.612-3.657a.723.723 0 01.937.248.688.688 0 01-.225.932l-7.144 4.52a.69.69 0 00-.3.743l2.102 8.692a.687.687 0 00.566.518.655.655 0 00.103.008.686.686 0 00.59-.337L22.903 3.08a.688.688 0 00.007-.692",fillRule:"evenodd"})})},on=Ye.a.img(o||(o=Object(Je.a)(["\n  border-radius: 50%;\n"]))),cn=function(){return Object($e.jsxs)("svg",{"aria-label":"New Post",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object($e.jsx)("path",{d:"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"6.545",x2:"17.455",y1:"12.001",y2:"12.001"}),Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12.003",x2:"12.003",y1:"6.545",y2:"17.455"})]})},sn=function(e){var n=e.widthAndHeight,t=e.color;return Object($e.jsxs)("svg",{"aria-label":"Close",color:t,fill:t,role:"img",viewBox:"0 0 24 24",width:n,height:n,children:[Object($e.jsx)("polyline",{fill:"none",points:"20.643 3.357 12 12 3.353 20.647",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"}),Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",x1:"20.649",x2:"3.354",y1:"20.649",y2:"3.354"})]})},ln=function(){return Object($e.jsxs)("svg",{"aria-label":"Icon to represent media such as images or videos",className:"_8-yf5 ",color:"#262626",fill:"#262626",height:"77",role:"img",viewBox:"0 0 97.6 77.3",width:"96",children:[Object($e.jsx)("path",{d:"M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z",fill:"currentColor"}),Object($e.jsx)("path",{d:"M84.7 18.4L58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5l-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z",fill:"currentColor"}),Object($e.jsx)("path",{d:"M78.2 41.6L61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6l-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z",fill:"currentColor"})]})},un=function(){return Object($e.jsx)("svg",{"aria-label":"Select Crop",className:"_8-yf5 ",color:"#ffffff",fill:"#ffffff",height:"16",role:"img",viewBox:"0 0 24 24",width:"16",children:Object($e.jsx)("path",{d:"M10 20H4v-6a1 1 0 00-2 0v7a1 1 0 001 1h7a1 1 0 000-2zM20.999 2H14a1 1 0 000 2h5.999v6a1 1 0 002 0V3a1 1 0 00-1-1z"})})},dn=function(){return Object($e.jsxs)("svg",{"aria-label":"New message",className:"_ab6-",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object($e.jsx)("path",{d:"M12.202 3.203H5.25a3 3 0 00-3 3V18.75a3 3 0 003 3h12.547a3 3 0 003-3v-6.952",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object($e.jsx)("path",{d:"M10.002 17.226H6.774v-3.228L18.607 2.165a1.417 1.417 0 012.004 0l1.224 1.225a1.417 1.417 0 010 2.004z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),Object($e.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"16.848",x2:"20.076",y1:"3.924",y2:"7.153"})]})},bn=function(){return Object($e.jsx)("svg",{"aria-label":"Toggle selection",color:"#0095f6",fill:"#0095f6",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object($e.jsx)("path",{d:"M12.001.504a11.5 11.5 0 1011.5 11.5 11.513 11.513 0 00-11.5-11.5zm5.706 9.21l-6.5 6.495a1 1 0 01-1.414-.001l-3.5-3.503a1 1 0 111.414-1.414l2.794 2.796L16.293 8.3a1 1 0 011.414 1.415z"})})},jn=function(){return Object($e.jsx)("svg",{"aria-label":"Toggle selection",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:Object($e.jsx)("circle",{cx:"12.008",cy:"12",fill:"none",r:"11.25",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.5"})})},xn=t.p+"static/media/instagram_logo.b7c204eb.png",pn=function(){return Object($e.jsx)("img",{src:xn,className:"logo",alt:"instagram clone logo"})},fn=t(79),hn="http://ec2-13-233-240-100.ap-south-1.compute.amazonaws.com:8080/api",gn=Object(fn.a)("http://ec2-13-233-240-100.ap-south-1.compute.amazonaws.com:8081",{withCredentials:!0,autoConnect:!1}),On=t(10),An=function(e,n){return e.split("/image/upload/").join("/image/upload/".concat(n,"/"))},mn=function(e,n){return e.length?e.map((function(e){var t=e.participants.filter((function(e){return e._id!==n}));return e.participants=t,e})):[]},vn=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n,t,r,i,a,o,c){var s,l,u,d,b,j,x;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){var t=e.participants.map((function(e){return e._id}));if(console.log(t,n),t.length!==n.length)return!1;t.sort(),n.sort();for(var r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0},l=r.find((function(e){return s(e)})),u=null===l||void 0===l?void 0:l._id,!l){e.next=7;break}i((function(e){return Object(On.a)(e,(function(e){var n=e.findIndex((function(e){return e._id===u}));e.splice(n,1),e.unshift(l)}))})),e.next=15;break;case 7:return e.next=9,Pe.a.get("".concat(hn,"/inbox/inboxAndChatsByUserIds"),{params:{userIds:n}});case 9:d=e.sent,b=d.data,j=b.inbox,x=b.chats,j.group.isGroup||gn.emit("subscribe-online-status",{userId:n[0]},(function(){return!1})),u=j._id,i((function(e){return Object(On.a)(e,(function(e){var n=mn([j],t._id)[0];e.unshift(n)}))})),a((function(e){return Object(On.a)(e,(function(e){e.loading=!1,e[u]=x}))}));case 15:o("/inbox/".concat(u)),c&&c();case 17:case"end":return e.stop()}}),e)})));return function(n,t,r,i,a,o,c){return e.apply(this,arguments)}}(),wn=function(e){var n=e.image,t=e.username,r=e.className;return Object($e.jsxs)(Sn,{className:r,children:[Object($e.jsx)("img",{src:n,alt:t}),Object($e.jsx)(Mn,{children:t})]})},yn=function(e){e.image1,e.image2,e.imageWidth,e.imageGroupContainerWidth;var n=e.groupName,t=e.className;return Object($e.jsx)(Sn,{className:t,children:Object($e.jsx)(Mn,{children:n})})},kn=function(e){var n=e.image,t=e.username,r=e.name,i=e.className,a=e.onClick;return Object($e.jsxs)(Sn,{className:i,onClick:a,children:[Object($e.jsx)("img",{src:n,alt:t}),Object($e.jsxs)(In,{children:[Object($e.jsx)(Mn,{children:t}),Object($e.jsx)(Dn,{children:r})]})]})},Cn=function(e){var n=e.image1,t=e.image2,r=e.imageWidth,i=e.containerWidth;return Object($e.jsxs)(Nn,{imageWidth:r,containerWidth:i,children:[Object($e.jsx)(Bn,{src:n,alt:""}),Object($e.jsx)(_n,{src:t,alt:""})]})},Sn=Ye.a.div(c||(c=Object(Je.a)(["\n  display: flex;\n  align-items: center;\n  > * {\n    margin-right: 12px;\n  }\n  img {\n    border-radius: 50%;\n  }\n"]))),In=Ye.a.div(s||(s=Object(Je.a)(["\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n"]))),Mn=Ye.a.div(l||(l=Object(Je.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 16px;\n  font-weight: 600;\n  text-decoration: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Dn=Ye.a.div(u||(u=Object(Je.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Bn=Ye.a.img(d||(d=Object(Je.a)([""]))),_n=Ye.a.img(b||(b=Object(Je.a)([""]))),Nn=Ye.a.div(j||(j=Object(Je.a)(["\n  position: relative;\n  img {\n    border-radius: 50%;\n    width: ",";\n    height: ",";\n  }\n  width: ",";\n  height: ",";\n  "," {\n    border: 2px solid #fff;\n    border-radius: 50%;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n"])),(function(e){return e.imageWidth}),(function(e){return e.imageWidth}),(function(e){return e.containerWidth}),(function(e){return e.containerWidth}),_n),zn=Object(Te.forwardRef)((function(e){var n=e.userDetails,t=Object(Te.useRef)(null),r=Object(Te.useRef)(null),i=Object(Te.useState)([]),a=Object(Re.a)(i,2),o=a[0],c=a[1],s=Object(Te.useState)("Create new post"),l=Object(Re.a)(s,2),u=l[0],d=l[1];Object(Te.useEffect)((function(){alert("PLEASE NOTE: this feature is incomplete")}),[]);var b=function(){var e=Object(Ue.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("Sharing"),e.prev=1,e.next=4,Pe.a.post("".concat(hn,"/createPost"),{caption:null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.value,images:o});case 4:e.sent,d("Post shared"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),alert("Failed to share post"),d("Create new post");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object($e.jsxs)(Pn,{children:[o.length?Object($e.jsxs)(Fn,{children:[Object($e.jsx)(Tn,{children:u}),Object($e.jsx)("button",{onClick:b,children:"Share"})]}):Object($e.jsx)(Tn,{children:u}),Object($e.jsxs)(Wn,{haveFiles:o.length,children:[Object($e.jsx)(Rn,{type:"file",ref:t,onChange:function(){return function(){var e=t.current.files,n=new Array(e.length).fill(""),r=function(e,t){var r=new FileReader;r.addEventListener("load",(function(){n[t]=r.result,n.includes("")||c(n)})),r.readAsDataURL(e)};if(e)for(var i=0;i<t.current.files.length;i++)r(e[i],i)}()}}),o.length?Object($e.jsxs)($e.Fragment,{children:[o.map((function(e,n){return Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(Ln,{src:e,alt:""},n),Object($e.jsx)(Un,{children:Object($e.jsx)(un,{})})]})})),Object($e.jsxs)(En,{children:[Object($e.jsx)(wn,{image:An(n.profilePicture.withVersion,"w_28"),username:n.username}),Object($e.jsx)("textarea",{ref:r,placeholder:"Write a caption..."})]})]}):Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(ln,{}),Object($e.jsx)("p",{children:"Drag photos and videos here"}),Object($e.jsx)(qe,{widthAuto:!0,onClick:function(){var e;return null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.click()},children:"Select from computer"})]})]})]})})),Ln=Ye.a.img(x||(x=Object(Je.a)(["\n  width: 523px;\n  height: 523px;\n  object-fit: cover;\n"]))),En=(Ye.a.div(p||(p=Object(Je.a)(["\n  display: flex;\n"]))),Ye.a.div(f||(f=Object(Je.a)(["\n  margin: 18px 0 14px 0;\n  padding: 0 16px;\n  width: 307px;\n  textarea {\n    border: none;\n    font-size: 16px;\n    margin-top: 14px;\n    resize: none;\n    width: 100%;\n    &:focus {\n      outline: none;\n    }\n  }\n"])))),Un=Ye.a.button(h||(h=Object(Je.a)(["\n  background: rgba(26, 26, 26, 0.8);\n  border-radius: 50%;\n  padding: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 16px;\n  left: 16px;\n"]))),Rn=Ye.a.input(g||(g=Object(Je.a)(["\n  display: hidden;\n  position: absolute;\n  left: -10000px;\n"]))),Fn=Ye.a.div(O||(O=Object(Je.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  button {\n    position: absolute;\n    right: 16px;\n    color: rgba(0, 149, 246, 1);\n    font-size: 14px;\n    font-weight: 600;\n  }\n"]))),Pn=Ye.a.div(A||(A=Object(Je.a)(["\n  background-color: #fff;\n  border-radius: 12px;\n  text-align: center;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  overflow: hidden;\n"]))),Tn=Ye.a.div(m||(m=Object(Je.a)(["\n  border-bottom: 1px solid rgba(219, 219, 219, 1);\n  color: rgb(38, 38, 38);\n  font-size: 16px;\n  font-weight: 600;\n  padding: 10px 0;\n"]))),Wn=Ye.a.div(v||(v=Object(Je.a)(["\n  box-sizing: border-box;\n  font-size: 22px;\n  display: flex;\n  justify-content: center;\n  align-items: ",";\n  flex-direction: ",";\n  width: ",";\n  height: ",";\n  /* height: 71vh; */\n  font-weight: 300;\n  padding: ",";\n  p {\n    margin-top: 9px;\n    margin-bottom: 24px;\n  }\n"])),(function(e){return e.haveFiles?"flex-start":"center"}),(function(e){return e.haveFiles?"row":"column"}),(function(e){return e.haveFiles?"auto":"523px"}),(function(e){return e.haveFiles?"auto":"523px"}),(function(e){return e.haveFiles?"0":"0 24px"})),Gn=function(e){var n=e.userDetails,t=e.emptyAllStates,r=Object(Te.useState)(!0),i=Object(Re.a)(r,2),a=i[0],o=i[1],c=Object(Te.useState)(!1),s=Object(Re.a)(c,2),l=s[0],u=s[1];return Object($e.jsxs)(Qn,{children:[Object($e.jsxs)(Hn,{children:[Object($e.jsx)(pn,{}),Object($e.jsx)(Jn,{children:Object($e.jsx)("ul",{children:n?Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)("li",{children:Object($e.jsx)(He.c,{to:"/",children:function(e){return e.isActive?Object($e.jsx)(nn,{}):Object($e.jsx)(en,{})}})}),Object($e.jsx)("li",{children:Object($e.jsx)(He.c,{to:"/inbox",children:function(e){return e.isActive?Object($e.jsx)(an,{}):Object($e.jsx)(tn,{})}})}),Object($e.jsx)("li",{children:Object($e.jsx)("button",{onClick:function(){return u((function(e){return!e}))},children:Object($e.jsx)(cn,{})})}),Object($e.jsxs)(Vn,{as:"li",className:"modal-button",active:a,children:[Object($e.jsx)("button",{type:"button",onClick:function(){return o((function(e){return!e}))},children:Object($e.jsx)(on,{src:An(n.profilePicture.withVersion,"w_24")})}),Object($e.jsx)(Yn,{hidden:a,userDetails:n,emptyAllStates:t})]})]}):Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)("li",{children:Object($e.jsx)(He.b,{to:"/accounts/login",children:Object($e.jsx)(qe,{widthAuto:!0,children:"Log In"})})}),Object($e.jsx)("li",{children:Object($e.jsx)(He.b,{to:"/accounts/signup",children:Object($e.jsx)(Ke,{children:"Sign Up"})})})]})})})]}),Object($e.jsx)(Ze.a,{open:l,onClose:function(){return u(!1)},children:Object($e.jsx)(zn,{userDetails:n})})]})},Vn=Ye.a.li(w||(w=Object(Je.a)(["\n  > button {\n    border: ",";\n  }\n"])),(function(e){return e.active?"1px solid #fff":"1px solid #000"})),Qn=Ye.a.nav(y||(y=Object(Je.a)(["\n  background: #fff;\n  border-bottom: 1px solid rgb(219, 219, 219);\n  /* grid-area: navbar; */\n"]))),Hn=Object(Ye.a)(Xe)(k||(k=Object(Je.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 20px;\n  .logo {\n    height: 29px;\n  }\n"]))),Jn=Ye.a.div(C||(C=Object(Je.a)(["\n  ul {\n    display: flex;\n    align-items: center;\n    li {\n      margin-left: 22px;\n    }\n  }\n  .modal-button {\n    position: relative;\n    > button {\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n    }\n  }\n"]))),Yn=function(e){var n=e.hidden,t=e.userDetails,r=e.emptyAllStates,i=Object(Qe.h)(),a=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,Pe.a.get("".concat(hn,"/logout"));case 4:r(),gn.disconnect(),i("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert("failed to logout");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return Object($e.jsxs)(Zn,{hidden:n,children:[Object($e.jsx)("div",{className:"arrow"}),Object($e.jsxs)("ul",{children:[Object($e.jsx)("li",{children:Object($e.jsx)(He.b,{to:"/".concat(t.username),children:"Profile"})}),Object($e.jsx)("li",{className:"logout",children:Object($e.jsx)("button",{onClick:a,children:"Log Out"})})]})]})},Zn=Ye.a.div(S||(S=Object(Je.a)(["\n  display: ",";\n  width: 230px;\n  box-sizing: border-box;\n  position: absolute;\n  top: 34px;\n  right: -30px;\n  box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975);\n  border-radius: 6px;\n  background: #ffffff;\n  z-index: 3;\n  .arrow {\n    /* box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975); */\n    width: 14px;\n    height: 14px;\n    position: absolute;\n    background: #fff;\n    top: -6px;\n    right: 34px;\n    transform: rotate(45deg);\n    z-index: 1;\n  }\n  ul {\n    display: flex;\n    flex-flow: column;\n    li {\n      box-sizing: border-box;\n      margin-left: 0;\n      padding: 8px 16px;\n      width: 100%;\n    }\n  }\n\n  .logout {\n    border-top: 1px solid rgb(219, 219, 219);\n  }\n"])),(function(e){return e.hidden?"none":"block"})),Xn=function(e){var n=e.userDetails,t=e.setUserDetails,r=e.emptyAllStates;return Object($e.jsxs)(qn,{children:[Object($e.jsx)(Gn,{userDetails:n,setUserDetails:t,emptyAllStates:r}),Object($e.jsxs)(Kn,{children:[Object($e.jsx)("h1",{children:n.username}),Object($e.jsx)("p",{children:n._id})]}),Object($e.jsx)(Qe.b,{})]})},qn=Ye.a.div(I||(I=Object(Je.a)(["\n  height: 100vh;\n  overflow-y: scroll;\n  display: grid;\n  grid-template-rows: auto 1fr;\n  .main {\n    background: tomato;\n  }\n"]))),Kn=Ye.a.div(M||(M=Object(Je.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n"]))),$n=function(){return Object($e.jsxs)(nt,{children:[Object($e.jsx)(et,{}),Object($e.jsx)(tt,{children:"OR"}),Object($e.jsx)(et,{})]})},et=Ye.a.div(D||(D=Object(Je.a)(["\n  border-top: 1px solid rgb(219, 219, 219);\n  width: 100%;\n"]))),nt=Ye.a.div(B||(B=Object(Je.a)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 18px;\n"]))),tt=Ye.a.div(_||(_=Object(Je.a)(["\n  font-size: 13px;\n  font-weight: 600;\n  margin: 0 18px;\n  color: rgb(142, 142, 142);\n"]))),rt=Ye.a.div(N||(N=Object(Je.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  box-sizing: border-box;\n  padding: 25px 40px;\n"]))),it=function(e){var n=e.label,t=e.name,r=e.type,i=e.values,a=e.required,o=Object(Te.useState)(""),c=Object(Re.a)(o,2),s=c[0],l=c[1];return Object($e.jsxs)(at,{className:"input-box",children:[Object($e.jsx)(ot,{inputValue:s,children:n}),Object($e.jsx)(ct,{value:s,type:r||"text",required:a,onChange:function(e){l(e.target.value),i.current[t]=e.target.value}})]})},at=Ye.a.div(z||(z=Object(Je.a)(["\n  position: relative;\n"]))),ot=Ye.a.label(L||(L=Object(Je.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 12px;\n  left: 9px;\n  pointer-events: none;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  transition: 0.1s ease-out;\n  ","\n"])),(function(e){return e.inputValue&&"\n    color: rgb(142, 142, 142);\n    top: 27%;\n    font-size: 10px;\n  "})),ct=Ye.a.input(E||(E=Object(Je.a)(["\n  background-color: #fafafa;\n  border: 1px solid rgb(219, 219, 219);\n  &:focus {\n    border: 1px solid rgb(0, 0, 0);\n  }\n  border-radius: 3px;\n  box-sizing: border-box;\n  font-size: 12px;\n  line-height: 18px;\n  outline: none;\n  padding: ",";\n  width: 100%;\n"])),(function(e){return e.value?"15px 0 3px 8px":"10px 0 8px 8px"})),st=Ye.a.div(U||(U=Object(Je.a)(["\n  color: rgb(142, 142, 142);\n  font-size: 17px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  text-align: center;\n"]))),lt=Object(Ye.a)(He.b)(R||(R=Object(Je.a)(["\n  color: #0095f6;\n  font-size: inherit;\n  font-weight: ",";\n"])),(function(e){return e.$bold?"bold":"normal"})),ut=Ye.a.p(F||(F=Object(Je.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  margin: 0;\n  text-align: center;\n"]))),dt=function(e){var n,t,r=e.setUserDetails,i=Object(Te.useRef)({usernameOrEmail:"",password:"",email:"",username:""}),a=Object(Qe.h)(),o=(null===(n=Object(Qe.g)().state)||void 0===n||null===(t=n.from)||void 0===t||t.pathname,function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){var t;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,-1!==i.current.usernameOrEmail.indexOf("@")?i.current.email=i.current.usernameOrEmail:i.current.username=i.current.usernameOrEmail,e.next=5,Pe.a.post("".concat(hn,"/login"),i.current);case 5:(t=e.sent).data._id&&(r(t.data),a("/inbox",{replace:!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),alert("invalid credentials");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}());return Object($e.jsxs)(bt,{children:[Object($e.jsxs)(jt,{children:[Object($e.jsx)(pn,{}),Object($e.jsxs)(xt,{children:[Object($e.jsx)(it,{label:"Username or email",name:"usernameOrEmail",values:i}),Object($e.jsx)(it,{label:"Password",name:"password",values:i}),Object($e.jsx)(qe,{onClick:o,children:"Log in"})]}),Object($e.jsx)($n,{})]}),Object($e.jsx)(jt,{children:Object($e.jsxs)(ut,{children:["Don't have an account?"," ",Object($e.jsx)(lt,{to:"/accounts/signup",$bold:!0,children:"Sign up"})]})})]})},bt=Ye.a.div(P||(P=Object(Je.a)(["\n  margin-top: 33px;\n"]))),jt=Object(Ye.a)(rt)(T||(T=Object(Je.a)(["\n  max-width: 350px;\n  margin: 0 auto 10px;\n  .logo {\n    margin-top: 21px;\n    margin-bottom: 12px;\n  }\n"]))),xt=Ye.a.form(W||(W=Object(Je.a)(["\n  .input-box {\n    margin-bottom: 6px;\n  }\n  button {\n    margin: 14px 0;\n  }\n"]))),pt=t(22),ft=function(){return Object($e.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAHYAAAB2AU57JggAAAAHdElNRQfmBxsLCxW7jYxwAAAAuklEQVQY0zXNsUrDUACF4S+JKDjHzaHeCiIEqs5uQpZgXaXgM/Uh4hMo3fIATqJQEAdNcVFpRAq61g69nun85x9OAvoqhRydqYkXEpy4MtNoEZzpqd3TN3YOSiUYGgsbKjO3YNc6N4IqVWjisLSMrVGkcm3EP9sS0MpTIvBo4PSfUp29KB7ULh0j6DI9++6ievOhszDymflS2vIc1buFoSPXmW9zFw79+LXpwMhA7Wl9FVQKO5ibmnhlBdj1MDv8krZgAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDExOjExOjE3KzAwOjAwJu/+lgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QxMToxMToxNyswMDowMFeyRioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",alt:"pending"})},ht=function(){return Object($e.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAG8AAABvAfGi3EMAAAAHdElNRQfmBxsLByhPUI9tAAAAgklEQVQY023PPw7BcAAF4E/bSAykIf5UJ4lbWNicoWp0LCS9hAM4QjeD0RkMIoZGBL83fi95ySOcqBXkiVmoyBU6UYC3hk7JD0+VBip1pOtTZjbGKjWxnbabJzKl3EENiUghdjZSyu0bJnbRt9SzMnJ8M7G7q9Tao9n+TmphLnj2D19sRxWmuewhVAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wNy0yN1QxMTowNzozNSswMDowMD/FR0UAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDctMjdUMTE6MDc6MzUrMDA6MDBOmP/5AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",alt:"sent"})},gt=function(){return Object($e.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAB2AAAAdgFOeyYIAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAHxJREFUOI1jYBgFpAB7BgaGyVC2EAMDwwYGBgYBYjXbMDAwvGRgYHCCajrFwMDQQzXNHAwMDNFI/CCoExkYGBgcoJodoGJnGRgYutBt4ECTqGZgYMghVjMMwJzWi8fZvdi1IgDMluVINucSshmbIRsYIFEG804jsZpHKgAAsxUalSAPDrEAAAAASUVORK5CYII=",alt:"delivered"})},Ot=function(){return Object($e.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABCFBMVEUAAAAAfM0AeskAe8sAh98AhNoAm/8ASnwAht4AlvcAq/8AkO0Af9MArf8Al/kAjekAjusAc74AlPQAYJ4AlfcAfMwAXpwAnP8AjOcAesoAfM4Afc8Aaq8Afc8AftAAe8wAftAAbbQAkO0Aj+wAdsMAjeoAkO4AieIAaq8AkO4Ak/MAkO0Ai+YAk/IAkvEAh98Ak/MAk/IAkvEAieMAh+AAjekAiuQAd8YAjOcAjOcAITYAieIAkvEAhdwAkO0AjekAj+wAjekAht0AjuoAj+wAjegAk/IAk/IAk/MAjuoAjuoAk/IAjekAkfAAkO0AftAAkO4Ake8AiuMAe8sAa7EAe8sAecj///+3ca+WAAAAV3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw4BDQYCcakLNblFAnHqbjjUsRrp07IZLXkaCXI1AS/SI6KNcTUthHA10tXkhZTbNsBvEaSpGQ0DCgrAeFs8AAAAAWJLR0RXfQrZHwAAAAd0SU1FB+YHGwk7A5Ob27wAAACXSURBVBjTY2AgHjAyMjIxMzLC+SysMrJybPIKcD6LopKyiqqaOgM7GHCwaGhqaevo6ukzcHJx8/DysWpoGmjrGBoZ8zOYmJqZW1haQfkCnAzWNnq2dvYOML4gg5Cjrp6Ts4ELjM8gLOLq5u7h6eUN5TOICov4+Pr5BwQGQfhAETHx4BDW0DAJKJ+BQRLoYClGRmlBIv0IAP46FNQ6Zj0/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDA5OjU4OjQ5KzAwOjAwtfDh/AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QwOTo1ODo0OSswMDowMMStWUAAAAAASUVORK5CYII=",alt:"seen"})},At=function(e){var n=e.messageStatus,t=e.className;return Object($e.jsx)(mt,{className:t,children:"pending"===n?Object($e.jsx)(ft,{}):"sent"===n?Object($e.jsx)(ht,{}):"delivered"===n?Object($e.jsx)(gt,{}):"seen"===n?Object($e.jsx)(Ot,{}):"unknown"})},mt=Ye.a.div(G||(G=Object(Je.a)(["\n  width: 16px;\n"]))),vt=function(e){var n=e.sendMessage,t=e.messageInputRef,r=Object(Qe.i)(),i=Object(Te.useState)(""),a=Object(Re.a)(i,2),o=a[0],c=a[1],s=Object(Te.useRef)();return Object(Te.useEffect)((function(){t.current.style.height="20px",t.current.style.height=t.current.scrollHeight+"px"}),[o,t]),Object($e.jsx)(wt,{children:Object($e.jsxs)(yt,{onSubmit:function(e){n(e,r.inboxId),c("")},children:[Object($e.jsx)(Ct,{placeholder:"Message...",value:o,onChange:function(e){return c(e.target.value)},ref:t,onKeyDown:function(e){13===e.which&&(e.preventDefault(),s.current.click())}}),Object($e.jsx)(kt,{ref:s,disabled:!o,children:"Send"})]})})},wt=Ye.a.div(V||(V=Object(Je.a)(["\n  grid-area: sendMessageBox;\n  padding: 20px;\n"]))),yt=Ye.a.form(Q||(Q=Object(Je.a)(["\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 22px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 14px;\n  width: 100%;\n"]))),kt=Ye.a.button(H||(H=Object(Je.a)(["\n  color: rgb(0, 149, 246);\n  font-size: 14px;\n  font-weight: 600;\n"]))),Ct=Ye.a.textarea(J||(J=Object(Je.a)(["\n  border: none;\n  outline: none;\n  resize: none;\n  height: 20px;\n  max-height: 100px !important;\n  overflow-y: auto;\n  font-size: 14px;\n  width: 100%;\n  padding: 0 12px 0 0;\n"]))),St=function(e){var n,t,r,i=e.chats,a=e.inboxAndParticipantData,o=e.setChats,c=e.userDetails,s=e.inboxes,l=e.setInboxes,u=e.setModalOpen,d=Object(Te.useRef)(),b=Object(Te.useRef)(),j=Object(Qe.i)(),x=Object(Qe.h)(),p=Object(Te.useCallback)((function(e){1===e.participants.length&&(s.find((function(n){return n._id===e._id}))||gn.emit("subscribe-online-status",{userId:e.participants[0]._id},(function(n){var t=n.online;l((function(n){return Object(On.a)(n,(function(r){var i=n.findIndex((function(n){return n._id===e._id}));-1!==i?r[i].participants[0].online=t:console.error("BUG:","no index found")}))}))})))}),[s,l]);Object(Te.useEffect)((function(){j.inboxId&&gn.emit("message-seen-all",{inboxId:j.inboxId})}),[j.inboxId]),Object(Te.useEffect)((function(){gn.off("notLoggedIn"),gn.on("notLoggedIn",(function(){alert("not logged In")})),gn.off("message"),gn.on("message",(function(e){var n=e.chat,t=e.inbox;2===t.participants.length&&n.sentBy!==c._id&&(j.inboxId===t._id?gn.emit("message-seen",{chat:n,inbox:t}):gn.emit("message-delivered",{chat:n,inbox:t})),o((function(e){return Object(On.a)(e,(function(e){var t;null===(t=e[n.sentTo])||void 0===t||t.push(n)}))})),b.current&&j.inboxId===t._id&&b.current.scrollTo(0,b.current.scrollHeight);var r=mn([t],c._id)[0];p(r),l((function(e){return Object(On.a)(e,(function(e){var i=e.findIndex((function(e){return e._id===n.sentTo}));if(-1!==i){e[i].lastActivity=t.lastActivity;var a=e.splice(i,1);e.unshift(a[0])}else e.unshift(r)}))}))})),gn.off("message-delivered"),gn.on("message-delivered",(function(e){o((function(n){return Object(On.a)(n,(function(n){var t;null===(t=n[e.chat.sentTo])||void 0===t||t.every((function(n){return e.chat._id!==n._id||(n.messageStatus="delivered",!1)}))}))})),l((function(n){return Object(On.a)(n,(function(n){n.every((function(n){return n._id!==e.chat.sentTo||(n.lastActivity.chat_id===e.chat._id&&"sent"===n.lastActivity.messageStatus&&(n.lastActivity.messageStatus="delivered"),!1)}))}))}))})),gn.off("message-seen"),gn.on("message-seen",(function(e){o((function(n){return Object(On.a)(n,(function(n){var t;null===(t=n[e.chat.sentTo])||void 0===t||t.every((function(n){return e.chat._id!==n._id||(n.messageStatus="seen",!1)}))}))})),l((function(n){return Object(On.a)(n,(function(n){n.every((function(n){return n._id!==e.chat.sentTo||(n.lastActivity.chat_id===e.chat._id&&"seen"!==n.lastActivity.messageStatus&&(n.lastActivity.messageStatus="seen"),!1)}))}))}))})),gn.off("message-seen-all"),gn.on("message-seen-all",(function(e){var n=e.inboxId;o((function(e){return Object(On.a)(e,(function(e){var t;null===(t=e[n])||void 0===t||t.forEach((function(e){"delivered"===e.messageStatus&&(e.messageStatus="seen")}))}))})),l((function(e){return Object(On.a)(e,(function(e){e.every((function(e){return e._id!==n||("delivered"===e.lastActivity.messageStatus&&(e.lastActivity.messageStatus="seen"),!1)}))}))}))})),gn.off("error"),gn.on("error",(function(e){console.error(e)}))}),[c._id,j.inboxId,o,l,p]),Object(Te.useEffect)((function(){Object(Ue.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.inboxId){e.next=2;break}return e.abrupt("return");case 2:if(!i[j.inboxId]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Pe.a.get("".concat(hn,"/chat/").concat(j.inboxId));case 7:if(0!==(n=e.sent).data.length){e.next=11;break}return x("/inbox"),e.abrupt("return");case 11:o((function(e){return Object(On.a)(e,(function(e){e[n.data[0].sentTo]=n.data}))})),b.current&&n.data[0].sentTo===j.inboxId&&b.current.scrollTo(0,b.current.scrollHeight),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0),x("/inbox");case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()}),[j.inboxId,i,o,x]),Object(Te.useEffect)((function(){b.current&&b.current.scrollTo(0,b.current.scrollHeight)}),[j.inboxId]);var f=null===(n=a.participantData)||void 0===n?void 0:n[Object.keys(a.participantData)[0]],h=(null===(t=a.participantData)||void 0===t||t[Object.keys(a.participantData)[1]],null===(r=a.inboxData)||void 0===r?void 0:r.group.isGroup);return Object($e.jsx)($e.Fragment,{children:void 0===j.inboxId?Object($e.jsxs)(It,{children:[Object($e.jsx)(rn,{}),Object($e.jsx)("h1",{children:"Your Messages"}),Object($e.jsx)("p",{children:"Send private messages to a friend or group."}),Object($e.jsx)(qe,{widthAuto:!0,onClick:function(){return u(!0)},children:"Send Message"})]}):void 0===i[j.inboxId]?Object($e.jsx)("h3",{children:"Loading..."}):Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(Mt,{children:f?Object($e.jsx)($e.Fragment,{children:h?Object($e.jsx)("button",{onClick:function(){var e=[];Object.keys(a.participantData).forEach((function(n){e.push(a.participantData[n].username)})),alert(e.join("\n"))},children:Object($e.jsx)(yn,{groupName:a.inboxData.group.groupName})}):Object($e.jsx)(He.b,{to:"/"+(null===f||void 0===f?void 0:f.username),children:Object($e.jsx)(wn,{image:An(f.profilePicture,"w_24"),username:f.name})})}):Object($e.jsx)("div",{children:"Loading..."})}),Object($e.jsx)(Dt,{ref:b,children:Object($e.jsx)(Bt,{children:i[j.inboxId].map((function(e,n){var t,r,o,s,l,u,d,b,x=e.sentBy===c._id,p=i[j.inboxId||0];return Object($e.jsxs)(Nt,{chatSentByUser:x,children:[!x&&Object($e.jsx)($e.Fragment,{children:(null===(t=p[n+1])||void 0===t?void 0:t.sentBy)!==e.sentBy?Object($e.jsx)(He.b,{to:"/"+(null===(r=a.participantData[e.sentBy])||void 0===r?void 0:r.username),children:Object($e.jsx)("img",{className:"profile-pic",src:(null===(o=a.participantData)||void 0===o||null===(s=o[e.sentBy])||void 0===s?void 0:s.profilePicture)?An(null===(l=a.participantData)||void 0===l||null===(u=l[e.sentBy])||void 0===u?void 0:u.profilePicture,"w_24"):"",alt:null===(d=a.participantData)||void 0===d||null===(b=d[e.sentBy])||void 0===b?void 0:b.name})}):Object($e.jsx)(_t,{width:"24px"})}),Object($e.jsxs)("div",{className:"chat-wrapper",children:[Object($e.jsx)("p",{children:e.message}),x&&Object($e.jsx)(At,{messageStatus:e.messageStatus})]})]},e._id)}))})}),Object($e.jsx)(vt,{sendMessage:function(e,n){e.preventDefault();var t=d.current.value;if(""!==t.trim()){var r="temp-"+Math.floor(8999999*Math.random()+1e6);Object(Ge.flushSync)((function(){o((function(e){return Object(On.a)(e,(function(e){var i={_id:r,sentBy:c._id,sentTo:n,message:t,messageStatus:"pending"};e[n].push(i)}))}))})),b.current&&b.current.scrollTo(0,b.current.scrollHeight),l((function(e){return Object(On.a)(e,(function(e){var i={chat_id:r,message:t,messageStatus:"pending",sentBy:c._id},a=e.findIndex((function(e){return e._id===n}));e[a].lastActivity=i;var o=e.splice(a,1);e.unshift(o[0])}))})),gn.emit("message",{message:t,inboxId:n,tempChatId:r},(function(e){if("ok"===e.status){var n=e.chat,t=e.inbox;o((function(t){return Object(On.a)(t,(function(t){t[n.sentTo].every((function(n){return n._id!==e.chat.tempChatId||(n._id=e.chat._id,n.messageStatus="sent",!1)}))}))})),l((function(e){return Object(On.a)(e,(function(e){var r=e.findIndex((function(e){return e._id===n.sentTo}));e[r].lastActivity.chat_id===n.tempChatId&&(e[r].lastActivity=t.lastActivity)}))}))}"error"===e.status&&console.error("failed to send message")})),d.current.value=""}},messageInputRef:d})]})})},It=Ye.a.div(Y||(Y=Object(Je.a)(["\n  grid-area: noActiveInbox;\n  align-self: center;\n  justify-self: center;\n  text-align: center;\n  h1 {\n    font-size: 22px;\n    font-weight: 300;\n    margin-top: 7px;\n  }\n  p {\n    color: rgb(142, 142, 142);\n    font-size: 14px;\n    margin-top: 6px;\n    margin-bottom: 25px;\n  }\n  "," {\n    margin: auto;\n  }\n"])),qe),Mt=Ye.a.div(Z||(Z=Object(Je.a)(["\n  border-bottom: 1px solid rgb(219, 219, 219);\n  grid-area: chatBoxHeading;\n  padding: 20px 20px 20px 40px;\n"]))),Dt=Ye.a.div(X||(X=Object(Je.a)(["\n  display: flex;\n  grid-area: chats;\n  overflow-y: auto;\n"]))),Bt=Ye.a.div(q||(q=Object(Je.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  margin-top: auto;\n  padding: 20px 20px 0px 20px;\n  width: 100%;\n"]))),_t=Ye.a.div(K||(K=Object(Je.a)(["\n  width: ",";\n"])),(function(e){return e.width})),Nt=Ye.a.div($||($=Object(Je.a)(["\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 8px;\n  align-self: ",";\n  .profile-pic,\n  "," {\n    margin-right: 8px;\n  }\n  .profile-pic {\n    border-radius: 50%;\n  }\n  .chat-wrapper {\n    background: ",";\n    border: 1px solid rgb(239, 239, 239);\n    border-radius: 22px;\n    box-sizing: border-box;\n    display: flex;\n    align-items: flex-end;\n    font-size: 14px;\n    padding: 16px;\n    max-width: 234px;\n    p {\n      box-sizing: border-box;\n      max-width: ",";\n      padding-right: ",";\n      word-wrap: break-word;\n    }\n  }\n"])),(function(e){return e.chatSentByUser?"flex-end":"flex-start"}),_t,(function(e){return e.chatSentByUser?"rgb(239, 239, 239)":"transparent"}),(function(e){return e.chatSentByUser?"calc(100% - 16px)":"100%"}),(function(e){return e.chatSentByUser?"7px":"0px"})),zt=t(58),Lt=t(143),Et=function(e){var n=e.text,t=e.onClose;return Object($e.jsxs)(Ut,{children:[Object($e.jsx)(Rt,{children:n}),Object($e.jsx)(Ft,{onClick:function(){return t(n)},children:Object($e.jsx)(sn,{widthAndHeight:12,color:"#0095f6"})})]})},Ut=Ye.a.div(ee||(ee=Object(Je.a)(["\n  background: rgb(224, 241, 255);\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  height: 35px;\n  margin: 4px;\n  padding: 0 12px;\n"]))),Rt=Ye.a.div(ne||(ne=Object(Je.a)(["\n  color: rgb(0, 149, 246);\n"]))),Ft=Ye.a.button(te||(te=Object(Je.a)(["\n  margin-left: 8px;\n"]))),Pt=function(e){var n=e.suggestedUsers,t=e.open,r=e.setOpen,i=e.handleNextClick,a=Object(Te.useState)([]),o=Object(Re.a)(a,2),c=o[0],s=o[1],l=Object(Te.useState)([]),u=Object(Re.a)(l,2),d=u[0],b=u[1],j=Object(Te.useState)(!1),x=Object(Re.a)(j,2),p=x[0],f=x[1],h=Object(Te.useRef)();Object(Te.useEffect)((function(){f(!1)}),[t]);var g=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){var t,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=n.target.value).trim()){e.next=3;break}return e.abrupt("return",s([]));case 3:return s("loading"),e.next=6,Pe.a.get("".concat(hn,"/searchUser/").concat(t));case 6:if(0!==(r=e.sent).data.length){e.next=9;break}return e.abrupt("return",s("no results"));case 9:i=r.data.map((function(e){return Object(zt.a)(Object(zt.a)({},e),{},{profilePicture:e.profilePicture.withVersion})})),s(i);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){b((function(n){var t=Object(pt.a)(n);return t=t.filter((function(n){return n.username!==e.username}))}))},A=Object(Te.useMemo)((function(){return 0===c.length?{listType:"suggestedUsers",data:n}:{listType:"searchResults",data:c}}),[c,n]);return Object($e.jsx)(Ze.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object($e.jsxs)(Tt,{children:[Object($e.jsxs)(Qt,{children:[Object($e.jsx)(Gt,{onClick:function(){return r(!1)},children:Object($e.jsx)(sn,{color:"#000",widthAndHeight:"18px"})}),Object($e.jsx)(Wt,{children:"New Message"}),Object($e.jsx)(Vt,{disabled:!d.length||p,onClick:function(){f(!0),i(d)},children:"Next"})]}),Object($e.jsxs)(Ht,{children:[Object($e.jsx)(Jt,{children:"To:"}),Object($e.jsxs)(Yt,{children:[Object($e.jsx)(Zt,{children:d.map((function(e){return Object($e.jsx)(Et,{text:e.username,onClose:function(){return O(e)}},e.username)}))}),Object($e.jsx)(Xt,{type:"text",placeholder:"Search...",onChange:g,ref:h})]})]}),"loading"===c?Object($e.jsx)("h1",{children:"Loading..."}):"no results"===c?Object($e.jsx)("h1",{children:"No account found"}):Object($e.jsxs)(Kt,{children:["suggestedUsers"===A.listType&&Object($e.jsx)(qt,{children:"Suggested"}),A.data.map((function(e){return Object($e.jsx)($t,{info:e,selected:d,setSelected:b,onClick:function(){return n=e,void(d.find((function(e){return e.username===n.username}))?O(n):(b((function(e){return Object(On.a)(e,(function(e){e.push(n)}))})),h.current.value="",s([])));var n}},e.username)}))]})]})})},Tt=Object(Ye.a)(Lt.a)(re||(re=Object(Je.a)(["\n  background: #fff;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 63vh;\n  width: 400px;\n  &:focus {\n    border: none;\n    outline: none;\n  }\n"]))),Wt=Ye.a.div(ie||(ie=Object(Je.a)([""]))),Gt=Ye.a.button(ae||(ae=Object(Je.a)([""]))),Vt=Ye.a.button(oe||(oe=Object(Je.a)([""]))),Qt=Ye.a.div(ce||(ce=Object(Je.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  height: 42px;\n  "," {\n    line-height: 1;\n    margin: 0 16px;\n    position: absolute;\n    left: 0;\n  }\n  "," {\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    font-weight: 600;\n  }\n  "," {\n    color: rgb(0, 149, 246);\n    font-size: 14px;\n    font-weight: 600;\n    margin: 0 16px;\n    position: absolute;\n    right: 0;\n  }\n"])),Gt,Wt,Vt),Ht=Ye.a.div(se||(se=Object(Je.a)(["\n  display: flex;\n  padding: 8px 0;\n  border-top: 1px solid rgb(219, 219, 219);\n  border-bottom: 1px solid rgb(219, 219, 219);\n"]))),Jt=Ye.a.div(le||(le=Object(Je.a)(["\n  font-weight: 600;\n  padding: 4px 12px;\n"]))),Yt=Ye.a.div(ue||(ue=Object(Je.a)(["\n  flex-grow: 1;\n"]))),Zt=Ye.a.div(de||(de=Object(Je.a)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: row wrap;\n  max-height: 17vh;\n  overflow-y: auto;\n  padding: 0 8px;\n  width: 100%;\n"]))),Xt=Ye.a.input(be||(be=Object(Je.a)(["\n  border: none;\n  box-sizing: border-box;\n  caret-color: #000000;\n  font-size: 14px;\n  height: 30px;\n  padding: 0 20px;\n  &:focus {\n    outline: none;\n  }\n  width: 84%;\n"]))),qt=Ye.a.div(je||(je=Object(Je.a)(["\n  color: rgb(38, 38, 38);\n  font-size: 14px;\n  font-weight: 600;\n  padding: 16px;\n"]))),Kt=Ye.a.div(xe||(xe=Object(Je.a)(["\n  /* background: #000; */\n  flex-grow: 1;\n  overflow-y: auto;\n"]))),$t=function(e){var n=e.info,t=e.selected,r=e.onClick,i=Object(Te.useMemo)((function(){return t.find((function(e){return e.username===n.username}))}),[t,n]);return Object($e.jsxs)(er,{onClick:function(){return r(n)},children:[Object($e.jsx)(kn,{image:An(n.profilePicture,"w_44"),name:n.name,username:n.username}),i?Object($e.jsx)(bn,{}):Object($e.jsx)(jn,{})]},n.username)},er=Ye.a.button(pe||(pe=Object(Je.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 16px;\n  width: 100%;\n"]))),nr=function(e){var n=e.userDetails,t=e.chats,r=e.setChats,i=e.inboxes,a=e.setInboxes,o=Object(Qe.i)(),c=Object(Te.useState)(!1),s=Object(Re.a)(c,2),l=s[0],u=s[1],d=Object(Te.useState)({}),b=Object(Re.a)(d,2),j=b[0],x=b[1],p=Object(Qe.h)();Object(Te.useEffect)((function(){var e={};i.forEach((function(n){n.participants.forEach((function(n){e[n._id]={},e[n._id].name=n.name,e[n._id].profilePicture=n.profilePicture,e[n._id].username=n.username}))})),x(e)}),[i]),Object(Te.useEffect)((function(){gn.connect()}),[]),Object(Te.useEffect)((function(){gn.emit("get-inboxes",{},(function(e){var t=mn(e.data,n._id);a((function(e){return function(e){var n=[];return e.forEach((function(e){n.find((function(n){return n._id===e._id}))||n.push(e)})),n}([].concat(Object(pt.a)(e),Object(pt.a)(t)))}))}))}),[n._id,a]),Object(Te.useEffect)((function(){gn.off("online-status"),gn.on("online-status",(function(e){var t;if(e._id!==n._id){var o=null===(t=i.find((function(n){return 1===n.participants.length&&n.participants[0]._id===e._id})))||void 0===t?void 0:t._id;o&&(a((function(n){return Object(On.a)(n,(function(n){var t=n.findIndex((function(e){return e._id===o})),r=n[t];r.participants[0].online=e.online,e.online&&"sent"===r.lastActivity.messageStatus&&(r.lastActivity.messageStatus="delivered")}))})),e.online&&r((function(e){return Object(On.a)(e,(function(e){var n;null===e||void 0===e||null===(n=e[o])||void 0===n||n.forEach((function(e){"sent"===e.messageStatus&&(e.messageStatus="delivered")}))}))})))}else console.error("in online-status data._id should never be user's own id")}))}),[i,a,r,n._id]);var f=Object(Te.useMemo)((function(){var e={participantData:{},inboxData:{group:{}}};try{if(!o.inboxId||0===i.length)return e;var n=i.findIndex((function(e){return e._id===o.inboxId}));return i[n].group.isGroup&&(e.inboxData.group={isGroup:!0,groupName:i[n].group.groupName}),i[n].participants.forEach((function(n){e.participantData[n._id]=j[n._id]})),e}catch(t){console.error(t),p("/inbox",{replace:!0})}return e}),[o.inboxId,j,i,p]),h=Object(Te.useMemo)((function(){for(var e=[],n=Object.keys(j),t=0;t<Math.min(11,n.length);t++){var r=j[n[t]],i=r.name,a=r.username,o=r.profilePicture;e.push({_id:n[t],name:i,username:a,profilePicture:o})}return e}),[j]);return Object($e.jsxs)(sr,{activeInbox:!!o.inboxId,children:[Object($e.jsxs)(dr,{children:[Object($e.jsx)(tr,{children:n.username}),Object($e.jsx)(ur,{onClick:function(){return u(!0)},children:Object($e.jsx)(dn,{})})]}),Object($e.jsx)(lr,{children:i.map((function(e){var t=e.group.isGroup;return Object($e.jsxs)(cr,{to:"/inbox/"+e._id,$group:t,$lastMessage:e.lastActivity.message,$online:e.participants[0].online,className:function(e){return e.isActive?"active":void 0},children:[Object($e.jsx)(ir,{children:t?Object($e.jsx)(Cn,{image1:e.participants[0].profilePicture,image2:e.participants[1].profilePicture,imageWidth:"40px",containerWidth:"56px"}):Object($e.jsx)("img",{src:An(e.participants[0].profilePicture,"w_56"),alt:e.participants[0].username})}),Object($e.jsx)(rr,{children:t?e.group.groupName:e.participants[0].name}),""!==e.lastActivity.message&&Object($e.jsxs)($e.Fragment,{children:[e.lastActivity.sentBy===n._id&&Object($e.jsx)(ar,{messageStatus:e.lastActivity.messageStatus}),Object($e.jsx)(or,{children:e.lastActivity.message})]})]},e._id)}))}),Object($e.jsx)(St,{chats:t,inboxAndParticipantData:f,setChats:r,userDetails:n,inboxes:i,setInboxes:a,setModalOpen:u}),Object($e.jsx)(Pt,{open:l,setOpen:u,handleNextClick:function(e){vn(e.map((function(e){return e._id})),n,i,a,r,p,(function(){return u(!1)}))},suggestedUsers:h})]})},tr=Ye.a.div(fe||(fe=Object(Je.a)([""]))),rr=Ye.a.div(he||(he=Object(Je.a)([""]))),ir=Ye.a.div(ge||(ge=Object(Je.a)([""]))),ar=Object(Ye.a)(At)(Oe||(Oe=Object(Je.a)([""]))),or=Ye.a.div(Ae||(Ae=Object(Je.a)([""]))),cr=Object(Ye.a)(He.c)(me||(me=Object(Je.a)(["\n  display: grid;\n  grid-template-columns: auto auto 1fr;\n  grid-template-rows: auto auto;\n  grid-template-areas: ",";\n\n  padding: 8px 20px;\n  text-decoration: none;\n  &.active {\n    background: rgb(239, 239, 239);\n  }\n  "," {\n    grid-area: profilePic;\n    height: 56px;\n    position: relative;\n    margin-right: 12px;\n    img {\n      border-radius: 50%;\n    }\n    &::after {\n      background: ",";\n      border: 4px solid #fff;\n      border-radius: 50%;\n      content: '';\n      display: ",";\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      width: 13px;\n      height: 13px;\n    }\n  }\n  "," {\n    align-self: ",";\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    grid-area: username;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  "," {\n    grid-area: messageStatus;\n    margin-right: 2px;\n    margin-top: 1px;\n  }\n  "," {\n    color: rgb(142, 142, 142);\n    font-size: 14px;\n    grid-area: message;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n"])),(function(e){return e.$lastMessage?"'profilePic username username'\n    'profilePic messageStatus message'":"'profilePic username username'\n    'profilePic username username'"}),ir,(function(e){return e.$online?"#78de45":"#c4c4c4"}),(function(e){return e.$group?"none":"block"}),rr,(function(e){return e.$lastMessage?"end":"center"}),ar,or),sr=Object(Ye.a)(Xe)(ve||(ve=Object(Je.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  border-radius: 4px;\n  display: grid;\n  grid-template-columns: 350px;\n  grid-template-rows: 60px 1fr auto;\n  grid-template-areas: ",";\n  margin: 20px auto;\n  overflow: auto;\n  width: 100%;\n"])),(function(e){return e.activeInbox?"'usernameAndChat chatBoxHeading'\n          'inboxList chats'\n          'inboxList sendMessageBox'":"'usernameAndChat noActiveInbox'\n          'inboxList noActiveInbox'\n          'inboxList noActiveInbox'"})),lr=Ye.a.div(we||(we=Object(Je.a)(["\n  border-right: 1px solid rgb(219, 219, 219);\n  grid-area: inboxList;\n  padding: 10px 0;\n  overflow: auto;\n"]))),ur=Ye.a.button(ye||(ye=Object(Je.a)([""]))),dr=Ye.a.div(ke||(ke=Object(Je.a)(["\n  border-right: 1px solid rgb(219, 219, 219);\n  border-bottom: 1px solid rgb(219, 219, 219);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  grid-area: usernameAndChat;\n  position: relative;\n  "," {\n    text-align: center;\n    color: rgb(38, 38, 38);\n    font-size: 16px;\n    font-weight: 600;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 65%;\n  }\n  "," {\n    position: absolute;\n    right: 20px;\n  }\n"])),tr,ur),br=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){var t,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.current.files[0],r=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){var t,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FileReader,r=new Promise((function(e,n){t.addEventListener("load",(function(){e(t.result)}))})),t.readAsDataURL(n),e.next=5,r;case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!t){e.next=7;break}return e.next=5,r(t);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),jr=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n,t){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.a.post("".concat(hn,"/profilePicture/change"),{profilePicture:n});case 3:r=e.sent,console.log("success",r),t((function(e){return e._id!==r.data._id?e:Object(On.a)(e,(function(e){e.profilePicture=r.data.profilePicture}))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("failed");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}(),xr=function(){var e=Object(Ue.a)(Ee.a.mark((function e(n){var t;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.a.post("".concat(hn,"/profilePicture/remove"));case 3:t=e.sent,console.log("success",t),n((function(e){return e._id!==t.data._id?e:Object(On.a)(e,(function(e){e.profilePicture=t.data.profilePicture}))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert("failed");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),pr=function(e){var n=e.userDetails,t=e.setChats,r=e.inboxes,i=e.setInboxes,a=Object(Te.useState)(),o=Object(Re.a)(a,2),c=o[0],s=o[1],l=Object(Te.useState)(!1),u=Object(Re.a)(l,2),d=u[0],b=u[1],j=Object(Te.useState)(!1),x=Object(Re.a)(j,2),p=x[0],f=x[1],h=Object(Te.useRef)();console.log("profileDetails",c);var g=Object(Qe.i)(),O=Object(Qe.h)();return Object(Te.useEffect)((function(){Object(Ue.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.a.get("".concat(hn,"/").concat(g.username));case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[g.username]),(null===c||void 0===c?void 0:c.username)?Object($e.jsxs)("div",{children:[Object($e.jsxs)(hr,{as:"header",children:[Object($e.jsx)("button",{className:"img-box",onClick:function(){c._id===n._id&&f(!0)},children:Object($e.jsx)("img",{src:An(c.profilePicture.withVersion,"w_320"),alt:c.username})}),Object($e.jsxs)("section",{children:[Object($e.jsxs)("div",{className:"flex username-and-edit-profile",children:[Object($e.jsx)("h2",{children:c.username}),n.username!==c.username&&Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(Ke,{disabled:d,onClick:function(){b(!0),vn([c._id],n,r,i,t,O)},children:"Message"}),Object($e.jsx)(qe,{disabled:!0,widthAuto:!0,children:"Follow"})]})]}),Object($e.jsxs)("ul",{className:"flex posts-followers-following",children:[Object($e.jsxs)("li",{children:[Object($e.jsx)("strong",{children:c.postCount||0})," posts"]}),Object($e.jsxs)("li",{children:[Object($e.jsx)("strong",{children:c.followerCount||0})," followers"]}),Object($e.jsxs)("li",{children:[Object($e.jsx)("strong",{children:c.followingCount||0})," following"]})]}),Object($e.jsxs)("div",{children:[Object($e.jsx)("h3",{children:c.name}),Object($e.jsx)("p",{className:"bio",children:c.bio})]})]})]}),Object($e.jsx)(gr,{as:"section",children:0===c.posts.length?Object($e.jsx)("h2",{children:"No Posts Yet"}):c.posts.map((function(e,n){return Object($e.jsx)("div",{children:Object($e.jsx)("img",{src:An(e.images[0].url,"w_293"),alt:"post ".concat(n)})},e._id)}))}),Object($e.jsx)(Ze.a,{open:p,onClose:function(){return f(!1)},children:Object($e.jsxs)(Or,{children:[Object($e.jsx)("h2",{children:"Change Profile Photo"}),Object($e.jsx)("button",{className:"upload-photo",onClick:function(){return h.current.click()},children:"Upload Photo"}),Object($e.jsx)("button",{className:"remove-photo",onClick:function(){f(!1),xr(s)},children:"Remove Current Photo"}),Object($e.jsx)("button",{className:"cancel",onClick:function(){return f(!1)},children:"Cancel"}),Object($e.jsx)(fr,{type:"file",ref:h,onChange:Object(Ue.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=3,br(h);case 3:n=e.sent,jr(n,s);case 5:case"end":return e.stop()}}),e)})))})]})})]}):Object($e.jsx)("h1",{children:"Loading..."})},fr=Ye.a.input(Ce||(Ce=Object(Je.a)(["\n  display: hidden;\n  position: absolute;\n  left: -10000px;\n"]))),hr=Object(Ye.a)(Xe)(Se||(Se=Object(Je.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: flex-start;\n  padding: 30px 20px 60px 94px;\n  .img-box {\n    border-radius: 50%;\n    margin-right: 98px;\n    width: 150px;\n    height: 150px;\n    overflow: hidden;\n    text-align: center;\n    img {\n      object-fit: cover;\n      object-position: center center;\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .flex {\n    display: flex;\n    align-items: center;\n  }\n  h2 {\n    font-weight: 300;\n    color: rgb(38, 38, 38);\n    font-size: 28px;\n    margin: 0;\n    margin-right: 20px;\n  }\n  .posts-followers-following li {\n    margin-right: 50px;\n  }\n  section .username-and-edit-profile,\n  section ul {\n    margin-bottom: 20px;\n  }\n  section .username-and-edit-profile {\n    "," {\n      margin-right: 8px;\n    }\n    "," {\n      padding-left: 24px;\n      padding-right: 24px;\n    }\n  }\n  section > div:last-child {\n    margin-bottom: 0px;\n  }\n  h3 {\n    margin: 0;\n    font-size: 16px;\n    font-weight: 600;\n  }\n  p {\n    font-size: 16px;\n    margin: 0;\n  }\n  strong {\n    font-weight: 600;\n  }\n"])),Ke,qe),gr=Object(Ye.a)(Xe)(Ie||(Ie=Object(Je.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  text-align: center;\n  h2 {\n    color: rgb(38, 38, 38);\n    font-weight: 300;\n    font-size: 46px;\n  }\n  div {\n    width: 293px;\n    height: 293px;\n    margin-right: 28px;\n    margin-bottom: 28px;\n  }\n  div:nth-child(3n + 0) {\n    margin-right: 0;\n  }\n  img {\n    object-fit: contain;\n    height: 100%;\n  }\n"]))),Or=Object(Ye.a)(Lt.a)(Me||(Me=Object(Je.a)(["\n  background: #ffffff;\n  border-radius: 12px;\n  display: flex;\n  flex-flow: column;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  width: 400px;\n  &:focus {\n    border: none;\n    outline: none;\n  }\n  h2 {\n    color: rgb(38, 38, 38);\n    font-size: 18px;\n    font-weight: 700;\n    margin: 0;\n    padding: 32px 0;\n  }\n  button {\n    border-top: 1px solid rgb(219, 219, 219);\n    font-size: 14px;\n    padding: 15px 0;\n    font-weight: 700;\n  }\n  .upload-photo {\n    color: rgb(0, 149, 246);\n  }\n  .remove-photo {\n    color: rgb(237, 73, 86);\n  }\n  .cancel {\n    font-weight: 400;\n  }\n"]))),Ar=[{label:"Email",name:"email",type:"email"},{label:"Full Name",name:"name"},{label:"Username",name:"username"},{label:"Password",name:"password",type:"password"}],mr=function(e){var n=e.setUserDetails,t=Object(Te.useRef)({name:"",username:"",email:"",password:""}),r=function(){var e=Object(Ue.a)(Ee.a.mark((function e(r){var i,a,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.preventDefault(),e.next=4,Pe.a.post("".concat(hn,"/signup"),t.current);case 4:i=e.sent,console.log(i),n(i.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return Object($e.jsxs)(vr,{onSubmit:r,children:[Ar.map((function(e){return Object($e.jsx)(it,{label:e.label,name:e.name,type:e.type,values:t,required:!0},e.name)})),Object($e.jsx)(qe,{children:"Sign up"})]})},vr=Ye.a.form(De||(De=Object(Je.a)(["\n  .input-box {\n    margin-bottom: 6px;\n  }\n  button {\n    margin: 14px 0;\n  }\n"]))),wr=function(e){var n=e.setUserDetails;return Object($e.jsxs)(Cr,{children:[Object($e.jsx)(kr,{}),Object($e.jsxs)(yr,{children:[Object($e.jsxs)(Sr,{className:"right",children:[Object($e.jsx)(pn,{}),Object($e.jsx)(st,{children:"Sign up to see photos and videos from your friends."}),Object($e.jsx)($n,{}),Object($e.jsx)(mr,{setUserDetails:n})]}),Object($e.jsx)(Sr,{className:"bottom",children:Object($e.jsxs)(ut,{children:["Have an account? ",Object($e.jsx)(lt,{to:"/accounts/login",children:"Log in"})]})})]})]})},yr=Ye.a.div(Be||(Be=Object(Je.a)(["\n  display: flex;\n  flex-flow: column;\n"]))),kr=Ye.a.div(_e||(_e=Object(Je.a)([""]))),Cr=Ye.a.div(Ne||(Ne=Object(Je.a)(["\n  display: flex;\n  justify-content: center;\n  max-width: 1080px;\n  margin: 33px auto;\n"]))),Sr=Ye.a.div(ze||(ze=Object(Je.a)(["\n  background: #fff;\n  border: 1px solid rgb(219, 219, 219);\n  padding: 25px 40px;\n  &.right {\n    box-sizing: border-box;\n    max-width: 350px;\n    margin-bottom: 10px;\n    .logo {\n      margin-top: 21px;\n      margin-bottom: 12px;\n    }\n  }\n"]))),Ir=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,144)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),a(e),o(e)}))};Pe.a.defaults.withCredentials=!0;var Mr=function(){var e=Object(Te.useState)("loading"),n=Object(Re.a)(e,2),t=n[0],r=n[1],i=Object(Te.useState)([]),a=Object(Re.a)(i,2),o=a[0],c=a[1],s=Object(Te.useState)({}),l=Object(Re.a)(s,2),u=l[0],d=l[1];return Object(Te.useEffect)((function(){Object(Ue.a)(Ee.a.mark((function e(){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.a.get("".concat(hn,"/"));case 3:(n=e.sent).data._id&&r(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),r(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),"loading"===t?Object($e.jsx)("h1",{children:"Loading..."}):Object($e.jsxs)(Qe.e,{children:[!1===t&&Object($e.jsx)(Qe.c,{index:!0,element:Object($e.jsx)(dt,{setUserDetails:function(e){return r(e)}})}),Object($e.jsxs)(Qe.c,{element:Object($e.jsx)(Dr,{userDetails:t,children:Object($e.jsx)(Qe.b,{})}),children:[Object($e.jsx)(Qe.c,{path:"accounts/login",element:Object($e.jsx)(dt,{setUserDetails:function(e){return r(e)}})}),Object($e.jsx)(Qe.c,{path:"accounts/signup",element:Object($e.jsx)(wr,{setUserDetails:r})})]}),Object($e.jsxs)(Qe.c,{element:Object($e.jsx)(Xn,{userDetails:t,setUserDetails:r,emptyAllStates:function(){console.log("emptyAllStates"),c([]),d({}),r(!1)}}),children:[Object($e.jsx)(Qe.c,{path:":username",element:Object($e.jsx)(pr,{userDetails:t,setChats:d,inboxes:o,setInboxes:c})}),Object($e.jsx)(Qe.c,{path:"/somepost",element:Object($e.jsx)($e.Fragment,{children:"post some"})}),Object($e.jsxs)(Qe.c,{element:Object($e.jsx)(Br,{userDetails:t,children:Object($e.jsx)(Qe.b,{})}),children:[Object($e.jsx)(Qe.c,{index:!0,element:Object($e.jsx)("h1",{children:"News Feed"})}),Object($e.jsx)(Qe.c,{path:"/inbox",element:Object($e.jsx)(nr,{userDetails:t,chats:u,setChats:d,inboxes:o,setInboxes:c})}),Object($e.jsx)(Qe.c,{path:"/inbox/:inboxId",element:Object($e.jsx)(nr,{userDetails:t,chats:u,setChats:d,inboxes:o,setInboxes:c})}),Object($e.jsx)(Qe.c,{path:"*",element:Object($e.jsx)("h1",{children:"Page does not exist"})})]})]})]})};Ve.a.render(Object($e.jsx)(We.a.StrictMode,{children:Object($e.jsx)(He.a,{children:Object($e.jsx)(Mr,{})})}),document.getElementById("root")),Ir();var Dr=function(e){var n=e.children,t=e.userDetails;console.log("noauth",t);var r=Object(Qe.g)();return console.log("location.state",r.state),t&&!r.state?Object($e.jsx)(Qe.a,{to:"/inbox",replace:!0}):n};function Br(e){var n=e.children,t=e.userDetails,r=Object(Qe.g)();return t?n:Object($e.jsx)(Qe.a,{to:"/accounts/login",state:{from:r},replace:!0})}}},[[118,1,2]]]);
//# sourceMappingURL=main.9dae6ef3.chunk.js.map
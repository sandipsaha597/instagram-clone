{"version":3,"sources":["atoms/Boxes/Container.tsx","atoms/Buttons/Buttons.tsx","atoms/Icons/Icons.tsx","images/instagram_logo.png","atoms/IconsAndImages/Logo.tsx","utils/utilVariables.ts","SocketIO.ts","utils/utilFunctions.ts","atoms/layouts/UsernameWithImage.tsx","molecules/AddPost.tsx","molecules/Navbar.tsx","App.tsx","atoms/Boxes/Boxes.tsx","atoms/Input/Input.tsx","atoms/Text/Texts.tsx","molecules/LoginForm.tsx","atoms/IconsAndImages/ReadReceipts.tsx","images/pending2.png","images/sent3.png","images/delivered.png","images/seen.png","atoms/MessageStatus/MessageStatus.tsx","molecules/SendMessageBox.tsx","molecules/ChatBox.tsx","atoms/Chip/Chip.tsx","molecules/SendMessageModal.tsx","pages/DirectMessagePage.tsx","pages/ProfilePage.tsx","molecules/SignUpForm.tsx","pages/SignUpPage.tsx","reportWebVitals.ts","index.tsx"],"names":["Container","styled","div","Button","button","widthAuto","Button2","HomeIcon","aria-label","className","color","fill","height","role","viewBox","width","d","stroke","strokeLinejoin","strokeWidth","HomeIconActive","DirectMessageIcon","x1","x2","y1","y2","points","DirectMessageIconCircled","cx","cy","r","strokeLinecap","DirectMessageIconActive","fillRule","ProfileImg","img","AddPostIcon","CloseIcon","widthAndHeight","UploadImageVideoIcon","CropIcon","NewChatIcon","CircleSelectedIcon","CircleNotSelectedIcon","Logo","src","instagramLogo","alt","DOMAIN","socket","io","withCredentials","autoConnect","transformCloudinaryImage","image","transformString","split","join","modifyInboxes","inboxes","userId","length","map","inbox","userExcludedFromParticipants","participants","filter","v","_id","getAndSetInbox","userIds","userDetails","setInboxes","setChats","navigate","callback","a","doesInboxParticipantsMatchUserIds","participantsUserIds","console","log","sort","i","existingInbox","find","inboxId","produce","draft","inboxIndex","findIndex","splice","unshift","axios","get","params","response","data","fetchedChats","chats","group","isGroup","emit","modifiedInbox","loading","UsernameWithImage","username","StyledUsernameWithImage","Username","UsernameWithImageGroup","image1","image2","imageWidth","imageGroupContainerWidth","groupName","NameUsernameWithImage","name","onClick","Right","Name","ImageGroup","containerWidth","StyledImageGroup","Image1","Image2","AddPost","forwardRef","inputRef","useRef","captionRef","useState","files","setFiles","headingText","setHeadingText","useEffect","alert","sharePost","post","caption","current","value","images","StyledAddPost","Head","Heading","Body","haveFiles","FileInput","type","ref","onChange","blobFiles","tempFiles","Array","readAndSetDataURLs","file","index","reader","FileReader","addEventListener","result","includes","readAsDataURL","getDataUrlsOfFiles","PostImage","CropButton","WriteACaption","profilePicture","withVersion","placeholder","click","input","Navbar","emptyAllStates","modalHidden","setModalHidden","addPostModalOpen","setAddPostModalOpen","StyledNavbar","StyledContainer","to","isActive","state","ModalButtonWrapper","as","active","hidden","Modal","open","onClose","li","nav","ProfilePopOver","useNavigate","logout","e","preventDefault","disconnect","error","Card","App","setUserDetails","StyledApp","UserData","Or","Wrapper","Line","OrText","BorderedBox","Input","label","values","required","setValue","InputBox","Label","inputValue","StyledInput","target","SubHeading","LinkText","Link","$bold","Text1","p","LoginForm","loginFormValues","usernameOrEmail","password","email","login","useLocation","from","pathname","indexOf","replace","LoginPage","StyledBorderedBox","StyledLoginForm","form","PendingIcon","SentIcon","DeliveredIcon","SeenIcon","MessageStatus","messageStatus","StyledMessageStatus","SendMessageBox","sendMessage","messageInputRef","useParams","setInputValue","submitButtonRef","style","scrollHeight","StyledSendMessageBox","SendMessageForm","onSubmit","SendMessageTextarea","onKeyDown","which","SendMessageButton","disabled","textarea","ChatBox","inboxAndParticipantData","setModalOpen","chatsRef","onlineStatusSub","useCallback","online","off","on","chat","sentBy","sentTo","push","scrollTo","lastActivity","updatedInbox","every","chat_id","forEach","firstParticipant","participantData","Object","keys","inboxData","undefined","NoActiveChatBox","arr","ChatsWrapper","Chats","chatSentByUser","chatsArr","Chat","EmptyBox","message","trim","tempChatId","Math","floor","random","flushSync","messageObj","inboxLastActivityObj","status","Chip","text","StyledChip","ChipText","CloseIconButton","SendMessageModal","suggestedUsers","setOpen","handleNextClick","searchResults","setSearchResults","selected","setSelected","nextButtonDisabled","setNextButtonDisabled","handleChange","getSearchResults","modifiedResults","unselectThisUser","info","temp","userList","useMemo","listType","aria-labelledby","aria-describedby","StyledBox","SendMessageModalHeader","CloseButton","HeadingText","NextButton","SearchAndSelectedArea","To","SearchAndSelectedContainer","ChipsWrapper","SearchInput","UserList","SuggestedHeading","Box","User","isThisUserSelected","StyledUser","DirectMessagePage","modalOpen","chatUserDetails","setChatUserDetails","participant","connect","fetchedInboxes","modifiedInboxes","v2","removeDuplicates","err","min","activeInbox","UsernameAndNewChat","NewChatButton","InboxList","Inbox","$group","$lastMessage","$online","ProfilePic","InboxName","Message","NavLink","getDataUrlOfFile","readDataURL","loadedFile","Promise","resolve","reject","changeProfilePicture","setProfileDetails","profileDetails","removeCurrentPhoto","ProfilePage","messageButtonDisabled","setMessageButtonDisabled","profilePictureModalOpen","setProfilePictureModalOpen","postCount","followerCount","followingCount","bio","Posts","posts","url","signUpFormInputData","SignUpForm","signUpFormValues","signup","StyledSignUpForm","SignUpPage","StyledSignUpPage","ScreenSlideShow","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","defaults","Index","element","details","path","RequireAuth","ReactDOM","render","StrictMode","document","getElementById","NoAuth","children","location"],"mappings":"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","file":"static/js/main.dc280b8f.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nexport const Container = styled.div`\r\n  max-width: 955px;\r\n  margin: 0 auto;\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const Button = styled.button<{ widthAuto?: boolean }>`\r\n  background-color: rgb(0, 149, 246);\r\n  border-radius: 4px;\r\n  color: #fff;\r\n  display: block;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  padding: 5px 9px;\r\n  line-height: 18px;\r\n  width: ${({ widthAuto }) => (widthAuto ? 'auto' : '100%')};\r\n`\r\n\r\nexport const Button2 = styled.button`\r\n  border: 1px solid rgb(219, 219, 219);\r\n  border-radius: 4px;\r\n  color: rgb(38, 38, 38);\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  padding: 5px 9px;\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const HomeIcon = () => (\r\n  <svg\r\n    aria-label=\"Home\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path\r\n      d=\"M9.005 16.545a2.997 2.997 0 012.997-2.997h0A2.997 2.997 0 0115 16.545V22h7V11.543L12 2 2 11.543V22h7.005z\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></path>\r\n  </svg>\r\n)\r\nexport const HomeIconActive = () => (\r\n  <svg\r\n    aria-label=\"Home\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path d=\"M22 23h-6.001a1 1 0 01-1-1v-5.455a2.997 2.997 0 10-5.993 0V22a1 1 0 01-1 1H2a1 1 0 01-1-1V11.543a1.002 1.002 0 01.31-.724l10-9.543a1.001 1.001 0 011.38 0l10 9.543a1.002 1.002 0 01.31.724V22a1 1 0 01-1 1z\"></path>\r\n  </svg>\r\n)\r\nexport const DirectMessageIcon = () => (\r\n  <svg\r\n    aria-label=\"Direct\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      x1=\"22\"\r\n      x2=\"9.218\"\r\n      y1=\"3\"\r\n      y2=\"10.083\"\r\n    ></line>\r\n    <polygon\r\n      fill=\"none\"\r\n      points=\"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></polygon>\r\n  </svg>\r\n)\r\nexport const DirectMessageIconCircled = () => (\r\n  <svg\r\n    aria-label=\"Direct\"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"96\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 96 96\"\r\n    width=\"96\"\r\n  >\r\n    <circle\r\n      cx=\"48\"\r\n      cy=\"48\"\r\n      fill=\"none\"\r\n      r=\"47\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></circle>\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      x1=\"69.286\"\r\n      x2=\"41.447\"\r\n      y1=\"33.21\"\r\n      y2=\"48.804\"\r\n    ></line>\r\n    <polygon\r\n      fill=\"none\"\r\n      points=\"47.254 73.123 71.376 31.998 24.546 32.002 41.448 48.805 47.254 73.123\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></polygon>\r\n  </svg>\r\n)\r\nexport const DirectMessageIconActive = () => (\r\n  <svg\r\n    aria-label=\"Direct\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path\r\n      d=\"M22.91 2.388a.69.69 0 00-.597-.347l-20.625.002a.687.687 0 00-.482 1.178L7.26 9.16a.686.686 0 00.778.128l7.612-3.657a.723.723 0 01.937.248.688.688 0 01-.225.932l-7.144 4.52a.69.69 0 00-.3.743l2.102 8.692a.687.687 0 00.566.518.655.655 0 00.103.008.686.686 0 00.59-.337L22.903 3.08a.688.688 0 00.007-.692\"\r\n      fillRule=\"evenodd\"\r\n    ></path>\r\n  </svg>\r\n)\r\nexport const ProfileImg = styled.img`\r\n  border-radius: 50%;\r\n`\r\nexport const AddPostIcon = () => (\r\n  <svg\r\n    aria-label=\"New Post\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path\r\n      d=\"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552z\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></path>\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      x1=\"6.545\"\r\n      x2=\"17.455\"\r\n      y1=\"12.001\"\r\n      y2=\"12.001\"\r\n    ></line>\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      x1=\"12.003\"\r\n      x2=\"12.003\"\r\n      y1=\"6.545\"\r\n      y2=\"17.455\"\r\n    ></line>\r\n  </svg>\r\n)\r\nexport const AddPostIconActive = () => (\r\n  <div className=\"QBdPU \">\r\n    <svg\r\n      aria-label=\"New Post\"\r\n      className=\"_8-yf5 \"\r\n      color=\"#262626\"\r\n      fill=\"#262626\"\r\n      height=\"24\"\r\n      role=\"img\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n    >\r\n      <path d=\"M12.003 5.545l-.117.006-.112.02a1 1 0 00-.764.857l-.007.117V11H6.544l-.116.007a1 1 0 00-.877.876L5.545 12l.007.117a1 1 0 00.877.876l.116.007h4.457l.001 4.454.007.116a1 1 0 00.876.877l.117.007.117-.007a1 1 0 00.876-.877l.007-.116V13h4.452l.116-.007a1 1 0 00.877-.876l.007-.117-.007-.117a1 1 0 00-.877-.876L17.455 11h-4.453l.001-4.455-.007-.117a1 1 0 00-.876-.877zM8.552.999h6.896c2.754 0 4.285.579 5.664 1.912 1.255 1.297 1.838 2.758 1.885 5.302L23 8.55v6.898c0 2.755-.578 4.286-1.912 5.664-1.298 1.255-2.759 1.838-5.302 1.885l-.338.003H8.552c-2.754 0-4.285-.579-5.664-1.912-1.255-1.297-1.839-2.758-1.885-5.302L1 15.45V8.551c0-2.754.579-4.286 1.912-5.664C4.21 1.633 5.67 1.05 8.214 1.002L8.552 1z\"></path>\r\n    </svg>\r\n  </div>\r\n)\r\nexport const CloseIcon = ({ widthAndHeight, color }: any) => (\r\n  <svg\r\n    aria-label=\"Close\"\r\n    color={color}\r\n    fill={color}\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width={widthAndHeight}\r\n    height={widthAndHeight}\r\n  >\r\n    <polyline\r\n      fill=\"none\"\r\n      points=\"20.643 3.357 12 12 3.353 20.647\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"3\"\r\n    ></polyline>\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"3\"\r\n      x1=\"20.649\"\r\n      x2=\"3.354\"\r\n      y1=\"20.649\"\r\n      y2=\"3.354\"\r\n    ></line>\r\n  </svg>\r\n)\r\nexport const UploadImageVideoIcon = () => (\r\n  <svg\r\n    aria-label=\"Icon to represent media such as images or videos\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"77\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 97.6 77.3\"\r\n    width=\"96\"\r\n  >\r\n    <path\r\n      d=\"M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z\"\r\n      fill=\"currentColor\"\r\n    ></path>\r\n    <path\r\n      d=\"M84.7 18.4L58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5l-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z\"\r\n      fill=\"currentColor\"\r\n    ></path>\r\n    <path\r\n      d=\"M78.2 41.6L61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6l-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z\"\r\n      fill=\"currentColor\"\r\n    ></path>\r\n  </svg>\r\n)\r\nexport const CropIcon = () => (\r\n  <svg\r\n    aria-label=\"Select Crop\"\r\n    className=\"_8-yf5 \"\r\n    color=\"#ffffff\"\r\n    fill=\"#ffffff\"\r\n    height=\"16\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"16\"\r\n  >\r\n    <path d=\"M10 20H4v-6a1 1 0 00-2 0v7a1 1 0 001 1h7a1 1 0 000-2zM20.999 2H14a1 1 0 000 2h5.999v6a1 1 0 002 0V3a1 1 0 00-1-1z\"></path>\r\n  </svg>\r\n)\r\nexport const NewChatIcon = () => (\r\n  <svg\r\n    aria-label=\"New message\"\r\n    className=\"_ab6-\"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path\r\n      d=\"M12.202 3.203H5.25a3 3 0 00-3 3V18.75a3 3 0 003 3h12.547a3 3 0 003-3v-6.952\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></path>\r\n    <path\r\n      d=\"M10.002 17.226H6.774v-3.228L18.607 2.165a1.417 1.417 0 012.004 0l1.224 1.225a1.417 1.417 0 010 2.004z\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n    ></path>\r\n    <line\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      x1=\"16.848\"\r\n      x2=\"20.076\"\r\n      y1=\"3.924\"\r\n      y2=\"7.153\"\r\n    ></line>\r\n  </svg>\r\n)\r\nexport const CircleSelectedIcon = () => (\r\n  <svg\r\n    aria-label=\"Toggle selection\"\r\n    color=\"#0095f6\"\r\n    fill=\"#0095f6\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <path d=\"M12.001.504a11.5 11.5 0 1011.5 11.5 11.513 11.513 0 00-11.5-11.5zm5.706 9.21l-6.5 6.495a1 1 0 01-1.414-.001l-3.5-3.503a1 1 0 111.414-1.414l2.794 2.796L16.293 8.3a1 1 0 011.414 1.415z\"></path>\r\n  </svg>\r\n)\r\nexport const CircleNotSelectedIcon = () => (\r\n  <svg\r\n    aria-label=\"Toggle selection\"\r\n    color=\"#262626\"\r\n    fill=\"#262626\"\r\n    height=\"24\"\r\n    role=\"img\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24\"\r\n  >\r\n    <circle\r\n      cx=\"12.008\"\r\n      cy=\"12\"\r\n      fill=\"none\"\r\n      r=\"11.25\"\r\n      stroke=\"currentColor\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"1.5\"\r\n    ></circle>\r\n  </svg>\r\n)\r\n","export default __webpack_public_path__ + \"static/media/instagram_logo.b7c204eb.png\";","import instagramLogo from './../../images/instagram_logo.png'\r\nconst Logo: React.FC = () => {\r\n  return <img src={instagramLogo} className=\"logo\" alt=\"instagram clone logo\" />\r\n}\r\n\r\nexport default Logo\r\n","export const DOMAIN =\r\n  process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:8080/api'\r\n    : 'http://ec2-43-205-140-166.ap-south-1.compute.amazonaws.com:8080/api'\r\nexport const SOCKET_IO_DOMAIN =\r\n  process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:8081'\r\n    : 'http://ec2-43-205-140-166.ap-south-1.compute.amazonaws.com:8081'\r\nexport const border = '1px solid rgb(219, 219, 219)'\r\n","import io from 'socket.io-client'\r\nimport { SOCKET_IO_DOMAIN } from './utils/utilVariables'\r\n\r\nexport const socket = io(SOCKET_IO_DOMAIN, {\r\n  withCredentials: true,\r\n  autoConnect: false,\r\n})\r\n","import axios from 'axios'\r\nimport produce from 'immer'\r\nimport { NavigateFunction } from 'react-router-dom'\r\nimport { socket } from '../SocketIO'\r\nimport { DOMAIN } from './utilVariables'\r\n\r\nexport const transformCloudinaryImage = (\r\n  image: string,\r\n  transformString: string\r\n) => {\r\n  const transformedImage = image\r\n    .split('/image/upload/')\r\n    .join(`/image/upload/${transformString}/`)\r\n  return transformedImage\r\n}\r\n\r\nexport const modifyInboxes = (inboxes: any[], userId: string): any[] => {\r\n  if (inboxes.length) {\r\n    const modifiedInboxes = inboxes.map((inbox: any) => {\r\n      const userExcludedFromParticipants = inbox.participants.filter(\r\n        (v: any) => v._id !== userId\r\n      )\r\n      inbox.participants = userExcludedFromParticipants\r\n      return inbox\r\n    })\r\n    return modifiedInboxes\r\n  }\r\n  return []\r\n}\r\n\r\nexport const removeDuplicates = (arr: any[]) => {\r\n  const temp: any = []\r\n  arr.forEach((v: any) => {\r\n    const idExistInTemp = temp.find((v2: any) => v2._id === v._id)\r\n    if (!idExistInTemp) {\r\n      temp.push(v)\r\n    }\r\n  })\r\n  return temp\r\n}\r\n\r\nexport const getAndSetInbox = async (\r\n  userIds: string[],\r\n  userDetails: any,\r\n  inboxes: any,\r\n  setInboxes: any,\r\n  setChats: any,\r\n  navigate: NavigateFunction,\r\n  callback?: any\r\n) => {\r\n  const doesInboxParticipantsMatchUserIds = (inbox: any) => {\r\n    const participantsUserIds = inbox.participants.map((v: any) => v._id)\r\n    console.log(participantsUserIds, userIds)\r\n\r\n    if (participantsUserIds.length !== userIds.length) return false\r\n\r\n    participantsUserIds.sort()\r\n    userIds.sort()\r\n\r\n    for (let i = 0; i < userIds.length; i++) {\r\n      if (userIds[i] !== participantsUserIds[i]) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n  // if the inbox already exist in the inboxes state... then just splice it from there\r\n  const existingInbox = inboxes.find((inbox: any) => {\r\n    return doesInboxParticipantsMatchUserIds(inbox)\r\n  })\r\n\r\n  let inboxId = existingInbox?._id\r\n  if (existingInbox) {\r\n    setInboxes((inboxes: any) => {\r\n      return produce(inboxes, (draft: any) => {\r\n        const inboxIndex = draft.findIndex((v: any) => v._id === inboxId)\r\n        draft.splice(inboxIndex, 1)\r\n        draft.unshift(existingInbox)\r\n      })\r\n    })\r\n  } else {\r\n    // get inbox and chats by userId\r\n    const response = await axios.get(`${DOMAIN}/inbox/inboxAndChatsByUserIds`, {\r\n      params: {\r\n        userIds,\r\n      },\r\n    })\r\n    const { inbox, chats: fetchedChats } = response.data\r\n    // subscribe to online status if inbox is not group\r\n    if (!inbox.group.isGroup) {\r\n      socket.emit(\r\n        'subscribe-online-status',\r\n        {\r\n          userId: userIds[0],\r\n        },\r\n        () => false\r\n      )\r\n    }\r\n    inboxId = inbox._id\r\n    setInboxes((inboxes: any) => {\r\n      return produce(inboxes, (draft: any) => {\r\n        const modifiedInbox = modifyInboxes([inbox], userDetails._id)[0]\r\n        draft.unshift(modifiedInbox)\r\n      })\r\n    })\r\n    setChats((chats: any) => {\r\n      return produce(chats, (draft: any) => {\r\n        draft.loading = false\r\n        draft[inboxId] = fetchedChats\r\n      })\r\n    })\r\n  }\r\n  navigate(`/inbox/${inboxId}`)\r\n  if (callback) {\r\n    callback()\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const UsernameWithImage = ({ image, username, className }: any) => {\r\n  return (\r\n    <StyledUsernameWithImage className={className}>\r\n      <img src={image} alt={username} />\r\n      <Username>{username}</Username>\r\n    </StyledUsernameWithImage>\r\n  )\r\n}\r\n\r\nexport const UsernameWithImageGroup = ({\r\n  image1,\r\n  image2,\r\n  imageWidth,\r\n  imageGroupContainerWidth,\r\n  groupName,\r\n  className,\r\n}: any) => {\r\n  return (\r\n    <StyledUsernameWithImage className={className}>\r\n      <Username>{groupName}</Username>\r\n    </StyledUsernameWithImage>\r\n  )\r\n}\r\n\r\nexport const NameUsernameWithImage = ({\r\n  image,\r\n  username,\r\n  name,\r\n  className,\r\n  onClick,\r\n}: any) => {\r\n  return (\r\n    <StyledUsernameWithImage className={className} onClick={onClick}>\r\n      <img src={image} alt={username} />\r\n      <Right>\r\n        <Username>{username}</Username>\r\n        <Name>{name}</Name>\r\n      </Right>\r\n    </StyledUsernameWithImage>\r\n  )\r\n}\r\n\r\nexport const ImageGroup = ({\r\n  image1,\r\n  image2,\r\n  imageWidth,\r\n  containerWidth,\r\n}: any) => {\r\n  return (\r\n    <StyledImageGroup {...{ imageWidth, containerWidth }}>\r\n      <Image1 src={image1} alt=\"\" />\r\n      <Image2 src={image2} alt=\"\" />\r\n    </StyledImageGroup>\r\n  )\r\n}\r\n\r\nconst StyledUsernameWithImage = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  > * {\r\n    margin-right: 12px;\r\n  }\r\n  img {\r\n    border-radius: 50%;\r\n  }\r\n`\r\nconst Right = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  flex-direction: column;\r\n`\r\nconst Username = styled.div`\r\n  color: rgb(38, 38, 38);\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  text-decoration: none;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`\r\nconst Name = styled.div`\r\n  color: rgb(142, 142, 142);\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`\r\nconst Image1 = styled.img``\r\nconst Image2 = styled.img``\r\nconst StyledImageGroup: any = styled.div`\r\n  position: relative;\r\n  img {\r\n    border-radius: 50%;\r\n    width: ${({ imageWidth }: any) => imageWidth};\r\n    height: ${({ imageWidth }: any) => imageWidth};\r\n  }\r\n  width: ${({ containerWidth }: any) => containerWidth};\r\n  height: ${({ containerWidth }: any) => containerWidth};\r\n  ${Image2} {\r\n    border: 2px solid #fff;\r\n    border-radius: 50%;\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n  }\r\n`\r\n","import axios from 'axios'\r\nimport { forwardRef, useEffect, useRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button } from '../atoms/Buttons/Buttons'\r\nimport { CropIcon, UploadImageVideoIcon } from '../atoms/Icons/Icons'\r\nimport { UsernameWithImage } from '../atoms/layouts/UsernameWithImage'\r\nimport { transformCloudinaryImage } from '../utils/utilFunctions'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\n\r\nconst AddPost = forwardRef(({ userDetails }: any) => {\r\n  const inputRef = useRef<any>(null)\r\n  const captionRef = useRef<any>(null)\r\n  const [files, setFiles] = useState<string[]>([])\r\n  const [headingText, setHeadingText] = useState('Create new post')\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     console.log('unmounted')\r\n  //     setFiles([])\r\n  //   }\r\n  // }, [])\r\n  useEffect(() => {\r\n    alert('PLEASE NOTE: this feature is incomplete')\r\n  }, [])\r\n  const getDataUrlsOfFiles = () => {\r\n    const blobFiles = inputRef.current.files\r\n    let tempFiles = new Array(blobFiles.length).fill('')\r\n    const readAndSetDataURLs = (file: any, index: number) => {\r\n      const reader = new FileReader()\r\n      reader.addEventListener('load', () => {\r\n        tempFiles[index] = reader.result\r\n        const imagesLoading = tempFiles.includes('')\r\n        if (!imagesLoading) {\r\n          setFiles(tempFiles)\r\n        }\r\n      })\r\n      reader.readAsDataURL(file)\r\n    }\r\n\r\n    if (blobFiles) {\r\n      for (let i = 0; i < inputRef.current.files.length; i++) {\r\n        readAndSetDataURLs(blobFiles[i], i)\r\n      }\r\n    }\r\n  }\r\n  const sharePost = async () => {\r\n    setHeadingText('Sharing')\r\n    try {\r\n      const response = await axios.post(`${DOMAIN}/createPost`, {\r\n        caption: captionRef?.current?.value,\r\n        images: files,\r\n      })\r\n      setHeadingText('Post shared')\r\n    } catch (err) {\r\n      console.log(err)\r\n      alert('Failed to share post')\r\n      setHeadingText('Create new post')\r\n    }\r\n  }\r\n  return (\r\n    <StyledAddPost>\r\n      {files.length ? (\r\n        <Head>\r\n          <Heading>{headingText}</Heading>\r\n          <button onClick={sharePost}>Share</button>\r\n        </Head>\r\n      ) : (\r\n        <Heading>{headingText}</Heading>\r\n      )}\r\n      <Body haveFiles={files.length}>\r\n        <FileInput\r\n          type=\"file\"\r\n          ref={inputRef}\r\n          // multiple\r\n          onChange={() => getDataUrlsOfFiles()}\r\n        />\r\n        {files.length ? (\r\n          <>\r\n            {files.map((v, i) => (\r\n              <>\r\n                <PostImage src={v} alt=\"\" key={i} />\r\n                <CropButton>\r\n                  <CropIcon />\r\n                </CropButton>\r\n              </>\r\n            ))}\r\n            <WriteACaption>\r\n              <UsernameWithImage\r\n                image={transformCloudinaryImage(\r\n                  userDetails.profilePicture.withVersion,\r\n                  'w_28'\r\n                )}\r\n                username={userDetails.username}\r\n              />\r\n              <textarea\r\n                ref={captionRef}\r\n                placeholder=\"Write a caption...\"\r\n              ></textarea>\r\n            </WriteACaption>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <UploadImageVideoIcon />\r\n            <p>Drag photos and videos here</p>\r\n            <Button widthAuto onClick={() => inputRef?.current?.click()}>\r\n              Select from computer\r\n            </Button>\r\n          </>\r\n        )}\r\n      </Body>\r\n    </StyledAddPost>\r\n  )\r\n})\r\n\r\nexport default AddPost\r\nconst PostImage = styled.img`\r\n  width: 523px;\r\n  height: 523px;\r\n  object-fit: cover;\r\n`\r\nconst ImageAndCaption = styled.div`\r\n  display: flex;\r\n`\r\nconst WriteACaption = styled.div`\r\n  margin: 18px 0 14px 0;\r\n  padding: 0 16px;\r\n  width: 307px;\r\n  textarea {\r\n    border: none;\r\n    font-size: 16px;\r\n    margin-top: 14px;\r\n    resize: none;\r\n    width: 100%;\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n`\r\nconst CropButton = styled.button`\r\n  background: rgba(26, 26, 26, 0.8);\r\n  border-radius: 50%;\r\n  padding: 8px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  bottom: 16px;\r\n  left: 16px;\r\n`\r\nconst FileInput = styled.input`\r\n  display: hidden;\r\n  position: absolute;\r\n  left: -10000px;\r\n`\r\nconst Head = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  button {\r\n    position: absolute;\r\n    right: 16px;\r\n    color: rgba(0, 149, 246, 1);\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n  }\r\n`\r\nconst StyledAddPost = styled.div`\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  overflow: hidden;\r\n`\r\nconst Heading = styled.div`\r\n  border-bottom: 1px solid rgba(219, 219, 219, 1);\r\n  color: rgb(38, 38, 38);\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  padding: 10px 0;\r\n`\r\nconst Body = styled.div<any>`\r\n  box-sizing: border-box;\r\n  font-size: 22px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: ${({ haveFiles }) => (haveFiles ? 'flex-start' : 'center')};\r\n  flex-direction: ${({ haveFiles }) => (haveFiles ? 'row' : 'column')};\r\n  width: ${({ haveFiles }) => (haveFiles ? 'auto' : '523px')};\r\n  height: ${({ haveFiles }) => (haveFiles ? 'auto' : '523px')};\r\n  /* height: 71vh; */\r\n  font-weight: 300;\r\n  padding: ${({ haveFiles }) => (haveFiles ? '0' : '0 24px')};\r\n  p {\r\n    margin-top: 9px;\r\n    margin-bottom: 24px;\r\n  }\r\n`\r\n","import { Modal } from '@mui/material'\r\nimport axios from 'axios'\r\nimport { useState } from 'react'\r\nimport { Link, NavLink, useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport Backdrop from '../atoms/Backdrop/Backdrop'\r\nimport { Container } from '../atoms/Boxes/Container'\r\nimport { Button, Button2 } from '../atoms/Buttons/Buttons'\r\nimport {\r\n  AddPostIcon,\r\n  DirectMessageIcon,\r\n  DirectMessageIconActive,\r\n  HomeIcon,\r\n  HomeIconActive,\r\n  ProfileImg,\r\n} from '../atoms/Icons/Icons'\r\nimport Logo from '../atoms/IconsAndImages/Logo'\r\nimport { LinkText } from '../atoms/Text/Texts'\r\nimport { socket } from '../SocketIO'\r\nimport { transformCloudinaryImage } from '../utils/utilFunctions'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\nimport AddPost from './AddPost'\r\n\r\nconst Navbar = ({ userDetails, emptyAllStates }: any) => {\r\n  const [modalHidden, setModalHidden] = useState(true)\r\n  const [addPostModalOpen, setAddPostModalOpen] = useState(false)\r\n  return (\r\n    <StyledNavbar>\r\n      <StyledContainer>\r\n        <Logo />\r\n        <Right>\r\n          <ul>\r\n            {!userDetails ? (\r\n              <>\r\n                <li>\r\n                  <Link to=\"/accounts/login\">\r\n                    <Button widthAuto>Log In</Button>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/accounts/signup\">\r\n                    <Button2>Sign Up</Button2>\r\n                  </Link>\r\n                </li>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <li>\r\n                  <NavLink to=\"/\">\r\n                    {({ isActive }) =>\r\n                      isActive ? <HomeIconActive /> : <HomeIcon />\r\n                    }\r\n                  </NavLink>\r\n                </li>\r\n                <li>\r\n                  <NavLink to=\"/inbox\">\r\n                    {({ isActive }) =>\r\n                      isActive ? (\r\n                        <DirectMessageIconActive />\r\n                      ) : (\r\n                        <DirectMessageIcon />\r\n                      )\r\n                    }\r\n                  </NavLink>\r\n                </li>\r\n                <li>\r\n                  <button\r\n                    onClick={() => setAddPostModalOpen((state) => !state)}\r\n                  >\r\n                    <AddPostIcon />\r\n                  </button>\r\n                </li>\r\n                <ModalButtonWrapper\r\n                  as=\"li\"\r\n                  className=\"modal-button\"\r\n                  active={modalHidden}\r\n                >\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setModalHidden((state) => !state)}\r\n                  >\r\n                    <ProfileImg\r\n                      src={transformCloudinaryImage(\r\n                        userDetails.profilePicture.withVersion,\r\n                        'w_24'\r\n                      )}\r\n                    />\r\n                  </button>\r\n                  <ProfilePopOver\r\n                    hidden={modalHidden}\r\n                    {...{ userDetails, emptyAllStates }}\r\n                  />\r\n                </ModalButtonWrapper>\r\n              </>\r\n            )}\r\n            {/* <li>Explore</li>\r\n          <li>notifications</li> */}\r\n          </ul>\r\n        </Right>\r\n      </StyledContainer>\r\n      {/* {addPostModalOpen && ( */}\r\n      {/* //{' '}\r\n      <Backdrop close={() => setAddPostModalOpen(false)}>\r\n        // <AddPost userDetails={userDetails} />\r\n        //{' '} */}\r\n      {/* </Backdrop> */}\r\n      <Modal\r\n        open={addPostModalOpen}\r\n        // open={true}\r\n        onClose={() => setAddPostModalOpen(false)}\r\n      >\r\n        <AddPost userDetails={userDetails} />\r\n      </Modal>\r\n      {/* )} */}\r\n    </StyledNavbar>\r\n  )\r\n}\r\n\r\nexport default Navbar\r\nconst ModalButtonWrapper = styled.li<any>`\r\n  > button {\r\n    border: ${({ active }) => (active ? '1px solid #fff' : '1px solid #000')};\r\n  }\r\n`\r\nconst StyledNavbar = styled.nav`\r\n  background: #fff;\r\n  border-bottom: 1px solid rgb(219, 219, 219);\r\n  /* grid-area: navbar; */\r\n`\r\nconst StyledContainer = styled(Container)`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 20px;\r\n  .logo {\r\n    height: 29px;\r\n  }\r\n`\r\nconst Right = styled.div`\r\n  ul {\r\n    display: flex;\r\n    align-items: center;\r\n    li {\r\n      margin-left: 22px;\r\n    }\r\n  }\r\n  .modal-button {\r\n    position: relative;\r\n    > button {\r\n      border-radius: 50%;\r\n      width: 24px;\r\n      height: 24px;\r\n    }\r\n  }\r\n`\r\n\r\nconst ProfilePopOver = ({ hidden, userDetails, emptyAllStates }: any) => {\r\n  const navigate = useNavigate()\r\n  const logout = async (e: any) => {\r\n    e.preventDefault()\r\n    try {\r\n      await axios.get(`${DOMAIN}/logout`)\r\n      emptyAllStates()\r\n      socket.disconnect()\r\n      navigate('/')\r\n    } catch (err) {\r\n      console.error(err)\r\n      alert('failed to logout')\r\n    }\r\n  }\r\n  return (\r\n    <Card hidden={hidden}>\r\n      <div className=\"arrow\"></div>\r\n      <ul>\r\n        <li>\r\n          <Link to={`/${userDetails.username}`}>Profile</Link>\r\n        </li>\r\n        <li className=\"logout\">\r\n          <button onClick={logout}>Log Out</button>\r\n        </li>\r\n      </ul>\r\n    </Card>\r\n  )\r\n}\r\n\r\nconst Card = styled.div`\r\n  display: ${({ hidden }) => (hidden ? 'none' : 'block')};\r\n  width: 230px;\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 34px;\r\n  right: -30px;\r\n  box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975);\r\n  border-radius: 6px;\r\n  background: #ffffff;\r\n  z-index: 3;\r\n  .arrow {\r\n    /* box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.0975); */\r\n    width: 14px;\r\n    height: 14px;\r\n    position: absolute;\r\n    background: #fff;\r\n    top: -6px;\r\n    right: 34px;\r\n    transform: rotate(45deg);\r\n    z-index: 1;\r\n  }\r\n  ul {\r\n    display: flex;\r\n    flex-flow: column;\r\n    li {\r\n      box-sizing: border-box;\r\n      margin-left: 0;\r\n      padding: 8px 16px;\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  .logout {\r\n    border-top: 1px solid rgb(219, 219, 219);\r\n  }\r\n`\r\n","import React from 'react'\nimport styled from 'styled-components'\nimport './App.css'\nimport { Outlet } from 'react-router-dom'\nimport Navbar from './molecules/Navbar'\n//@ts-ignore\nconst App: any = ({ userDetails, setUserDetails, emptyAllStates }) => {\n  return (\n    <StyledApp>\n      {/* <div className=\"nav\">home</div>\n      <div className=\"main\">\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui tenetur\n        animi illo harum quia accusantium quas eum? At quisquam doloribus\n        voluptatem excepturi harum dolor porro quibusdam fugiat eligendi non,\n        numquam nam, temporibus quidem! Provident deserunt aliquid explicabo ea\n        illum perferendis sequi suscipit itaque dolorum quasi. Nihil rem natus\n        eos hic! lorem1000\n      </div> */}\n      <Navbar {...{ userDetails, setUserDetails, emptyAllStates }} />\n      <UserData>\n        <h1>{userDetails.username}</h1>\n        <p>{userDetails._id}</p>\n      </UserData>\n      <Outlet />\n    </StyledApp>\n  )\n}\n\nexport default App\n\nconst StyledApp = styled.div`\n  height: 100vh;\n  overflow-y: scroll;\n  display: grid;\n  grid-template-rows: auto 1fr;\n  .main {\n    background: tomato;\n  }\n`\nconst UserData = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n`\n\nexport const Or: React.FC = () => {\n  return (\n    <Wrapper>\n      <Line></Line>\n      <OrText>OR</OrText>\n      <Line></Line>\n    </Wrapper>\n  )\n}\nconst Line = styled.div`\n  border-top: 1px solid rgb(219, 219, 219);\n  width: 100%;\n`\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 10px 0 18px;\n`\nconst OrText = styled.div`\n  font-size: 13px;\n  font-weight: 600;\n  margin: 0 18px;\n  color: rgb(142, 142, 142);\n`\n","import styled from 'styled-components'\r\n\r\nexport const BorderedBox = styled.div`\r\n  background: #fff;\r\n  border: 1px solid rgb(219, 219, 219);\r\n  box-sizing: border-box;\r\n  padding: 25px 40px;\r\n`\r\n","import { useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\n//@ts-ignore\r\nconst Input: any = ({ label, name, type, values, required }) => {\r\n  const [value, setValue] = useState('')\r\n  return (\r\n    <InputBox className=\"input-box\">\r\n      <Label inputValue={value}>{label}</Label>\r\n      <StyledInput\r\n        value={value}\r\n        type={type || 'text'}\r\n        required={required}\r\n        onChange={(e) => {\r\n          setValue(e.target.value)\r\n          values.current[name] = e.target.value\r\n        }}\r\n      />\r\n    </InputBox>\r\n  )\r\n}\r\n\r\nexport default Input\r\n\r\nconst InputBox = styled.div`\r\n  position: relative;\r\n`\r\nconst Label = styled.label<{ inputValue: string }>`\r\n  color: rgb(142, 142, 142);\r\n  font-size: 12px;\r\n  left: 9px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  transition: 0.1s ease-out;\r\n  ${({ inputValue }) =>\r\n    inputValue &&\r\n    `\r\n    color: rgb(142, 142, 142);\r\n    top: 27%;\r\n    font-size: 10px;\r\n  `}\r\n`\r\nconst StyledInput = styled.input`\r\n  background-color: #fafafa;\r\n  border: 1px solid rgb(219, 219, 219);\r\n  &:focus {\r\n    border: 1px solid rgb(0, 0, 0);\r\n  }\r\n  border-radius: 3px;\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  line-height: 18px;\r\n  outline: none;\r\n  padding: ${({ value }) => (value ? '15px 0 3px 8px' : '10px 0 8px 8px')};\r\n  width: 100%;\r\n`\r\n","import { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\n\r\nexport const SubHeading = styled.div`\r\n  color: rgb(142, 142, 142);\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  margin-bottom: 10px;\r\n  text-align: center;\r\n`\r\nexport const LinkText = styled(Link)<any>`\r\n  color: #0095f6;\r\n  font-size: inherit;\r\n  font-weight: ${({ $bold }) => ($bold ? 'bold' : 'normal')};\r\n`\r\n\r\nexport const Text1 = styled.p`\r\n  color: rgb(38, 38, 38);\r\n  font-size: 14px;\r\n  margin: 0;\r\n  text-align: center;\r\n`\r\n","import axios from 'axios'\r\nimport { useRef } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { Or } from '../App'\r\nimport { BorderedBox } from '../atoms/Boxes/Boxes'\r\nimport { Button } from '../atoms/Buttons/Buttons'\r\nimport Logo from '../atoms/IconsAndImages/Logo'\r\nimport Input from '../atoms/Input/Input'\r\nimport { LinkText, Text1 } from '../atoms/Text/Texts'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\n\r\n//@ts-ignore\r\nconst LoginForm = ({ setUserDetails }) => {\r\n  const loginFormValues = useRef({\r\n    usernameOrEmail: '',\r\n    password: '',\r\n    email: '',\r\n    username: '',\r\n  })\r\n  const navigate = useNavigate()\r\n  const location: any = useLocation()\r\n  const from = location.state?.from?.pathname || '/'\r\n\r\n  const login = async (e: any) => {\r\n    e.preventDefault()\r\n    try {\r\n      if (loginFormValues.current.usernameOrEmail.indexOf('@') !== -1) {\r\n        loginFormValues.current.email = loginFormValues.current.usernameOrEmail\r\n      } else {\r\n        loginFormValues.current.username =\r\n          loginFormValues.current.usernameOrEmail\r\n      }\r\n      const response = await axios.post(\r\n        `${DOMAIN}/login`,\r\n        loginFormValues.current\r\n      )\r\n      if (response.data._id) {\r\n        setUserDetails(response.data)\r\n        // console.log('from', from)\r\n        // navigate(from, { replace: true })\r\n        navigate('/inbox', { replace: true })\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n      alert('invalid credentials')\r\n    }\r\n  }\r\n  return (\r\n    <LoginPage>\r\n      <StyledBorderedBox>\r\n        <Logo />\r\n        <StyledLoginForm>\r\n          <Input\r\n            label=\"Username or email\"\r\n            name=\"usernameOrEmail\"\r\n            values={loginFormValues}\r\n          />\r\n          <Input label=\"Password\" name=\"password\" values={loginFormValues} />\r\n          <Button onClick={login}>Log in</Button>\r\n        </StyledLoginForm>\r\n        <Or />\r\n      </StyledBorderedBox>\r\n      {/* <Button>facebook logo Log in with Facebook</Button> */}\r\n      <StyledBorderedBox>\r\n        <Text1>\r\n          Don't have an account?{' '}\r\n          <LinkText to=\"/accounts/signup\" $bold>\r\n            Sign up\r\n          </LinkText>\r\n        </Text1>\r\n      </StyledBorderedBox>\r\n    </LoginPage>\r\n  )\r\n}\r\n\r\nexport default LoginForm\r\n\r\nconst LoginPage = styled.div`\r\n  margin-top: 33px;\r\n`\r\n\r\nconst StyledBorderedBox = styled(BorderedBox)`\r\n  max-width: 350px;\r\n  margin: 0 auto 10px;\r\n  .logo {\r\n    margin-top: 21px;\r\n    margin-bottom: 12px;\r\n  }\r\n`\r\n\r\nconst StyledLoginForm = styled.form`\r\n  .input-box {\r\n    margin-bottom: 6px;\r\n  }\r\n  button {\r\n    margin: 14px 0;\r\n  }\r\n`\r\n","import pending from './../../images/pending2.png'\r\nimport sent from './../../images/sent3.png'\r\nimport delivered from './../../images/delivered.png'\r\nimport seen from './../../images/seen.png'\r\n\r\nexport const PendingIcon = () => <img src={pending} alt=\"pending\" />\r\nexport const SentIcon = () => <img src={sent} alt=\"sent\" />\r\nexport const DeliveredIcon = () => <img src={delivered} alt=\"delivered\" />\r\nexport const SeenIcon = () => <img src={seen} alt=\"seen\" />\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAHYAAAB2AU57JggAAAAHdElNRQfmBxsLCxW7jYxwAAAAuklEQVQY0zXNsUrDUACF4S+JKDjHzaHeCiIEqs5uQpZgXaXgM/Uh4hMo3fIATqJQEAdNcVFpRAq61g69nun85x9OAvoqhRydqYkXEpy4MtNoEZzpqd3TN3YOSiUYGgsbKjO3YNc6N4IqVWjisLSMrVGkcm3EP9sS0MpTIvBo4PSfUp29KB7ULh0j6DI9++6ievOhszDymflS2vIc1buFoSPXmW9zFw79+LXpwMhA7Wl9FVQKO5ibmnhlBdj1MDv8krZgAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDExOjExOjE3KzAwOjAwJu/+lgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QxMToxMToxNyswMDowMFeyRioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAQAAAD8fJRsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAG8AAABvAfGi3EMAAAAHdElNRQfmBxsLByhPUI9tAAAAgklEQVQY023PPw7BcAAF4E/bSAykIf5UJ4lbWNicoWp0LCS9hAM4QjeD0RkMIoZGBL83fi95ySOcqBXkiVmoyBU6UYC3hk7JD0+VBip1pOtTZjbGKjWxnbabJzKl3EENiUghdjZSyu0bJnbRt9SzMnJ8M7G7q9Tao9n+TmphLnj2D19sRxWmuewhVAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wNy0yN1QxMTowNzozNSswMDowMD/FR0UAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDctMjdUMTE6MDc6MzUrMDA6MDBOmP/5AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAB2AAAAdgFOeyYIAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAHxJREFUOI1jYBgFpAB7BgaGyVC2EAMDwwYGBgYBYjXbMDAwvGRgYHCCajrFwMDQQzXNHAwMDNFI/CCoExkYGBgcoJodoGJnGRgYutBt4ECTqGZgYMghVjMMwJzWi8fZvdi1IgDMluVINucSshmbIRsYIFEG804jsZpHKgAAsxUalSAPDrEAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABCFBMVEUAAAAAfM0AeskAe8sAh98AhNoAm/8ASnwAht4AlvcAq/8AkO0Af9MArf8Al/kAjekAjusAc74AlPQAYJ4AlfcAfMwAXpwAnP8AjOcAesoAfM4Afc8Aaq8Afc8AftAAe8wAftAAbbQAkO0Aj+wAdsMAjeoAkO4AieIAaq8AkO4Ak/MAkO0Ai+YAk/IAkvEAh98Ak/MAk/IAkvEAieMAh+AAjekAiuQAd8YAjOcAjOcAITYAieIAkvEAhdwAkO0AjekAj+wAjekAht0AjuoAj+wAjegAk/IAk/IAk/MAjuoAjuoAk/IAjekAkfAAkO0AftAAkO4Ake8AiuMAe8sAa7EAe8sAecj///+3ca+WAAAAV3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw4BDQYCcakLNblFAnHqbjjUsRrp07IZLXkaCXI1AS/SI6KNcTUthHA10tXkhZTbNsBvEaSpGQ0DCgrAeFs8AAAAAWJLR0RXfQrZHwAAAAd0SU1FB+YHGwk7A5Ob27wAAACXSURBVBjTY2AgHjAyMjIxMzLC+SysMrJybPIKcD6LopKyiqqaOgM7GHCwaGhqaevo6ukzcHJx8/DysWpoGmjrGBoZ8zOYmJqZW1haQfkCnAzWNnq2dvYOML4gg5Cjrp6Ts4ELjM8gLOLq5u7h6eUN5TOICov4+Pr5BwQGQfhAETHx4BDW0DAJKJ+BQRLoYClGRmlBIv0IAP46FNQ6Zj0/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTI3VDA5OjU4OjQ5KzAwOjAwtfDh/AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0yN1QwOTo1ODo0OSswMDowMMStWUAAAAAASUVORK5CYII=\"","import styled from 'styled-components'\r\nimport {\r\n  DeliveredIcon,\r\n  PendingIcon,\r\n  SeenIcon,\r\n  SentIcon,\r\n} from '../IconsAndImages/ReadReceipts'\r\n\r\n// TODO: make it messageStatus\r\nconst MessageStatus = ({ messageStatus, className }: any) => {\r\n  return (\r\n    <StyledMessageStatus {...{ className }}>\r\n      {messageStatus === 'pending' ? (\r\n        <PendingIcon />\r\n      ) : messageStatus === 'sent' ? (\r\n        <SentIcon />\r\n      ) : messageStatus === 'delivered' ? (\r\n        <DeliveredIcon />\r\n      ) : messageStatus === 'seen' ? (\r\n        <SeenIcon />\r\n      ) : (\r\n        'unknown'\r\n      )}\r\n    </StyledMessageStatus>\r\n  )\r\n}\r\nexport default MessageStatus\r\nconst StyledMessageStatus = styled.div`\r\n  width: 16px;\r\n`\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\n\r\n// TODO: learn forward ref\r\nconst SendMessageBox = ({ sendMessage, messageInputRef }: any) => {\r\n  const params = useParams()\r\n  const [inputValue, setInputValue] = useState('')\r\n  const submitButtonRef = useRef<any>()\r\n  const pressed = (e: any) => {\r\n    // Has the enter key been pressed?\r\n    if (e.which === 13) {\r\n      e.preventDefault()\r\n      // If it has been so, manually submit the <form>\r\n      submitButtonRef.current.click()\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    // textarea auto grow\r\n    messageInputRef.current.style.height = '20px'\r\n    messageInputRef.current.style.height =\r\n      messageInputRef.current.scrollHeight + 'px'\r\n  }, [inputValue, messageInputRef])\r\n  return (\r\n    <StyledSendMessageBox>\r\n      <SendMessageForm\r\n        onSubmit={(e: any) => {\r\n          sendMessage(e, params.inboxId)\r\n          setInputValue('')\r\n        }}\r\n      >\r\n        <SendMessageTextarea\r\n          placeholder=\"Message...\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          ref={messageInputRef}\r\n          onKeyDown={pressed}\r\n        />\r\n        <SendMessageButton ref={submitButtonRef} disabled={!inputValue}>\r\n          Send\r\n        </SendMessageButton>\r\n      </SendMessageForm>\r\n    </StyledSendMessageBox>\r\n  )\r\n}\r\n\r\nexport default SendMessageBox\r\n\r\nconst StyledSendMessageBox = styled.div`\r\n  grid-area: sendMessageBox;\r\n  padding: 20px;\r\n`\r\nconst SendMessageForm = styled.form`\r\n  border: 1px solid rgb(219, 219, 219);\r\n  border-radius: 22px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px 14px;\r\n  width: 100%;\r\n`\r\nconst SendMessageButton = styled.button`\r\n  color: rgb(0, 149, 246);\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n`\r\nconst SendMessageTextarea = styled.textarea`\r\n  border: none;\r\n  outline: none;\r\n  resize: none;\r\n  height: 20px;\r\n  max-height: 100px !important;\r\n  overflow-y: auto;\r\n  font-size: 14px;\r\n  width: 100%;\r\n  padding: 0 12px 0 0;\r\n`\r\n","import axios from 'axios'\r\nimport produce from 'immer'\r\nimport { useCallback, useEffect, useMemo, useRef } from 'react'\r\nimport { Link, Navigate, useNavigate, useParams } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\n\r\nimport { flushSync } from 'react-dom'\r\nimport {\r\n  ImageGroup,\r\n  UsernameWithImage,\r\n  UsernameWithImageGroup,\r\n} from '../atoms/layouts/UsernameWithImage'\r\nimport MessageStatus from '../atoms/MessageStatus/MessageStatus'\r\nimport { socket } from '../SocketIO'\r\nimport { modifyInboxes, transformCloudinaryImage } from '../utils/utilFunctions'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\nimport SendMessageBox from './SendMessageBox'\r\nimport { Button } from '../atoms/Buttons/Buttons'\r\nimport { DirectMessageIconCircled } from '../atoms/Icons/Icons'\r\n\r\nconst ChatBox = ({\r\n  chats,\r\n  inboxAndParticipantData,\r\n  setChats,\r\n  userDetails,\r\n  inboxes,\r\n  setInboxes,\r\n  setModalOpen,\r\n}: any) => {\r\n  const messageInputRef = useRef<any>()\r\n  const chatsRef = useRef<any>()\r\n\r\n  const params = useParams()\r\n  const navigate = useNavigate()\r\n\r\n  const onlineStatusSub = useCallback(\r\n    (modifiedInbox: any) => {\r\n      // subscribe to online status if it's a new inbox\r\n      if (modifiedInbox.participants.length !== 1) return\r\n      const inbox = inboxes.find((v: any) => v._id === modifiedInbox._id)\r\n      if (!inbox) {\r\n        socket.emit(\r\n          'subscribe-online-status',\r\n          {\r\n            userId: modifiedInbox.participants[0]._id,\r\n          },\r\n          ({ online }: any) => {\r\n            setInboxes((inboxes: any) => {\r\n              return produce(inboxes, (draft: any) => {\r\n                const inboxIndex = inboxes.findIndex(\r\n                  (v: any) => v._id === modifiedInbox._id\r\n                )\r\n                if (inboxIndex === -1) {\r\n                  console.error('BUG:', 'no index found')\r\n                  return\r\n                }\r\n                draft[inboxIndex].participants[0].online = online\r\n              })\r\n            })\r\n          }\r\n        )\r\n      }\r\n    },\r\n    [inboxes, setInboxes]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (!params.inboxId) return\r\n    socket.emit('message-seen-all', { inboxId: params.inboxId })\r\n  }, [params.inboxId])\r\n  useEffect(() => {\r\n    // TODO: use useCallback hook\r\n    socket.off('notLoggedIn')\r\n    socket.on('notLoggedIn', () => {\r\n      alert('not logged In')\r\n    })\r\n\r\n    socket.off('message')\r\n    socket.on('message', (data: any) => {\r\n      const { chat, inbox } = data\r\n      // message delivered/seen emit:\r\n      // - don't emit if it's a group\r\n      // - don't emit if it's sent by the user itself\r\n      // TODO: use group.isGroup instead of participants.length\r\n      if (inbox.participants.length === 2 && chat.sentBy !== userDetails._id) {\r\n        if (params.inboxId === inbox._id) {\r\n          socket.emit('message-seen', {\r\n            chat: chat,\r\n            inbox: inbox,\r\n          })\r\n        } else {\r\n          socket.emit('message-delivered', {\r\n            chat: chat,\r\n            inbox: inbox,\r\n          })\r\n        }\r\n      }\r\n\r\n      // update chats of the inboxId/sentTo if fetched already\r\n      setChats((chats: any) => {\r\n        return produce(chats, (draft: any) => {\r\n          draft[chat.sentTo]?.push(chat)\r\n        })\r\n      })\r\n      // scroll to bottom only if this inbox(inbox._id) is opened\r\n      if (chatsRef.current && params.inboxId === inbox._id) {\r\n        chatsRef.current.scrollTo(0, chatsRef.current.scrollHeight)\r\n      }\r\n      // update inbox's lastActivity and put the inbox on top\r\n      const modifiedInbox: {} = modifyInboxes([inbox], userDetails._id)[0]\r\n      onlineStatusSub(modifiedInbox)\r\n      setInboxes((inboxes: any) => {\r\n        return produce(inboxes, (draft: any) => {\r\n          const inboxIndex = draft.findIndex((v: any) => v._id === chat.sentTo)\r\n          if (inboxIndex === -1) {\r\n            draft.unshift(modifiedInbox)\r\n            return\r\n          }\r\n          draft[inboxIndex].lastActivity = inbox.lastActivity\r\n          const updatedInbox = draft.splice(inboxIndex, 1)\r\n          draft.unshift(updatedInbox[0])\r\n        })\r\n      })\r\n    })\r\n\r\n    socket.off('message-delivered')\r\n    socket.on('message-delivered', (data: any) => {\r\n      setChats((chats: any) => {\r\n        return produce(chats, (draft: any) => {\r\n          draft[data.chat.sentTo]?.every((v: any) => {\r\n            if (data.chat._id === v._id) {\r\n              v.messageStatus = 'delivered'\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n        })\r\n      })\r\n      setInboxes((inboxes: any) => {\r\n        return produce(inboxes, (draft: any) => {\r\n          draft.every((v: any) => {\r\n            if (v._id === data.chat.sentTo) {\r\n              if (\r\n                v.lastActivity.chat_id === data.chat._id &&\r\n                v.lastActivity.messageStatus === 'sent'\r\n              ) {\r\n                v.lastActivity.messageStatus = 'delivered'\r\n              }\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n        })\r\n      })\r\n    })\r\n\r\n    socket.off('message-seen')\r\n    socket.on('message-seen', (data: any) => {\r\n      setChats((chats: any) => {\r\n        return produce(chats, (draft: any) => {\r\n          draft[data.chat.sentTo]?.every((v: any) => {\r\n            if (data.chat._id === v._id) {\r\n              v.messageStatus = 'seen'\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n        })\r\n      })\r\n      setInboxes((inboxes: any) => {\r\n        return produce(inboxes, (draft: any) => {\r\n          draft.every((v: any) => {\r\n            if (v._id === data.chat.sentTo) {\r\n              if (\r\n                v.lastActivity.chat_id === data.chat._id &&\r\n                v.lastActivity.messageStatus !== 'seen'\r\n              ) {\r\n                v.lastActivity.messageStatus = 'seen'\r\n              }\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n        })\r\n      })\r\n    })\r\n\r\n    socket.off('message-seen-all')\r\n    socket.on('message-seen-all', (data: any) => {\r\n      const { inboxId } = data\r\n      setChats((chats: any) => {\r\n        return produce(chats, (draft: any) => {\r\n          draft[inboxId]?.forEach((v: any) => {\r\n            if (v.messageStatus === 'delivered') {\r\n              v.messageStatus = 'seen'\r\n            }\r\n          })\r\n        })\r\n      })\r\n      setInboxes((inboxes: any) => {\r\n        return produce(inboxes, (draft: any) => {\r\n          draft.every((inbox: any) => {\r\n            if (inbox._id === inboxId) {\r\n              if (inbox.lastActivity.messageStatus === 'delivered') {\r\n                inbox.lastActivity.messageStatus = 'seen'\r\n              }\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n        })\r\n      })\r\n    })\r\n\r\n    socket.off('error')\r\n    socket.on('error', (error: any) => {\r\n      console.error(error)\r\n    })\r\n  }, [userDetails._id, params.inboxId, setChats, setInboxes, onlineStatusSub])\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      if (!params.inboxId) return\r\n      if (chats[params.inboxId]) return\r\n      try {\r\n        const fetchedChats = await axios.get(`${DOMAIN}/chat/${params.inboxId}`)\r\n        if (fetchedChats.data.length === 0) {\r\n          navigate('/inbox')\r\n          return\r\n        }\r\n        setChats((chats: any) => {\r\n          return produce(chats, (draft: any) => {\r\n            draft[fetchedChats.data[0].sentTo] = fetchedChats.data\r\n          })\r\n        })\r\n        // scroll to bottom\r\n        if (\r\n          chatsRef.current &&\r\n          fetchedChats.data[0].sentTo === params.inboxId\r\n        ) {\r\n          chatsRef.current.scrollTo(0, chatsRef.current.scrollHeight)\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n        navigate('/inbox')\r\n      }\r\n    })()\r\n  }, [params.inboxId, chats, setChats, navigate])\r\n\r\n  useEffect(() => {\r\n    // chatBox scrolled to bottom every time user opens another inbox\r\n    if (chatsRef.current) {\r\n      chatsRef.current.scrollTo(0, chatsRef.current.scrollHeight)\r\n    }\r\n  }, [params.inboxId])\r\n  const sendMessage = (e: React.FormEvent<HTMLFormElement>, inboxId: any) => {\r\n    e.preventDefault()\r\n    const message = messageInputRef.current.value\r\n    if (message.trim() === '') return\r\n    const randomNumber = Math.floor(Math.random() * 8999999 + 1000000)\r\n    let tempChatId = 'temp-' + randomNumber\r\n    flushSync(() => {\r\n      setChats((chats: any) => {\r\n        return produce(chats, (draft: any) => {\r\n          const messageObj = {\r\n            _id: tempChatId,\r\n            sentBy: userDetails._id,\r\n            sentTo: inboxId,\r\n            message,\r\n            messageStatus: 'pending',\r\n          }\r\n          draft[inboxId].push(messageObj)\r\n        })\r\n      })\r\n    })\r\n    // scroll chatbox to bottom when user is sending a message\r\n    if (chatsRef.current) {\r\n      chatsRef.current.scrollTo(0, chatsRef.current.scrollHeight)\r\n    }\r\n\r\n    // update the inbox's lastActivity and put it on top\r\n    setInboxes((inboxes: any) => {\r\n      return produce(inboxes, (draft: any) => {\r\n        const inboxLastActivityObj = {\r\n          chat_id: tempChatId,\r\n          message,\r\n          // TODO: use Enums in message status and maybe and timestamp property\r\n          messageStatus: 'pending',\r\n          sentBy: userDetails._id,\r\n        }\r\n        const inboxIndex = draft.findIndex((v: any) => v._id === inboxId)\r\n        draft[inboxIndex].lastActivity = inboxLastActivityObj\r\n        const updatedInbox = draft.splice(inboxIndex, 1)\r\n        draft.unshift(updatedInbox[0])\r\n      })\r\n    })\r\n    socket.emit(\r\n      'message',\r\n      {\r\n        message,\r\n        inboxId,\r\n        tempChatId,\r\n      },\r\n      (response: any) => {\r\n        if (response.status === 'ok') {\r\n          const { chat, inbox } = response\r\n          // update chat _id and messageStatus\r\n          setChats((chats: any) => {\r\n            return produce(chats, (draft: any) => {\r\n              draft[chat.sentTo].every((chat: any) => {\r\n                if (chat._id === response.chat.tempChatId) {\r\n                  chat._id = response.chat._id\r\n                  chat.messageStatus = 'sent'\r\n                  return false\r\n                }\r\n                return true\r\n              })\r\n            })\r\n          })\r\n          // update last activities in inbox\r\n          setInboxes((inboxes: any) => {\r\n            return produce(inboxes, (draft: any) => {\r\n              const inboxIndex = draft.findIndex(\r\n                (v: any) => v._id === chat.sentTo\r\n              )\r\n              // if the response is coming from the last sent message, update inbox's lastActivity\r\n              if (draft[inboxIndex].lastActivity.chat_id !== chat.tempChatId)\r\n                return\r\n\r\n              draft[inboxIndex].lastActivity = inbox.lastActivity\r\n            })\r\n          })\r\n        }\r\n        if (response.status === 'error') {\r\n          console.error('failed to send message')\r\n        }\r\n      }\r\n    )\r\n\r\n    messageInputRef.current.value = ''\r\n  }\r\n\r\n  const firstParticipant =\r\n    inboxAndParticipantData.participantData?.[\r\n      Object.keys(inboxAndParticipantData.participantData)[0]\r\n    ]\r\n  const secondParticipant =\r\n    inboxAndParticipantData.participantData?.[\r\n      Object.keys(inboxAndParticipantData.participantData)[1]\r\n    ]\r\n  const isGroup = inboxAndParticipantData.inboxData?.group.isGroup\r\n\r\n  return (\r\n    <>\r\n      {params.inboxId === undefined ? (\r\n        <NoActiveChatBox>\r\n          <DirectMessageIconCircled />\r\n          <h1>Your Messages</h1>\r\n          <p>Send private messages to a friend or group.</p>\r\n          <Button widthAuto onClick={() => setModalOpen(true)}>\r\n            Send Message\r\n          </Button>\r\n        </NoActiveChatBox>\r\n      ) : chats[params.inboxId] === undefined ? (\r\n        <h3>Loading...</h3>\r\n      ) : (\r\n        <>\r\n          <Heading>\r\n            {firstParticipant ? (\r\n              <>\r\n                {isGroup ? (\r\n                  <button\r\n                    onClick={() => {\r\n                      const arr: any = []\r\n                      Object.keys(\r\n                        inboxAndParticipantData.participantData\r\n                      ).forEach((v) => {\r\n                        arr.push(\r\n                          inboxAndParticipantData.participantData[v].username\r\n                        )\r\n                      })\r\n                      alert(arr.join('\\n'))\r\n                    }}\r\n                  >\r\n                    <UsernameWithImageGroup\r\n                      // image1={firstParticipant?.profilePicture}\r\n                      // image2={secondParticipant?.profilePicture}\r\n                      // imageWidth=\"20px\"\r\n                      // imageGroupContainerWidth=\"32px\"\r\n                      groupName={\r\n                        inboxAndParticipantData.inboxData.group.groupName\r\n                      }\r\n                    />\r\n                  </button>\r\n                ) : (\r\n                  <Link to={'/' + firstParticipant?.username}>\r\n                    <UsernameWithImage\r\n                      image={transformCloudinaryImage(\r\n                        firstParticipant.profilePicture,\r\n                        'w_24'\r\n                      )}\r\n                      username={firstParticipant.name}\r\n                    />\r\n                  </Link>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <div>Loading...</div>\r\n            )}\r\n          </Heading>\r\n\r\n          <ChatsWrapper ref={chatsRef}>\r\n            <Chats>\r\n              {chats[params.inboxId].map((chat: any, i: number) => {\r\n                const chatSentByUser =\r\n                  chat.sentBy === userDetails._id ? true : false\r\n                const chatsArr = chats[params.inboxId || 0]\r\n                return (\r\n                  <Chat key={chat._id} {...{ chatSentByUser }}>\r\n                    {!chatSentByUser && (\r\n                      <>\r\n                        {chatsArr[i + 1]?.sentBy !== chat.sentBy ? (\r\n                          <Link\r\n                            to={\r\n                              '/' +\r\n                              inboxAndParticipantData.participantData[\r\n                                chat.sentBy\r\n                              ]?.username\r\n                            }\r\n                          >\r\n                            <img\r\n                              className=\"profile-pic\"\r\n                              src={\r\n                                inboxAndParticipantData.participantData?.[\r\n                                  chat.sentBy\r\n                                ]?.profilePicture\r\n                                  ? transformCloudinaryImage(\r\n                                      inboxAndParticipantData.participantData?.[\r\n                                        chat.sentBy\r\n                                      ]?.profilePicture,\r\n                                      'w_24'\r\n                                    )\r\n                                  : ''\r\n                              }\r\n                              alt={\r\n                                inboxAndParticipantData.participantData?.[\r\n                                  chat.sentBy\r\n                                ]?.name\r\n                              }\r\n                            />\r\n                          </Link>\r\n                        ) : (\r\n                          <EmptyBox width=\"24px\"></EmptyBox>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    <div className=\"chat-wrapper\">\r\n                      <p>{chat.message}</p>\r\n                      {chatSentByUser && (\r\n                        <MessageStatus messageStatus={chat.messageStatus} />\r\n                      )}\r\n                    </div>\r\n                  </Chat>\r\n                )\r\n              })}\r\n            </Chats>\r\n          </ChatsWrapper>\r\n          <SendMessageBox {...{ sendMessage, messageInputRef }} />\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ChatBox\r\n\r\nconst NoActiveChatBox = styled.div`\r\n  grid-area: noActiveInbox;\r\n  align-self: center;\r\n  justify-self: center;\r\n  text-align: center;\r\n  h1 {\r\n    font-size: 22px;\r\n    font-weight: 300;\r\n    margin-top: 7px;\r\n  }\r\n  p {\r\n    color: rgb(142, 142, 142);\r\n    font-size: 14px;\r\n    margin-top: 6px;\r\n    margin-bottom: 25px;\r\n  }\r\n  ${Button} {\r\n    margin: auto;\r\n  }\r\n`\r\n\r\nconst Heading = styled.div`\r\n  border-bottom: 1px solid rgb(219, 219, 219);\r\n  grid-area: chatBoxHeading;\r\n  padding: 20px 20px 20px 40px;\r\n`\r\nconst ChatsWrapper = styled.div`\r\n  display: flex;\r\n  grid-area: chats;\r\n  overflow-y: auto;\r\n`\r\nconst Chats = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  margin-top: auto;\r\n  padding: 20px 20px 0px 20px;\r\n  width: 100%;\r\n`\r\nconst EmptyBox: any = styled.div`\r\n  width: ${({ width }: any) => width};\r\n`\r\nconst Chat: any = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n  margin-bottom: 8px;\r\n  align-self: ${({ chatSentByUser }: any) =>\r\n    chatSentByUser ? 'flex-end' : 'flex-start'};\r\n  .profile-pic,\r\n  ${EmptyBox} {\r\n    margin-right: 8px;\r\n  }\r\n  .profile-pic {\r\n    border-radius: 50%;\r\n  }\r\n  .chat-wrapper {\r\n    background: ${({ chatSentByUser }: any) =>\r\n      chatSentByUser ? 'rgb(239, 239, 239)' : 'transparent'};\r\n    border: 1px solid rgb(239, 239, 239);\r\n    border-radius: 22px;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    font-size: 14px;\r\n    padding: 16px;\r\n    max-width: 234px;\r\n    p {\r\n      box-sizing: border-box;\r\n      max-width: ${({ chatSentByUser }: any) =>\r\n        chatSentByUser ? 'calc(100% - 16px)' : '100%'};\r\n      padding-right: ${({ chatSentByUser }: any) =>\r\n        chatSentByUser ? '7px' : '0px'};\r\n      word-wrap: break-word;\r\n    }\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\nimport { CloseIcon } from '../Icons/Icons'\r\n\r\nconst Chip = ({ text, onClose }: any) => {\r\n  return (\r\n    <StyledChip>\r\n      <ChipText>{text}</ChipText>\r\n      <CloseIconButton onClick={() => onClose(text)}>\r\n        <CloseIcon widthAndHeight={12} color=\"#0095f6\" />\r\n      </CloseIconButton>\r\n    </StyledChip>\r\n  )\r\n}\r\n\r\nexport default Chip\r\n\r\nconst StyledChip = styled.div`\r\n  background: rgb(224, 241, 255);\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 35px;\r\n  margin: 4px;\r\n  padding: 0 12px;\r\n`\r\nconst ChipText = styled.div`\r\n  color: rgb(0, 149, 246);\r\n`\r\nconst CloseIconButton = styled.button`\r\n  margin-left: 8px;\r\n`\r\n","import Box from '@mui/material/Box'\r\nimport Button from '@mui/material/Button'\r\nimport Modal from '@mui/material/Modal'\r\nimport axios from 'axios'\r\nimport produce from 'immer'\r\nimport {\r\n  forwardRef,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react'\r\nimport styled from 'styled-components'\r\nimport Chip from '../atoms/Chip/Chip'\r\nimport {\r\n  CircleNotSelectedIcon,\r\n  CircleSelectedIcon,\r\n  CloseIcon,\r\n} from '../atoms/Icons/Icons'\r\nimport Input from '../atoms/Input/Input'\r\nimport { NameUsernameWithImage } from '../atoms/layouts/UsernameWithImage'\r\nimport { transformCloudinaryImage } from '../utils/utilFunctions'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\n\r\nconst SendMessageModal = ({\r\n  suggestedUsers,\r\n  open,\r\n  setOpen,\r\n  handleNextClick,\r\n}: any) => {\r\n  const [searchResults, setSearchResults] = useState<\r\n    'loading' | 'no results' | any[]\r\n  >([])\r\n  const [selected, setSelected] = useState<any>([])\r\n  const [nextButtonDisabled, setNextButtonDisabled] = useState(false)\r\n\r\n  const inputRef = useRef<any>()\r\n\r\n  useEffect(() => {\r\n    setNextButtonDisabled(false)\r\n  }, [open])\r\n\r\n  const handleChange = async (e: any) => {\r\n    const value = e.target.value\r\n    if (value.trim() === '') return setSearchResults([])\r\n    setSearchResults('loading')\r\n\r\n    // TODO: implement debouncing\r\n    const getSearchResults = await axios.get(`${DOMAIN}/searchUser/${value}`)\r\n    if (getSearchResults.data.length === 0)\r\n      return setSearchResults('no results')\r\n\r\n    const modifiedResults = getSearchResults.data.map((v: any) => {\r\n      return {\r\n        ...v,\r\n        profilePicture: v.profilePicture.withVersion,\r\n      }\r\n    })\r\n    setSearchResults(modifiedResults)\r\n  }\r\n\r\n  const unselectThisUser = (info: any) => {\r\n    setSelected((selected: any) => {\r\n      let temp = [...selected]\r\n      temp = temp.filter((v) => v.username !== info.username)\r\n      return temp\r\n    })\r\n  }\r\n  const handleUserClick = (info: any) => {\r\n    const isThisUserSelected = selected.find(\r\n      (v: any) => v.username === info.username\r\n    )\r\n    if (isThisUserSelected) {\r\n      unselectThisUser(info)\r\n      return\r\n    }\r\n    // setSelected([username])\r\n    setSelected((selected: any) => {\r\n      return produce(selected, (draft: any) => {\r\n        draft.push(info)\r\n      })\r\n    })\r\n    inputRef.current.value = ''\r\n    setSearchResults([])\r\n  }\r\n\r\n  const userList: any = useMemo(\r\n    () =>\r\n      searchResults.length === 0\r\n        ? { listType: 'suggestedUsers', data: suggestedUsers }\r\n        : { listType: 'searchResults', data: searchResults },\r\n    [searchResults, suggestedUsers]\r\n  )\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={() => setOpen(false)}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n    >\r\n      <StyledBox>\r\n        <SendMessageModalHeader>\r\n          <CloseButton onClick={() => setOpen(false)}>\r\n            <CloseIcon color=\"#000\" widthAndHeight=\"18px\" />\r\n          </CloseButton>\r\n          <HeadingText>New Message</HeadingText>\r\n          <NextButton\r\n            disabled={!selected.length || nextButtonDisabled}\r\n            onClick={() => {\r\n              setNextButtonDisabled(true)\r\n              handleNextClick(selected)\r\n            }}\r\n          >\r\n            Next\r\n          </NextButton>\r\n        </SendMessageModalHeader>\r\n\r\n        <SearchAndSelectedArea>\r\n          <To>To:</To>\r\n          <SearchAndSelectedContainer>\r\n            <ChipsWrapper>\r\n              {selected.map((v: any) => (\r\n                // <span>{v}</span>\r\n                <Chip\r\n                  key={v.username}\r\n                  text={v.username}\r\n                  onClose={() => unselectThisUser(v)}\r\n                />\r\n              ))}\r\n            </ChipsWrapper>\r\n            <SearchInput\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              onChange={handleChange}\r\n              ref={inputRef}\r\n            />\r\n          </SearchAndSelectedContainer>\r\n        </SearchAndSelectedArea>\r\n\r\n        {searchResults === 'loading' ? (\r\n          <h1>Loading...</h1>\r\n        ) : searchResults === 'no results' ? (\r\n          <h1>No account found</h1>\r\n        ) : (\r\n          <UserList>\r\n            {userList.listType === 'suggestedUsers' && (\r\n              <SuggestedHeading>Suggested</SuggestedHeading>\r\n            )}\r\n            {userList.data.map((v: any) => (\r\n              <User\r\n                key={v.username}\r\n                info={v}\r\n                {...{ selected, setSelected }}\r\n                onClick={() => handleUserClick(v)}\r\n              />\r\n            ))}\r\n          </UserList>\r\n        )}\r\n      </StyledBox>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default SendMessageModal\r\n\r\nconst StyledBox = styled(Box)`\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  height: 63vh;\r\n  width: 400px;\r\n  &:focus {\r\n    border: none;\r\n    outline: none;\r\n  }\r\n`\r\nconst HeadingText = styled.div``\r\nconst CloseButton = styled.button``\r\nconst NextButton = styled.button``\r\nconst SendMessageModalHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n  height: 42px;\r\n  ${CloseButton} {\r\n    line-height: 1;\r\n    margin: 0 16px;\r\n    position: absolute;\r\n    left: 0;\r\n  }\r\n  ${HeadingText} {\r\n    color: rgb(38, 38, 38);\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n  ${NextButton} {\r\n    color: rgb(0, 149, 246);\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    margin: 0 16px;\r\n    position: absolute;\r\n    right: 0;\r\n  }\r\n`\r\n\r\nconst SearchAndSelectedArea = styled.div`\r\n  display: flex;\r\n  padding: 8px 0;\r\n  border-top: 1px solid rgb(219, 219, 219);\r\n  border-bottom: 1px solid rgb(219, 219, 219);\r\n`\r\nconst To = styled.div`\r\n  font-weight: 600;\r\n  padding: 4px 12px;\r\n`\r\nconst SearchAndSelectedContainer = styled.div`\r\n  flex-grow: 1;\r\n`\r\nconst ChipsWrapper = styled.div`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  max-height: 17vh;\r\n  overflow-y: auto;\r\n  padding: 0 8px;\r\n  width: 100%;\r\n`\r\nconst SearchInput = styled.input`\r\n  border: none;\r\n  box-sizing: border-box;\r\n  caret-color: #000000;\r\n  font-size: 14px;\r\n  height: 30px;\r\n  padding: 0 20px;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n  width: 84%;\r\n`\r\nconst SuggestedHeading = styled.div`\r\n  color: rgb(38, 38, 38);\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  padding: 16px;\r\n`\r\nconst UserList = styled.div`\r\n  /* background: #000; */\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n`\r\n\r\nconst User = ({ info, selected, onClick }: any) => {\r\n  const isThisUserSelected = useMemo(\r\n    () => selected.find((v: any) => v.username === info.username),\r\n    [selected, info]\r\n  )\r\n  return (\r\n    <StyledUser onClick={() => onClick(info)} key={info.username}>\r\n      <NameUsernameWithImage\r\n        image={transformCloudinaryImage(info.profilePicture, 'w_44')}\r\n        name={info.name}\r\n        username={info.username}\r\n      />\r\n      {isThisUserSelected ? <CircleSelectedIcon /> : <CircleNotSelectedIcon />}\r\n    </StyledUser>\r\n  )\r\n}\r\n\r\nconst StyledUser = styled.button`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 8px 16px;\r\n  width: 100%;\r\n`\r\n","import produce from 'immer'\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport { NavLink, useNavigate, useParams } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { Container } from '../atoms/Boxes/Container'\r\nimport { NewChatIcon } from '../atoms/Icons/Icons'\r\nimport { ImageGroup } from '../atoms/layouts/UsernameWithImage'\r\nimport MessageStatus from '../atoms/MessageStatus/MessageStatus'\r\nimport ChatBox from '../molecules/ChatBox'\r\nimport SendMessageModal from '../molecules/SendMessageModal'\r\nimport { socket } from '../SocketIO'\r\nimport {\r\n  getAndSetInbox,\r\n  modifyInboxes,\r\n  removeDuplicates,\r\n  transformCloudinaryImage,\r\n} from '../utils/utilFunctions'\r\n\r\nconst DirectMessagePage = ({\r\n  userDetails,\r\n  chats,\r\n  setChats,\r\n  inboxes,\r\n  setInboxes,\r\n}: any) => {\r\n  const params = useParams()\r\n  const [modalOpen, setModalOpen] = useState(false)\r\n  const [chatUserDetails, setChatUserDetails] = useState<any>({})\r\n  const navigate = useNavigate()\r\n  useEffect(() => {\r\n    let temp: any = {}\r\n    inboxes.forEach((inbox: any) => {\r\n      inbox.participants.forEach((participant: any) => {\r\n        temp[participant._id] = {}\r\n        temp[participant._id].name = participant.name\r\n        temp[participant._id].profilePicture = participant.profilePicture\r\n        temp[participant._id].username = participant.username\r\n      })\r\n    })\r\n    setChatUserDetails(temp)\r\n  }, [inboxes])\r\n  useEffect(() => {\r\n    socket.connect()\r\n  }, [])\r\n  useEffect(() => {\r\n    socket.emit('get-inboxes', {}, (fetchedInboxes: any) => {\r\n      const modifiedInboxes = modifyInboxes(\r\n        fetchedInboxes.data,\r\n        userDetails._id\r\n      )\r\n      setInboxes((inboxes: any) => {\r\n        return removeDuplicates([...inboxes, ...modifiedInboxes])\r\n      })\r\n    })\r\n  }, [userDetails._id, setInboxes])\r\n  useEffect(() => {\r\n    socket.off('online-status')\r\n    socket.on('online-status', (data: any) => {\r\n      // in online-status data._id should never be user's own id\r\n      if (data._id === userDetails._id) {\r\n        console.error(\"in online-status data._id should never be user's own id\")\r\n        return\r\n      }\r\n      // private chat inbox._id of this user and data._id\r\n      const inboxId = inboxes.find((inbox: any) => {\r\n        if (inbox.participants.length === 1) {\r\n          return inbox.participants[0]._id === data._id\r\n        }\r\n        return false\r\n      })?._id\r\n      if (!inboxId) return\r\n      // update onlineStatus and inbox's lastActivity\r\n      setInboxes((inboxes: any) => {\r\n        return produce(inboxes, (draft: any) => {\r\n          const inboxIndex = draft.findIndex((v: any) => v._id === inboxId)\r\n          const inbox = draft[inboxIndex]\r\n          inbox.participants[0].online = data.online\r\n          // update inbox lastActivity\r\n          if (data.online && inbox.lastActivity.messageStatus === 'sent') {\r\n            inbox.lastActivity.messageStatus = 'delivered'\r\n          }\r\n        })\r\n      })\r\n\r\n      // all messages this user sent to data._id got delivered so update chats' messageStatus\r\n      if (data.online) {\r\n        setChats((chats: any) => {\r\n          return produce(chats, (draft: any) => {\r\n            draft?.[inboxId]?.forEach((chat: any) => {\r\n              if (chat.messageStatus === 'sent') {\r\n                chat.messageStatus = 'delivered'\r\n              }\r\n            })\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }, [inboxes, setInboxes, setChats, userDetails._id])\r\n\r\n  const inboxAndParticipantData = useMemo(() => {\r\n    const temp: any = {\r\n      participantData: {},\r\n      inboxData: {\r\n        group: {},\r\n      },\r\n    }\r\n    try {\r\n      if (!params.inboxId || inboxes.length === 0) return temp\r\n      const inboxIndex = inboxes.findIndex((v: any) => v._id === params.inboxId)\r\n      if (inboxes[inboxIndex].group.isGroup) {\r\n        temp.inboxData.group = {\r\n          isGroup: true,\r\n          groupName: inboxes[inboxIndex].group.groupName,\r\n        }\r\n      }\r\n      inboxes[inboxIndex].participants.forEach((v: any) => {\r\n        temp.participantData[v._id] = chatUserDetails[v._id]\r\n      })\r\n      return temp\r\n    } catch (err) {\r\n      console.error(err)\r\n      navigate('/inbox', { replace: true })\r\n    }\r\n    return temp\r\n  }, [params.inboxId, chatUserDetails, inboxes, navigate])\r\n  const suggestedUsers = useMemo(() => {\r\n    const temp = []\r\n    const keys = Object.keys(chatUserDetails)\r\n    for (let i = 0; i < Math.min(11, keys.length); i++) {\r\n      const { name, username, profilePicture } = chatUserDetails[keys[i]]\r\n      temp.push({\r\n        _id: keys[i],\r\n        name,\r\n        username,\r\n        profilePicture,\r\n      })\r\n    }\r\n    return temp\r\n  }, [chatUserDetails])\r\n  return (\r\n    <StyledContainer activeInbox={!!params.inboxId}>\r\n      <UsernameAndNewChat>\r\n        <Username>{userDetails.username}</Username>\r\n        <NewChatButton onClick={() => setModalOpen(true)}>\r\n          <NewChatIcon />\r\n        </NewChatButton>\r\n      </UsernameAndNewChat>\r\n      <InboxList>\r\n        {inboxes.map((inbox: any) => {\r\n          const isGroup = inbox.group.isGroup\r\n          return (\r\n            <Inbox\r\n              to={'/inbox/' + inbox._id}\r\n              key={inbox._id}\r\n              $group={isGroup}\r\n              $lastMessage={inbox.lastActivity.message}\r\n              $online={inbox.participants[0].online}\r\n              className={({ isActive }: any) =>\r\n                isActive ? 'active' : undefined\r\n              }\r\n            >\r\n              <ProfilePic>\r\n                {isGroup ? (\r\n                  <ImageGroup\r\n                    image1={inbox.participants[0].profilePicture}\r\n                    image2={inbox.participants[1].profilePicture}\r\n                    imageWidth=\"40px\"\r\n                    containerWidth=\"56px\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={transformCloudinaryImage(\r\n                      inbox.participants[0].profilePicture,\r\n                      'w_56'\r\n                    )}\r\n                    alt={inbox.participants[0].username}\r\n                  />\r\n                )}\r\n              </ProfilePic>\r\n              <InboxName>\r\n                {isGroup ? inbox.group.groupName : inbox.participants[0].name}\r\n              </InboxName>\r\n\r\n              {inbox.lastActivity.message !== '' && (\r\n                <>\r\n                  {inbox.lastActivity.sentBy === userDetails._id && (\r\n                    <StyledMessageStatus\r\n                      messageStatus={inbox.lastActivity.messageStatus}\r\n                    />\r\n                  )}\r\n                  <Message>{inbox.lastActivity.message}</Message>\r\n                </>\r\n              )}\r\n              {/* TODO: message sent or received secs/mins/days/weeks ago */}\r\n              {/* </LastActivity> */}\r\n            </Inbox>\r\n          )\r\n        })}\r\n      </InboxList>\r\n      <ChatBox\r\n        {...{\r\n          chats,\r\n          inboxAndParticipantData,\r\n          setChats,\r\n          userDetails,\r\n          inboxes,\r\n          setInboxes,\r\n          setModalOpen,\r\n        }}\r\n      />\r\n      <SendMessageModal\r\n        open={modalOpen}\r\n        setOpen={setModalOpen}\r\n        handleNextClick={(selected: any[]) => {\r\n          getAndSetInbox(\r\n            selected.map((v: any) => v._id),\r\n            userDetails,\r\n            inboxes,\r\n            setInboxes,\r\n            setChats,\r\n            navigate,\r\n            () => setModalOpen(false)\r\n          )\r\n        }}\r\n        {...{ suggestedUsers }}\r\n      />\r\n    </StyledContainer>\r\n  )\r\n}\r\n\r\nexport default DirectMessagePage\r\n\r\nconst Username = styled.div``\r\nconst InboxName = styled.div``\r\nconst ProfilePic = styled.div``\r\nconst StyledMessageStatus = styled(MessageStatus)``\r\nconst Message = styled.div``\r\nconst Inbox: any = styled(NavLink)`\r\n  display: grid;\r\n  grid-template-columns: auto auto 1fr;\r\n  grid-template-rows: auto auto;\r\n  grid-template-areas: ${({ $lastMessage }: any) =>\r\n    !!$lastMessage\r\n      ? `'profilePic username username'\r\n    'profilePic messageStatus message'`\r\n      : `'profilePic username username'\r\n    'profilePic username username'`};\r\n\r\n  padding: 8px 20px;\r\n  text-decoration: none;\r\n  &.active {\r\n    background: rgb(239, 239, 239);\r\n  }\r\n  ${ProfilePic} {\r\n    grid-area: profilePic;\r\n    height: 56px;\r\n    position: relative;\r\n    margin-right: 12px;\r\n    img {\r\n      border-radius: 50%;\r\n    }\r\n    &::after {\r\n      background: ${({ $online }: any) => ($online ? '#78de45' : '#c4c4c4')};\r\n      border: 4px solid #fff;\r\n      border-radius: 50%;\r\n      content: '';\r\n      display: ${({ $group }: any) => ($group ? 'none' : 'block')};\r\n      position: absolute;\r\n      bottom: 0;\r\n      right: 0;\r\n      width: 13px;\r\n      height: 13px;\r\n    }\r\n  }\r\n  ${InboxName} {\r\n    align-self: ${({ $lastMessage }: any) =>\r\n      !!$lastMessage ? 'end' : 'center'};\r\n    color: rgb(38, 38, 38);\r\n    font-size: 16px;\r\n    grid-area: username;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  ${StyledMessageStatus} {\r\n    grid-area: messageStatus;\r\n    margin-right: 2px;\r\n    margin-top: 1px;\r\n  }\r\n  ${Message} {\r\n    color: rgb(142, 142, 142);\r\n    font-size: 14px;\r\n    grid-area: message;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n`\r\nconst StyledContainer: any = styled(Container)`\r\n  background: #fff;\r\n  border: 1px solid rgb(219, 219, 219);\r\n  border-radius: 4px;\r\n  display: grid;\r\n  grid-template-columns: 350px;\r\n  grid-template-rows: 60px 1fr auto;\r\n  grid-template-areas: ${({ activeInbox }: any) =>\r\n    activeInbox\r\n      ? `'usernameAndChat chatBoxHeading'\r\n          'inboxList chats'\r\n          'inboxList sendMessageBox'`\r\n      : `'usernameAndChat noActiveInbox'\r\n          'inboxList noActiveInbox'\r\n          'inboxList noActiveInbox'`};\r\n  margin: 20px auto;\r\n  overflow: auto;\r\n  width: 100%;\r\n`\r\nconst InboxList = styled.div`\r\n  border-right: 1px solid rgb(219, 219, 219);\r\n  grid-area: inboxList;\r\n  padding: 10px 0;\r\n  overflow: auto;\r\n`\r\nconst NewChatButton = styled.button``\r\nconst UsernameAndNewChat = styled.div`\r\n  border-right: 1px solid rgb(219, 219, 219);\r\n  border-bottom: 1px solid rgb(219, 219, 219);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  grid-area: usernameAndChat;\r\n  position: relative;\r\n  ${Username} {\r\n    text-align: center;\r\n    color: rgb(38, 38, 38);\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    width: 65%;\r\n  }\r\n  ${NewChatButton} {\r\n    position: absolute;\r\n    right: 20px;\r\n  }\r\n`\r\n","import { Box, Modal } from '@mui/material'\r\nimport axios from 'axios'\r\nimport produce from 'immer'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { Button, Button2 } from '../atoms/Buttons/Buttons'\r\nimport {\r\n  getAndSetInbox,\r\n  transformCloudinaryImage,\r\n} from '../utils/utilFunctions'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\nimport { Container } from './../atoms/Boxes/Container'\r\n\r\nconst getDataUrlOfFile = async (inputRef: any) => {\r\n  const blobFiles = inputRef.current.files[0]\r\n  const readDataURL = async (file: any) => {\r\n    const reader = new FileReader()\r\n    const loadedFile = new Promise((resolve, reject) => {\r\n      reader.addEventListener('load', () => {\r\n        resolve(reader.result)\r\n      })\r\n    })\r\n    reader.readAsDataURL(file)\r\n    const result = await loadedFile\r\n    return result\r\n  }\r\n\r\n  if (blobFiles) {\r\n    const file = await readDataURL(blobFiles)\r\n    return file\r\n  }\r\n}\r\n\r\nconst changeProfilePicture = async (\r\n  profilePicture: string,\r\n  setProfileDetails: any\r\n) => {\r\n  try {\r\n    const response = await axios.post(`${DOMAIN}/profilePicture/change`, {\r\n      profilePicture,\r\n    })\r\n    console.log('success', response)\r\n    setProfileDetails((profileDetails: any) => {\r\n      if (profileDetails._id !== response.data._id) return profileDetails\r\n      return produce(profileDetails, (draft: any) => {\r\n        draft.profilePicture = response.data.profilePicture\r\n      })\r\n    })\r\n  } catch (err) {\r\n    console.error(err)\r\n    alert('failed')\r\n  }\r\n}\r\nconst removeCurrentPhoto = async (setProfileDetails: any) => {\r\n  try {\r\n    const response = await axios.post(`${DOMAIN}/profilePicture/remove`)\r\n    console.log('success', response)\r\n    setProfileDetails((profileDetails: any) => {\r\n      if (profileDetails._id !== response.data._id) return profileDetails\r\n      return produce(profileDetails, (draft: any) => {\r\n        draft.profilePicture = response.data.profilePicture\r\n      })\r\n    })\r\n  } catch (err) {\r\n    console.error(err)\r\n    alert('failed')\r\n  }\r\n}\r\n\r\nconst ProfilePage = ({ userDetails, setChats, inboxes, setInboxes }: any) => {\r\n  const [profileDetails, setProfileDetails] = useState<any>()\r\n  const [messageButtonDisabled, setMessageButtonDisabled] = useState(false)\r\n  const [profilePictureModalOpen, setProfilePictureModalOpen] = useState(false)\r\n\r\n  const inputRef = useRef<any>()\r\n\r\n  console.log('profileDetails', profileDetails)\r\n  const params = useParams()\r\n  const navigate = useNavigate()\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      try {\r\n        const response = await axios.get(`${DOMAIN}/${params.username}`)\r\n        setProfileDetails(response.data)\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    })()\r\n  }, [params.username])\r\n\r\n  if (!profileDetails?.username) return <h1>Loading...</h1>\r\n  return (\r\n    <div>\r\n      <StyledContainer as=\"header\">\r\n        <button\r\n          className=\"img-box\"\r\n          onClick={() => {\r\n            if (profileDetails._id === userDetails._id) {\r\n              setProfilePictureModalOpen(true)\r\n            }\r\n          }}\r\n        >\r\n          <img\r\n            src={transformCloudinaryImage(\r\n              profileDetails.profilePicture.withVersion,\r\n              'w_320'\r\n            )}\r\n            alt={profileDetails.username}\r\n          />\r\n        </button>\r\n        <section>\r\n          <div className=\"flex username-and-edit-profile\">\r\n            <h2>{profileDetails.username}</h2>\r\n            {userDetails.username !== profileDetails.username && (\r\n              <>\r\n                <Button2\r\n                  disabled={messageButtonDisabled}\r\n                  onClick={() => {\r\n                    setMessageButtonDisabled(true)\r\n                    getAndSetInbox(\r\n                      [profileDetails._id],\r\n                      userDetails,\r\n                      inboxes,\r\n                      setInboxes,\r\n                      setChats,\r\n                      navigate\r\n                    )\r\n                  }}\r\n                >\r\n                  Message\r\n                </Button2>\r\n                <Button disabled widthAuto>\r\n                  Follow\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n          <ul className=\"flex posts-followers-following\">\r\n            <li>\r\n              <strong>{profileDetails.postCount || 0}</strong> posts\r\n            </li>\r\n            <li>\r\n              <strong>{profileDetails.followerCount || 0}</strong> followers\r\n            </li>\r\n            <li>\r\n              <strong>{profileDetails.followingCount || 0}</strong> following\r\n            </li>\r\n          </ul>\r\n          <div>\r\n            <h3>{profileDetails.name}</h3>\r\n            <p className=\"bio\">{profileDetails.bio}</p>\r\n          </div>\r\n        </section>\r\n      </StyledContainer>\r\n      <Posts as=\"section\">\r\n        {profileDetails.posts.length === 0 ? (\r\n          <h2>No Posts Yet</h2>\r\n        ) : (\r\n          profileDetails.posts.map((v: any, i: number) => (\r\n            <div key={v._id}>\r\n              <img\r\n                src={transformCloudinaryImage(v.images[0].url, 'w_293')}\r\n                alt={`post ${i}`}\r\n              />\r\n            </div>\r\n          ))\r\n        )}\r\n      </Posts>\r\n      <Modal\r\n        open={profilePictureModalOpen}\r\n        onClose={() => setProfilePictureModalOpen(false)}\r\n      >\r\n        <StyledBox>\r\n          <h2>Change Profile Photo</h2>\r\n          <button\r\n            className=\"upload-photo\"\r\n            onClick={() => inputRef.current.click()}\r\n          >\r\n            Upload Photo\r\n          </button>\r\n          <button\r\n            className=\"remove-photo\"\r\n            onClick={() => {\r\n              setProfilePictureModalOpen(false)\r\n              removeCurrentPhoto(setProfileDetails)\r\n            }}\r\n          >\r\n            Remove Current Photo\r\n          </button>\r\n          <button\r\n            className=\"cancel\"\r\n            onClick={() => setProfilePictureModalOpen(false)}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <FileInput\r\n            type=\"file\"\r\n            ref={inputRef}\r\n            onChange={async () => {\r\n              setProfilePictureModalOpen(false)\r\n              const profilePicture: any = await getDataUrlOfFile(inputRef)\r\n              changeProfilePicture(profilePicture, setProfileDetails)\r\n            }}\r\n          />\r\n        </StyledBox>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfilePage\r\n\r\nconst FileInput = styled.input`\r\n  display: hidden;\r\n  position: absolute;\r\n  left: -10000px;\r\n`\r\n\r\nconst StyledContainer = styled(Container)`\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 30px 20px 60px 94px;\r\n  .img-box {\r\n    border-radius: 50%;\r\n    margin-right: 98px;\r\n    width: 150px;\r\n    height: 150px;\r\n    overflow: hidden;\r\n    text-align: center;\r\n    img {\r\n      object-fit: cover;\r\n      object-position: center center;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  .flex {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  h2 {\r\n    font-weight: 300;\r\n    color: rgb(38, 38, 38);\r\n    font-size: 28px;\r\n    margin: 0;\r\n    margin-right: 20px;\r\n  }\r\n  .posts-followers-following li {\r\n    margin-right: 50px;\r\n  }\r\n  section .username-and-edit-profile,\r\n  section ul {\r\n    margin-bottom: 20px;\r\n  }\r\n  section .username-and-edit-profile {\r\n    ${Button2} {\r\n      margin-right: 8px;\r\n    }\r\n    ${Button} {\r\n      padding-left: 24px;\r\n      padding-right: 24px;\r\n    }\r\n  }\r\n  section > div:last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n  h3 {\r\n    margin: 0;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n  p {\r\n    font-size: 16px;\r\n    margin: 0;\r\n  }\r\n  strong {\r\n    font-weight: 600;\r\n  }\r\n`\r\nconst Posts = styled(Container)`\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  justify-content: center;\r\n  text-align: center;\r\n  h2 {\r\n    color: rgb(38, 38, 38);\r\n    font-weight: 300;\r\n    font-size: 46px;\r\n  }\r\n  div {\r\n    width: 293px;\r\n    height: 293px;\r\n    margin-right: 28px;\r\n    margin-bottom: 28px;\r\n  }\r\n  div:nth-child(3n + 0) {\r\n    margin-right: 0;\r\n  }\r\n  img {\r\n    object-fit: contain;\r\n    height: 100%;\r\n  }\r\n`\r\nconst StyledBox = styled(Box)`\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  display: flex;\r\n  flex-flow: column;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  text-align: center;\r\n  width: 400px;\r\n  &:focus {\r\n    border: none;\r\n    outline: none;\r\n  }\r\n  h2 {\r\n    color: rgb(38, 38, 38);\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n    margin: 0;\r\n    padding: 32px 0;\r\n  }\r\n  button {\r\n    border-top: 1px solid rgb(219, 219, 219);\r\n    font-size: 14px;\r\n    padding: 15px 0;\r\n    font-weight: 700;\r\n  }\r\n  .upload-photo {\r\n    color: rgb(0, 149, 246);\r\n  }\r\n  .remove-photo {\r\n    color: rgb(237, 73, 86);\r\n  }\r\n  .cancel {\r\n    font-weight: 400;\r\n  }\r\n`\r\n","import axios from 'axios'\r\nimport { FormEvent, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button } from '../atoms/Buttons/Buttons'\r\nimport Input from '../atoms/Input/Input'\r\nimport { DOMAIN } from '../utils/utilVariables'\r\n\r\nconst signUpFormInputData = [\r\n  {\r\n    label: 'Email',\r\n    name: 'email',\r\n    type: 'email',\r\n  },\r\n  {\r\n    label: 'Full Name',\r\n    name: 'name',\r\n  },\r\n  {\r\n    label: 'Username',\r\n    name: 'username',\r\n  },\r\n  {\r\n    label: 'Password',\r\n    name: 'password',\r\n    type: 'password',\r\n  },\r\n]\r\n\r\nconst SignUpForm = ({ setUserDetails }: any) => {\r\n  const signUpFormValues = useRef<any>({\r\n    name: '',\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n  })\r\n  const signup = async (e: FormEvent<HTMLFormElement>) => {\r\n    try {\r\n      e.preventDefault()\r\n      const response = await axios.post(\r\n        `${DOMAIN}/signup`,\r\n        signUpFormValues.current\r\n      )\r\n      console.log(response)\r\n      setUserDetails(response.data)\r\n    } catch (err: any) {\r\n      console.error(err)\r\n      alert(err?.response?.data?.message)\r\n    }\r\n  }\r\n  return (\r\n    <StyledSignUpForm onSubmit={signup}>\r\n      {signUpFormInputData.map((v) => {\r\n        return (\r\n          <Input\r\n            key={v.name}\r\n            label={v.label}\r\n            name={v.name}\r\n            type={v.type}\r\n            values={signUpFormValues}\r\n            required\r\n          />\r\n        )\r\n      })}\r\n      <Button>Sign up</Button>\r\n    </StyledSignUpForm>\r\n  )\r\n}\r\n\r\nexport default SignUpForm\r\n\r\nconst StyledSignUpForm = styled.form`\r\n  .input-box {\r\n    margin-bottom: 6px;\r\n  }\r\n  button {\r\n    margin: 14px 0;\r\n  }\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Or } from '../App'\r\nimport Logo from '../atoms/IconsAndImages/Logo'\r\nimport { LinkText, SubHeading, Text1 } from '../atoms/Text/Texts'\r\nimport SignUpForm from '../molecules/SignUpForm'\r\n\r\nconst SignUpPage = ({ setUserDetails }: any) => {\r\n  return (\r\n    <StyledSignUpPage>\r\n      <ScreenSlideShow></ScreenSlideShow>\r\n      <Right>\r\n        <BorderedBox className=\"right\">\r\n          <Logo />\r\n          <SubHeading>\r\n            Sign up to see photos and videos from your friends.\r\n          </SubHeading>\r\n          {/* <Button>facebook logo Log in with Facebook</Button> */}\r\n          <Or />\r\n          <SignUpForm {...{ setUserDetails }} />\r\n        </BorderedBox>\r\n        <BorderedBox className=\"bottom\">\r\n          <Text1>\r\n            Have an account? <LinkText to=\"/accounts/login\">Log in</LinkText>\r\n          </Text1>\r\n        </BorderedBox>\r\n      </Right>\r\n    </StyledSignUpPage>\r\n  )\r\n}\r\n\r\nexport default SignUpPage\r\n\r\nconst Right = styled.div`\r\n  display: flex;\r\n  flex-flow: column;\r\n`\r\n\r\nconst ScreenSlideShow = styled.div``\r\nconst StyledSignUpPage = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  max-width: 1080px;\r\n  margin: 33px auto;\r\n`\r\nconst BorderedBox = styled.div`\r\n  background: #fff;\r\n  border: 1px solid rgb(219, 219, 219);\r\n  padding: 25px 40px;\r\n  &.right {\r\n    box-sizing: border-box;\r\n    max-width: 350px;\r\n    margin-bottom: 10px;\r\n    .logo {\r\n      margin-top: 21px;\r\n      margin-bottom: 12px;\r\n    }\r\n  }\r\n`\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n  BrowserRouter,\r\n  Navigate,\r\n  Outlet,\r\n  Route,\r\n  Routes,\r\n  useLocation,\r\n} from 'react-router-dom'\r\nimport App from './App'\r\nimport LoginForm from './molecules/LoginForm'\r\nimport DirectMessagePage from './pages/DirectMessagePage'\r\nimport ProfilePage from './pages/ProfilePage'\r\nimport SignUpPage from './pages/SignUpPage'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport { DOMAIN } from './utils/utilVariables'\r\naxios.defaults.withCredentials = true\r\n\r\nconst Index = () => {\r\n  const [userDetails, setUserDetails] = useState<{} | false | 'loading'>(\r\n    'loading'\r\n  )\r\n  const [inboxes, setInboxes] = useState<any>([])\r\n  const [chats, setChats] = useState<any>({})\r\n\r\n  const emptyAllStates = () => {\r\n    console.log('emptyAllStates')\r\n    setInboxes([])\r\n    setChats({})\r\n    setUserDetails(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      try {\r\n        const response = await axios.get(`${DOMAIN}/`)\r\n        if (response.data._id) {\r\n          setUserDetails(response.data)\r\n        } else {\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        setUserDetails(false)\r\n      }\r\n    })()\r\n  }, [])\r\n  if (userDetails === 'loading') {\r\n    return <h1>Loading...</h1>\r\n  }\r\n  return (\r\n    <Routes>\r\n      {/* public routes\r\n          /:username\r\n          /somepost */}\r\n      {/* if not loggedIn\r\n          / => <Login />\r\n          /login\r\n          /signup */}\r\n      {/* if loggedIn\r\n          / => <NewsFeed /> \r\n          /inbox\r\n          /inbox/:inboxId\r\n          /etc */}\r\n      {userDetails === false && (\r\n        <Route\r\n          index\r\n          element={\r\n            <LoginForm\r\n              setUserDetails={(details: any) => setUserDetails(details)}\r\n            />\r\n          }\r\n        />\r\n      )}\r\n      <Route\r\n        element={\r\n          <NoAuth {...{ userDetails }}>\r\n            <Outlet />\r\n          </NoAuth>\r\n        }\r\n      >\r\n        {/* can't visit these routes if logged in */}\r\n        <Route\r\n          path=\"accounts/login\"\r\n          element={\r\n            <LoginForm\r\n              setUserDetails={(details: any) => setUserDetails(details)}\r\n            />\r\n          }\r\n        />\r\n        <Route\r\n          path=\"accounts/signup\"\r\n          element={<SignUpPage {...{ setUserDetails }} />}\r\n        />\r\n      </Route>\r\n      <Route\r\n        element={<App {...{ userDetails, setUserDetails, emptyAllStates }} />}\r\n      >\r\n        <Route\r\n          path=\":username\"\r\n          element={\r\n            <ProfilePage\r\n              {...{\r\n                userDetails,\r\n                setChats,\r\n                inboxes,\r\n                setInboxes,\r\n              }}\r\n            />\r\n          }\r\n        />\r\n        <Route path=\"/somepost\" element={<>post some</>} />\r\n\r\n        <Route\r\n          element={\r\n            <RequireAuth userDetails={userDetails}>\r\n              <Outlet />\r\n            </RequireAuth>\r\n          }\r\n        >\r\n          {/* Protected routes */}\r\n          <Route index element={<h1>News Feed</h1>} />\r\n          <Route\r\n            path=\"/inbox\"\r\n            element={\r\n              <DirectMessagePage\r\n                {...{\r\n                  userDetails,\r\n                  chats,\r\n                  setChats,\r\n                  inboxes,\r\n                  setInboxes,\r\n                }}\r\n              />\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/inbox/:inboxId\"\r\n            element={\r\n              <DirectMessagePage\r\n                {...{\r\n                  userDetails,\r\n                  chats,\r\n                  setChats,\r\n                  inboxes,\r\n                  setInboxes,\r\n                }}\r\n              />\r\n            }\r\n          />\r\n          <Route path=\"*\" element={<h1>Page does not exist</h1>} />\r\n        </Route>\r\n      </Route>\r\n    </Routes>\r\n  )\r\n}\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Index />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n\r\nconst NoAuth = ({ children, userDetails }: any) => {\r\n  console.log('noauth', userDetails)\r\n\r\n  const location: any = useLocation()\r\n  console.log('location.state', location.state)\r\n  if (userDetails && !location.state) {\r\n    return <Navigate to=\"/inbox\" replace />\r\n  }\r\n\r\n  return children\r\n}\r\n\r\nfunction RequireAuth({ children, userDetails }: any) {\r\n  let location = useLocation()\r\n\r\n  if (!userDetails) {\r\n    // Redirect them to the /login page, but save the current location they were\r\n    // trying to go to when they were redirected. This allows us to send them\r\n    // along to that page after they login, which is a nicer user experience\r\n    // than dropping them off on the home page.\r\n    return <Navigate to=\"/accounts/login\" state={{ from: location }} replace />\r\n  }\r\n\r\n  return children\r\n}\r\n"],"sourceRoot":""}